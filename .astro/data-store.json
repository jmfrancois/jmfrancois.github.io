[["Map",1,2,9,10],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.16.6","content-config-digest","e6454d9286455301","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://jmfrancois.github.io\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"monokai\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false}}","posts",["Map",11,12,36,37,58,59,80,81,103,104,125,126,147,148,169,170,191,192,213,214,235,236,257,258,279,280,301,302,323,324,345,346,368,369,390,391,412,413,434,435,469,470,500,501,522,523,544,545,566,567,588,589,610,611,645,646,668,669,690,691,715,716,757,758,800,801,822,823,844,845,867,868,889,890,911,912,945,946,967,968,991,992,1053,1054,1097,1098,1186,1187,1259,1260,1355,1356,1428,1429,1544,1545,1656,1657,1737,1738,1769,1770],"2008-01-09-en-install-eclipse-europa",{"id":11,"data":13,"body":21,"filePath":22,"digest":23,"rendered":24,"legacyId":35},{"title":14,"date":15,"categories":16,"tags":18,"lang":17},"Install Eclipse Europa under Linux",["Date","2008-01-09T00:00:00.000Z"],[17],"en",[19,20],"linux","eclipse","\u003C!-- https://toutpt.wordpress.com/page/3/ -->\n\nHi there, I have spent a long time trying to install Eclipse this week. So I want to keep a log of this work. Here it is: a list of modules with their correct versions (that are working together).\n\n* eclipse 3.3.1.1 (needed for sure)\n* acceleo-runtime-2.1.1\n* mdt-uml2-SDK-2.1.1 (uml2 support)\n* emf-sdo-xsd-SDK-2.3.1.zip (modeling framework)\n* wtp-wst-M-2.0.2 (web source editors like xml, html, …)\n* subclipse-1.2.4 (svn support)\n* pydev-1_3_10 (python support)\n\nI will now give you some links to install all that:\n\n* eclipse\n* acceleo\n* mdt-uml2\n* emf …\n* wtp\n* subclipse\n* pydev\n\nThat's it. I need to add Mylyn support (mylyn + pydev support), and a UML2 modeler (like topcased) to be ready for MDA production ! But I have a pb with GMF on downloads. I hope it will be soon fixed.","src/content/posts/2008-01-09-en-install-eclipse-europa.md","241e0d3ab6867346",{"html":25,"metadata":26},"\u003C!-- https://toutpt.wordpress.com/page/3/ -->\n\u003Cp>Hi there, I have spent a long time trying to install Eclipse this week. So I want to keep a log of this work. Here it is: a list of modules with their correct versions (that are working together).\u003C/p>\n\u003Cul>\n\u003Cli>eclipse 3.3.1.1 (needed for sure)\u003C/li>\n\u003Cli>acceleo-runtime-2.1.1\u003C/li>\n\u003Cli>mdt-uml2-SDK-2.1.1 (uml2 support)\u003C/li>\n\u003Cli>emf-sdo-xsd-SDK-2.3.1.zip (modeling framework)\u003C/li>\n\u003Cli>wtp-wst-M-2.0.2 (web source editors like xml, html, …)\u003C/li>\n\u003Cli>subclipse-1.2.4 (svn support)\u003C/li>\n\u003Cli>pydev-1_3_10 (python support)\u003C/li>\n\u003C/ul>\n\u003Cp>I will now give you some links to install all that:\u003C/p>\n\u003Cul>\n\u003Cli>eclipse\u003C/li>\n\u003Cli>acceleo\u003C/li>\n\u003Cli>mdt-uml2\u003C/li>\n\u003Cli>emf …\u003C/li>\n\u003Cli>wtp\u003C/li>\n\u003Cli>subclipse\u003C/li>\n\u003Cli>pydev\u003C/li>\n\u003C/ul>\n\u003Cp>That’s it. I need to add Mylyn support (mylyn + pydev support), and a UML2 modeler (like topcased) to be ready for MDA production ! But I have a pb with GMF on downloads. I hope it will be soon fixed.\u003C/p>",{"headings":27,"localImagePaths":28,"remoteImagePaths":29,"frontmatter":30,"imagePaths":34},[],[],[],{"title":14,"categories":31,"tags":32,"date":33},[17],[19,20],["Date","2008-01-09T00:00:00.000Z"],[],"2008-01-09-en-install-eclipse-europa.md","2008-01-26-mylyn",{"id":36,"data":38,"body":43,"filePath":44,"digest":45,"rendered":46,"legacyId":57},{"title":39,"date":40,"categories":41,"tags":42,"lang":17},"Mylyn makes Eclipse run out of memory",["Date","2008-01-26T00:00:00.000Z"],[17],[20],"This week I have discovered that the Mylyn project is included in most Eclipse bundles. But this plugin makes Eclipse starve for memory... By the menu Window->Preferences->Show heap status, I have discovered the Acceleo bundle starting with a need of 180 MB with nothing opened. With a common Eclipse (PyDev, WTP), my Eclipse has a heap status of 35 MB. With my project of creating a Plone 2.5 generator with Acceleo, I want to have a UML editor (Papyrus or Topcased?) and Acceleo running perfectly.\n\nYou can find some pages about this memory problem with Mylyn: http://www.ibm.com/developerworks/java/library/j-mylyn2/\n\nSo start your Eclipse, take a coffee, and then go to Help->Software and Updates->Manage Configuration. Deactivate all Mylyn integration plugins to be able to deactivate the Mylyn plugin itself. Then restart your Eclipse, it's OK.\n\nWith the Acceleo bundle, I have deactivated Subversive and Mylyn, I'm now around 40 MB on the heap status. Now I'm ready to make UML diagrams.","src/content/posts/2008-01-26-mylyn.md","93bc22ed0f47d10d",{"html":47,"metadata":48},"\u003Cp>This week I have discovered that the Mylyn project is included in most Eclipse bundles. But this plugin makes Eclipse starve for memory… By the menu Window->Preferences->Show heap status, I have discovered the Acceleo bundle starting with a need of 180 MB with nothing opened. With a common Eclipse (PyDev, WTP), my Eclipse has a heap status of 35 MB. With my project of creating a Plone 2.5 generator with Acceleo, I want to have a UML editor (Papyrus or Topcased?) and Acceleo running perfectly.\u003C/p>\n\u003Cp>You can find some pages about this memory problem with Mylyn: \u003Ca href=\"http://www.ibm.com/developerworks/java/library/j-mylyn2/\">http://www.ibm.com/developerworks/java/library/j-mylyn2/\u003C/a>\u003C/p>\n\u003Cp>So start your Eclipse, take a coffee, and then go to Help->Software and Updates->Manage Configuration. Deactivate all Mylyn integration plugins to be able to deactivate the Mylyn plugin itself. Then restart your Eclipse, it’s OK.\u003C/p>\n\u003Cp>With the Acceleo bundle, I have deactivated Subversive and Mylyn, I’m now around 40 MB on the heap status. Now I’m ready to make UML diagrams.\u003C/p>",{"headings":49,"localImagePaths":50,"remoteImagePaths":51,"frontmatter":52,"imagePaths":56},[],[],[],{"title":39,"categories":53,"tags":54,"date":55},[17],[20],["Date","2008-01-26T00:00:00.000Z"],[],"2008-01-26-mylyn.md","2008-01-26-eclipse-template",{"id":58,"data":60,"body":65,"filePath":66,"digest":67,"rendered":68,"legacyId":79},{"title":61,"date":62,"categories":63,"tags":64,"lang":17},"A first shot at Eclipse XML templates",["Date","2008-01-26T00:00:00.000Z"],[17],[20],"Most text types in Eclipse can be templated through the Window->Preferences menu. Those templates can next be imported/exported. I have made a first shot for my work on Plone, because next week I have a lot of profiles to write for some old-style products. [My first shot is available here under GNU GPL license](http://jm406.free.fr/downloads/eclipse-xml-template-plone-profiles-01.tar.bz2).\n\nThose xml templates are for:\n\ncssregistry.xml\nfactorytool.xml\njsregistry.xml\nskins\ntypes/MyTypes.xml\ntypes.xml\nworkflows.xml\nThe rest will come later:\n\nworkflows/MyWF/definitions.xml\ntoolset\nrolemap\nproperties\npropertiestool\nmemberdata_properties\nmailhost\nimport_step\nexport_step\ncontrol_panel\ncontenttyperegistry\ncatalog\naction_icons\nactions\nAs I have said, this one is a first shot, done in one hour, just to test, so now it needs to be improved.","src/content/posts/2008-01-26-eclipse-template.md","ba1797bc3065d0bd",{"html":69,"metadata":70},"\u003Cp>Most text types in Eclipse can be templated through the Window->Preferences menu. Those templates can next be imported/exported. I have made a first shot for my work on Plone, because next week I have a lot of profiles to write for some old-style products. \u003Ca href=\"http://jm406.free.fr/downloads/eclipse-xml-template-plone-profiles-01.tar.bz2\">My first shot is available here under GNU GPL license\u003C/a>.\u003C/p>\n\u003Cp>Those xml templates are for:\u003C/p>\n\u003Cp>cssregistry.xml\nfactorytool.xml\njsregistry.xml\nskins\ntypes/MyTypes.xml\ntypes.xml\nworkflows.xml\nThe rest will come later:\u003C/p>\n\u003Cp>workflows/MyWF/definitions.xml\ntoolset\nrolemap\nproperties\npropertiestool\nmemberdata_properties\nmailhost\nimport_step\nexport_step\ncontrol_panel\ncontenttyperegistry\ncatalog\naction_icons\nactions\nAs I have said, this one is a first shot, done in one hour, just to test, so now it needs to be improved.\u003C/p>",{"headings":71,"localImagePaths":72,"remoteImagePaths":73,"frontmatter":74,"imagePaths":78},[],[],[],{"title":61,"categories":75,"tags":76,"date":77},[17],[20],["Date","2008-01-26T00:00:00.000Z"],[],"2008-01-26-eclipse-template.md","2008-02-10-en-eclipse-plone",{"id":80,"data":82,"body":88,"filePath":89,"digest":90,"rendered":91,"legacyId":102},{"title":83,"date":84,"categories":85,"tags":86,"lang":17},"Plone3 & Acceleo, the first step",["Date","2008-02-10T00:00:00.000Z"],[17],[20,87],"plone","I have worked for a few hours on a simple Plone 2.5 code generator with Acceleo. It is available on the Acceleo SVN:\n\nsvn checkout svn://svn.forge.objectweb.org/svnroot/acceleo/trunk/modules/community/uml21/zope/plone/25/org.acceleo.module.pim.uml21.plone25/trunk\n\nThis code generator is not finished, but the approach is good enough to start the Plone 3 one. I would like here to explain the purpose of the Acceleo Generator for Plone3 i want to make.I will first explain the problems i have with ArchgenXML.\n\nWhat i don’t like in AGX:\n\nThe license in each source file (I prefer just a license.txt file)\nThe billion tagged values (I have lost hours here)\nThe generated code itself doesn't look like the code I would have produced.\nThe command line\nArgoUML\nAll the hacks done every where to make the code compatible with two versions of Plone\nYou can't modify a line of generated code without losing it if you regenerate your code\nWhat I like in AGX:\n\nThe way you use UML (copy the model, and then create a simple class diagram, it's done)\nThe i18nized schema generated with po files\nThe generated tests\nIt works on all well known OS (linux, macos, windows)\nLots of documentation\nThe user code slots are well thought out.\nFor sure I want to keep all these good points for the project. So here is an overview of what I want:\n\nEasy to install and to use\nRunning on most OS known\nCode template easy to customize (making multiple branches of my own templates)\nDo not generate 100% of the code by working hours in your UML diagrams\nBe able to take an existing UML and generate only what you want\nAnother point: generate something only if it saves your time. The best example I have is tagged values from AGX, like Searchable = 1. One tagged value for one line of code! A first piece of advice from Cédric Brun (Obeo) is to not fall into the modelization of the code itself. For example, creating a UML component to generate a Zope component (BrowserView, adapter, etc.). In that case you will lose a lot of time creating your UML diagram, and be obliged to add stereotypes (adapter, etc.). So to follow this advice, I have thought about the idea of using Component diagrams from UML, and I finally don't want to use it, because for me a UML component is not equal to a Zope component. A UML component can be more seen as an egg. I need to think a bit more about that point, but that could be a great aspect to Zope code generation.\n\nWould we need to 'model' workflows and generate them according to a state diagram? Here the point is a bit more complex. In fact, you know that you need to create them to explain to your customers the need to specify workflows by UML. But the permission system in Zope is specific to it, and the state diagram is not supposed to support this (in AGX we use tagged values once more time). And since we use GenericSetup to specify workflows now, the time saved by creating the state diagram for your workflow is negative. So I think we will just generate the states, but not the associated permissions, which are often explained with the diagram in documentation. But I would like to generate the tests associated with workflows. There was a good conference at Naples on that point.\n\nNext, do we force the use of stereotypes to generate stuff or do we do as with AGX, and so force the use of 'stub' stereotype to indicate to the generator that this class is not a content type to generate. I personally prefer the first option. In that way you can take an existing UML diagram, load the Plone 3 profile, and say this package is an egg, this class is an ATContentType.\n\nWell, a good demo package to create is the case from Martin Aspeli's book.\n\nNext time I will publish the UML from which I want Martin's code to be generated.","src/content/posts/2008-02-10-en-eclipse-plone.md","51974f0c2df7ae0a",{"html":92,"metadata":93},"\u003Cp>I have worked for a few hours on a simple Plone 2.5 code generator with Acceleo. It is available on the Acceleo SVN:\u003C/p>\n\u003Cp>svn checkout svn://svn.forge.objectweb.org/svnroot/acceleo/trunk/modules/community/uml21/zope/plone/25/org.acceleo.module.pim.uml21.plone25/trunk\u003C/p>\n\u003Cp>This code generator is not finished, but the approach is good enough to start the Plone 3 one. I would like here to explain the purpose of the Acceleo Generator for Plone3 i want to make.I will first explain the problems i have with ArchgenXML.\u003C/p>\n\u003Cp>What i don’t like in AGX:\u003C/p>\n\u003Cp>The license in each source file (I prefer just a license.txt file)\nThe billion tagged values (I have lost hours here)\nThe generated code itself doesn’t look like the code I would have produced.\nThe command line\nArgoUML\nAll the hacks done every where to make the code compatible with two versions of Plone\nYou can’t modify a line of generated code without losing it if you regenerate your code\nWhat I like in AGX:\u003C/p>\n\u003Cp>The way you use UML (copy the model, and then create a simple class diagram, it’s done)\nThe i18nized schema generated with po files\nThe generated tests\nIt works on all well known OS (linux, macos, windows)\nLots of documentation\nThe user code slots are well thought out.\nFor sure I want to keep all these good points for the project. So here is an overview of what I want:\u003C/p>\n\u003Cp>Easy to install and to use\nRunning on most OS known\nCode template easy to customize (making multiple branches of my own templates)\nDo not generate 100% of the code by working hours in your UML diagrams\nBe able to take an existing UML and generate only what you want\nAnother point: generate something only if it saves your time. The best example I have is tagged values from AGX, like Searchable = 1. One tagged value for one line of code! A first piece of advice from Cédric Brun (Obeo) is to not fall into the modelization of the code itself. For example, creating a UML component to generate a Zope component (BrowserView, adapter, etc.). In that case you will lose a lot of time creating your UML diagram, and be obliged to add stereotypes (adapter, etc.). So to follow this advice, I have thought about the idea of using Component diagrams from UML, and I finally don’t want to use it, because for me a UML component is not equal to a Zope component. A UML component can be more seen as an egg. I need to think a bit more about that point, but that could be a great aspect to Zope code generation.\u003C/p>\n\u003Cp>Would we need to ‘model’ workflows and generate them according to a state diagram? Here the point is a bit more complex. In fact, you know that you need to create them to explain to your customers the need to specify workflows by UML. But the permission system in Zope is specific to it, and the state diagram is not supposed to support this (in AGX we use tagged values once more time). And since we use GenericSetup to specify workflows now, the time saved by creating the state diagram for your workflow is negative. So I think we will just generate the states, but not the associated permissions, which are often explained with the diagram in documentation. But I would like to generate the tests associated with workflows. There was a good conference at Naples on that point.\u003C/p>\n\u003Cp>Next, do we force the use of stereotypes to generate stuff or do we do as with AGX, and so force the use of ‘stub’ stereotype to indicate to the generator that this class is not a content type to generate. I personally prefer the first option. In that way you can take an existing UML diagram, load the Plone 3 profile, and say this package is an egg, this class is an ATContentType.\u003C/p>\n\u003Cp>Well, a good demo package to create is the case from Martin Aspeli’s book.\u003C/p>\n\u003Cp>Next time I will publish the UML from which I want Martin’s code to be generated.\u003C/p>",{"headings":94,"localImagePaths":95,"remoteImagePaths":96,"frontmatter":97,"imagePaths":101},[],[],[],{"title":83,"categories":98,"tags":99,"date":100},[17],[20,87],["Date","2008-02-10T00:00:00.000Z"],[],"2008-02-10-en-eclipse-plone.md","2008-02-18-en-mda",{"id":103,"data":105,"body":110,"filePath":111,"digest":112,"rendered":113,"legacyId":124},{"title":106,"date":107,"categories":108,"tags":109,"lang":17},"MDA for alfresco, Meta-Model for ECM",["Date","2008-02-18T00:00:00.000Z"],[17],[20],"Today I attended a conference about Alfresco and MDA by BlueXML. What I have discovered is a set of software tools built with Eclipse and Acceleo to generate an Alfresco project (configure the portal, create content types, etc.). I have been really interested in the fact that they have created a new meta-model derived from UML to model an ECM project and also a GUI modeler associated with this meta-model.\n\nThat means the meta-model can also be used for Plone 3. For example, configuring Plone by creating user groups, permissions, workflows, etc., would be features available if we use it. But first, I need to test it to validate the usability of this meta-model and of the modeler. All is available at the BlueXML home site.","src/content/posts/2008-02-18-en-mda.md","9bb1069b9e8eb7c6",{"html":114,"metadata":115},"\u003Cp>Today I attended a conference about Alfresco and MDA by BlueXML. What I have discovered is a set of software tools built with Eclipse and Acceleo to generate an Alfresco project (configure the portal, create content types, etc.). I have been really interested in the fact that they have created a new meta-model derived from UML to model an ECM project and also a GUI modeler associated with this meta-model.\u003C/p>\n\u003Cp>That means the meta-model can also be used for Plone 3. For example, configuring Plone by creating user groups, permissions, workflows, etc., would be features available if we use it. But first, I need to test it to validate the usability of this meta-model and of the modeler. All is available at the BlueXML home site.\u003C/p>",{"headings":116,"localImagePaths":117,"remoteImagePaths":118,"frontmatter":119,"imagePaths":123},[],[],[],{"title":106,"categories":120,"tags":121,"date":122},[17],[20],["Date","2008-02-18T00:00:00.000Z"],[],"2008-02-18-en-mda.md","2008-04-13-browser-view",{"id":125,"data":127,"body":132,"filePath":133,"digest":134,"rendered":135,"legacyId":146},{"title":128,"date":129,"categories":130,"tags":131,"lang":17},"My point of BrowserView",["Date","2008-04-13T00:00:00.000Z"],[17],[87],"Since Plone 2.5 has been released, there is a good way to separate logic and presentation from templates, but the use of BrowserView is not used in the same way by developers. I'm trying here to explain my point of view about that component.\n\nA very good presentation of BrowserView is already done by Optilude.\n\nAccording to my point of view and the MVC pattern, a BrowserView is just a controller. Its role is to prepare data to be displayed, or to trigger a process. Most of the time I'm querying the portal_catalog, redirecting the user, adding status messages, etc.\n\nI like the way portlets are done in Plone 2.5. For me it's the best example of how to use BrowserView.\n\nThe other use case of BrowserView is to render the attached template and insert a \"view\" instance in it. This is a kind of \"implicit\" behavior that I hate in Zope 2. So you can call it directly by the URL. I don't understand that choice, but Plone 3 uses it in that way. And that does not let you reuse the logic code inside the BrowserView in another template. Controllers are known to be reusable throughout the entire software. So please, use the BrowserView component like a controller.","src/content/posts/2008-04-13-browser-view.md","da6e79b0d547c153",{"html":136,"metadata":137},"\u003Cp>Since Plone 2.5 has been released, there is a good way to separate logic and presentation from templates, but the use of BrowserView is not used in the same way by developers. I’m trying here to explain my point of view about that component.\u003C/p>\n\u003Cp>A very good presentation of BrowserView is already done by Optilude.\u003C/p>\n\u003Cp>According to my point of view and the MVC pattern, a BrowserView is just a controller. Its role is to prepare data to be displayed, or to trigger a process. Most of the time I’m querying the portal_catalog, redirecting the user, adding status messages, etc.\u003C/p>\n\u003Cp>I like the way portlets are done in Plone 2.5. For me it’s the best example of how to use BrowserView.\u003C/p>\n\u003Cp>The other use case of BrowserView is to render the attached template and insert a “view” instance in it. This is a kind of “implicit” behavior that I hate in Zope 2. So you can call it directly by the URL. I don’t understand that choice, but Plone 3 uses it in that way. And that does not let you reuse the logic code inside the BrowserView in another template. Controllers are known to be reusable throughout the entire software. So please, use the BrowserView component like a controller.\u003C/p>",{"headings":138,"localImagePaths":139,"remoteImagePaths":140,"frontmatter":141,"imagePaths":145},[],[],[],{"title":128,"categories":142,"tags":143,"date":144},[17],[87],["Date","2008-04-13T00:00:00.000Z"],[],"2008-04-13-browser-view.md","2008-04-13-en-profile",{"id":147,"data":149,"body":154,"filePath":155,"digest":156,"rendered":157,"legacyId":168},{"title":150,"date":151,"categories":152,"tags":153,"lang":17},"Look at my profile",["Date","2008-04-13T00:00:00.000Z"],[17],[87],"First of all, I would like to thank the people who wrote GenericSetup. I'm writing this post because I think profiles are not being used well. They are used like Extensions/Install.py scripts. So what is a profile, and how should it be used?\n\nA profile is about the configuration of portals (portal_xxx inside the ZMI). In that way, I have started by asking myself \"what does install/uninstall mean in Plone?\" Some answers:\n\n\"It's about the Extensions/install.py scripts.\"\n\"Like on your computer, you install a software or a library.\"\nWell, there is no sense to the word \"install\" in the world of Plone. We are talking about the configuration of tools. So CMFPlone/profiles/defaults contains a Plone default configuration. Right?\n\nIn that way, extending the default Plone configuration means changing it a bit, adding some directory views in portal_skins, for example.\n\nWhat happens if you are \"installing\" 20 products to your configuration? Here it is! You have lost the configuration of your Plone project and will not be able to understand why this new product you are trying to install breaks your website.\n\nSeeing this, I have proposed to add one single profile per project. In that way you control your entire Plone, and if you have a problem, you just have to apply this profile. But that also means you have to write it. Here is how I proceed:\n\n* Install every product you need\n* Export all steps\n* Adding a new product/egg specially for your project\n* Put the results of the exports in it\n* Read it\n* Add all constraints in it. For example, the order of layers inside skins.xml\n\nThis is done, you got it! There is no duplication of files, but integration of products inside Plone configuration (my work). Writing XML is boring? Write them faster by using my Eclipse templates ;)\n\nThe next point is about setup handlers. I hate products that add setup handlers just to say \"hey, I know how to add a step.\" I always ask \"what is a step for you?\" So steps are not the way to call a Python script. If you are tempted to add a step, just use Extension/install.py to put your script. Adding a step makes sense only if you are adding a tool, and you want that tool to be configurable. So you don't add setuphandler.py but you write import/export.py for your tool, and then you add the step with import_step.xml.\nAnother problem is that the configuration of your Plone project can be different for a production server and a development local server. For example, the mailhost.xml file can be different. In that way, you can extend your profile with just a smaller profile that reconfigures what you need.\n\nThis is why I'm laughing when I hear \"uninstall profile.\"\n\nFinally, I don't understand why the portal_quickinstaller is now \"aware\" of extension profiles. That doesn't help to understand profiles. People will continue to write install/uninstall profiles. If anyone knows why, I'm ready to discuss it.","src/content/posts/2008-04-13-en-profile.md","d51b183e2246c269",{"html":158,"metadata":159},"\u003Cp>First of all, I would like to thank the people who wrote GenericSetup. I’m writing this post because I think profiles are not being used well. They are used like Extensions/Install.py scripts. So what is a profile, and how should it be used?\u003C/p>\n\u003Cp>A profile is about the configuration of portals (portal_xxx inside the ZMI). In that way, I have started by asking myself “what does install/uninstall mean in Plone?” Some answers:\u003C/p>\n\u003Cp>“It’s about the Extensions/install.py scripts.”\n“Like on your computer, you install a software or a library.”\nWell, there is no sense to the word “install” in the world of Plone. We are talking about the configuration of tools. So CMFPlone/profiles/defaults contains a Plone default configuration. Right?\u003C/p>\n\u003Cp>In that way, extending the default Plone configuration means changing it a bit, adding some directory views in portal_skins, for example.\u003C/p>\n\u003Cp>What happens if you are “installing” 20 products to your configuration? Here it is! You have lost the configuration of your Plone project and will not be able to understand why this new product you are trying to install breaks your website.\u003C/p>\n\u003Cp>Seeing this, I have proposed to add one single profile per project. In that way you control your entire Plone, and if you have a problem, you just have to apply this profile. But that also means you have to write it. Here is how I proceed:\u003C/p>\n\u003Cul>\n\u003Cli>Install every product you need\u003C/li>\n\u003Cli>Export all steps\u003C/li>\n\u003Cli>Adding a new product/egg specially for your project\u003C/li>\n\u003Cli>Put the results of the exports in it\u003C/li>\n\u003Cli>Read it\u003C/li>\n\u003Cli>Add all constraints in it. For example, the order of layers inside skins.xml\u003C/li>\n\u003C/ul>\n\u003Cp>This is done, you got it! There is no duplication of files, but integration of products inside Plone configuration (my work). Writing XML is boring? Write them faster by using my Eclipse templates ;)\u003C/p>\n\u003Cp>The next point is about setup handlers. I hate products that add setup handlers just to say “hey, I know how to add a step.” I always ask “what is a step for you?” So steps are not the way to call a Python script. If you are tempted to add a step, just use Extension/install.py to put your script. Adding a step makes sense only if you are adding a tool, and you want that tool to be configurable. So you don’t add setuphandler.py but you write import/export.py for your tool, and then you add the step with import_step.xml.\nAnother problem is that the configuration of your Plone project can be different for a production server and a development local server. For example, the mailhost.xml file can be different. In that way, you can extend your profile with just a smaller profile that reconfigures what you need.\u003C/p>\n\u003Cp>This is why I’m laughing when I hear “uninstall profile.”\u003C/p>\n\u003Cp>Finally, I don’t understand why the portal_quickinstaller is now “aware” of extension profiles. That doesn’t help to understand profiles. People will continue to write install/uninstall profiles. If anyone knows why, I’m ready to discuss it.\u003C/p>",{"headings":160,"localImagePaths":161,"remoteImagePaths":162,"frontmatter":163,"imagePaths":167},[],[],[],{"title":150,"categories":164,"tags":165,"date":166},[17],[87],["Date","2008-04-13T00:00:00.000Z"],[],"2008-04-13-en-profile.md","2008-10-13-en-profiling",{"id":169,"data":171,"body":176,"filePath":177,"digest":178,"rendered":179,"legacyId":190},{"title":172,"date":173,"categories":174,"tags":175,"lang":17},"JMeter, improving performance of a Plone web site",["Date","2008-10-13T00:00:00.000Z"],[17],[87],"Last week I made a rush to improve the performance of a Plone-based website. For performance testing, I have used JMeter.\n\nJMeter is really nice to use. Just launch its proxy, plug your browser into it, and do your test. Next, you save it as XML and you can edit the test. So you can log in (it supports cookies), you can create content (with a once logic controller), consult content, and stress your server.\n\nWhat I have learned:\n\n* Do not use `brains` or any object in templates, or you will not be able to cache your logic code in ramcache. Use dicts that contain all strings ready to be displayed in the templates.\n* How to use the ram cache\n* I can store acl_users in ramcache, and I have been surprised to see the difference. On 5 tabs hitted, I have hit the cache 278 times …\n* Archetypes is damnably slow (about one second to set some attributes of an object in a btree and reindexIt)\n* CMFPlone.utils.createObjectByType does a reindexObject\n* Do not add any index to the portal_catalog, use the binding done by archetype_tool to be able to use other indexes. I'm adding about one catalog tool per custom content type.\n* A query on the portal_catalog can take one second if you have, for example, a list of 100 paths (query['path'] = ['/first/path', '/second/path']) and more than 100,000 entries.\n\nI have learned many other things during the last week, but now I'm using stress tests during development.","src/content/posts/2008-10-13-en-profiling.md","cdb7408a2a1bd620",{"html":180,"metadata":181},"\u003Cp>Last week I made a rush to improve the performance of a Plone-based website. For performance testing, I have used JMeter.\u003C/p>\n\u003Cp>JMeter is really nice to use. Just launch its proxy, plug your browser into it, and do your test. Next, you save it as XML and you can edit the test. So you can log in (it supports cookies), you can create content (with a once logic controller), consult content, and stress your server.\u003C/p>\n\u003Cp>What I have learned:\u003C/p>\n\u003Cul>\n\u003Cli>Do not use \u003Ccode>brains\u003C/code> or any object in templates, or you will not be able to cache your logic code in ramcache. Use dicts that contain all strings ready to be displayed in the templates.\u003C/li>\n\u003Cli>How to use the ram cache\u003C/li>\n\u003Cli>I can store acl_users in ramcache, and I have been surprised to see the difference. On 5 tabs hitted, I have hit the cache 278 times …\u003C/li>\n\u003Cli>Archetypes is damnably slow (about one second to set some attributes of an object in a btree and reindexIt)\u003C/li>\n\u003Cli>CMFPlone.utils.createObjectByType does a reindexObject\u003C/li>\n\u003Cli>Do not add any index to the portal_catalog, use the binding done by archetype_tool to be able to use other indexes. I’m adding about one catalog tool per custom content type.\u003C/li>\n\u003Cli>A query on the portal_catalog can take one second if you have, for example, a list of 100 paths (query[‘path’] = [‘/first/path’, ‘/second/path’]) and more than 100,000 entries.\u003C/li>\n\u003C/ul>\n\u003Cp>I have learned many other things during the last week, but now I’m using stress tests during development.\u003C/p>",{"headings":182,"localImagePaths":183,"remoteImagePaths":184,"frontmatter":185,"imagePaths":189},[],[],[],{"title":172,"categories":186,"tags":187,"date":188},[17],[87],["Date","2008-10-13T00:00:00.000Z"],[],"2008-10-13-en-profiling.md","2008-01-26-cp",{"id":191,"data":193,"body":198,"filePath":199,"digest":200,"rendered":201,"legacyId":212},{"title":194,"date":195,"categories":196,"tags":197,"lang":17},"Command line, copy faster",["Date","2008-01-26T00:00:00.000Z"],[17],[19],"When you use the command line, and you know how to use it, you can be a lot more powerful in making today's tasks than with a common window manager. For example, when you want to copy/paste a folder from one path to another, the command line is really faster.\n\n    $ cp myfolder /path/to/another\n\ncp command is really simple to learn and to use, compared to the rsync command, but rsync is a lot faster. So I want to show you a tip to fake cp using rsync. You just have to make an alias. On my laptop I'm using OpenSUSE 10.3, so I just edit the file '.alias' in my home folder to put this in it:\n\n    alias cp=”rsync -az”\n\nNow I'm continuing to use cp, but faster than you ;)","src/content/posts/2008-01-26-cp.md","7d4daa44a9968c71",{"html":202,"metadata":203},"\u003Cp>When you use the command line, and you know how to use it, you can be a lot more powerful in making today’s tasks than with a common window manager. For example, when you want to copy/paste a folder from one path to another, the command line is really faster.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>$ cp myfolder /path/to/another\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>cp command is really simple to learn and to use, compared to the rsync command, but rsync is a lot faster. So I want to show you a tip to fake cp using rsync. You just have to make an alias. On my laptop I’m using OpenSUSE 10.3, so I just edit the file ‘.alias’ in my home folder to put this in it:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>alias cp=”rsync -az”\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now I’m continuing to use cp, but faster than you ;)\u003C/p>",{"headings":204,"localImagePaths":205,"remoteImagePaths":206,"frontmatter":207,"imagePaths":211},[],[],[],{"title":194,"categories":208,"tags":209,"date":210},[17],[19],["Date","2008-01-26T00:00:00.000Z"],[],"2008-01-26-cp.md","2008-03-07-archetypes",{"id":213,"data":215,"body":220,"filePath":221,"digest":222,"rendered":223,"legacyId":234},{"title":216,"date":217,"categories":218,"tags":219,"lang":17},"ReferenceEngine and poor Archetypes",["Date","2008-03-07T00:00:00.000Z"],[17],[87],"Today, got a bug on custom content type. “I can’t copy your content type, all the references are lost”\n\nWell, i assume i don’t know how copy / paste works in plone. I first reproduce the bug without a pb:\n\nCreate two documents : a and b. set related document from b to a. means b has related document a. the field relatesTo is a ReferenceField.\nMake a copy of b, said c.\nOh !!! c has no related document.\nThe bug is reproduce: ReferenceField doesn t support copy . Now i know that, i m starting to read all i found about References in Archetypes, and find this in Referenceable.py:\n\n```python\n####\n## In the case of:\n## - a copy:\n##   * we want to lose refs on the new object\n##   * we want to keep refs on the orig object\n## - a cut/paste\n##   * we want to keep refs\n## - a delete:\n##   * to lose refs\n####\n```\n\nSo this is not a bug but a feature ? Don’t be disapointed, Plone is build to be customized. CopySupport comes from zope, ok interesting code out there. I m finally try to MonkeyPath the methode manage_afterAdd and succedd in keep the reference:\n\n```python\n## OFS Hooks\ndef manage_afterAdd(self, item, container):\n    \"\"\"\n    Get a UID\n    (Called when the object is created or moved.)\n    \"\"\"\n    print \"Referenceable manage after add\"\n    isCopy = getattr(item, '_v_is_cp', None)\n    if isCopy:\n        setattr(self, config.UUID_ATTR, None)\n        self._delReferenceAnnotations()\n```\n\nEvery things ok ? Well no, in fact, i m trying to validate by retry the scenario above. c document has the related document to a. good, but i next delete c and that action delete the b relation with a (b doesn t have relation with a anymore). And Archetypes team writes ## * we want to lose refs on the new object ??? You call this a feature, i call that an error of referenceengine design !\n\nThank you Archeytpes !\n\nIf anyone know how to fix this i m ready to listen :)","src/content/posts/2008-03-07-archetypes.md","b6bc56dc346d73b0",{"html":224,"metadata":225},"\u003Cp>Today, got a bug on custom content type. “I can’t copy your content type, all the references are lost”\u003C/p>\n\u003Cp>Well, i assume i don’t know how copy / paste works in plone. I first reproduce the bug without a pb:\u003C/p>\n\u003Cp>Create two documents : a and b. set related document from b to a. means b has related document a. the field relatesTo is a ReferenceField.\nMake a copy of b, said c.\nOh !!! c has no related document.\nThe bug is reproduce: ReferenceField doesn t support copy . Now i know that, i m starting to read all i found about References in Archetypes, and find this in Referenceable.py:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">####\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">## In the case of:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">## - a copy:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">##   * we want to lose refs on the new object\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">##   * we want to keep refs on the orig object\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">## - a cut/paste\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">##   * we want to keep refs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">## - a delete:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">##   * to lose refs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">####\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>So this is not a bug but a feature ? Don’t be disapointed, Plone is build to be customized. CopySupport comes from zope, ok interesting code out there. I m finally try to MonkeyPath the methode manage_afterAdd and succedd in keep the reference:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">## OFS Hooks\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">def\u003C/span>\u003Cspan style=\"color:#A6E22E\"> manage_afterAdd\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">item\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">container\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"\"\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    Get a UID\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    (Called when the object is created or moved.)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"\"\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">    print\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"Referenceable manage after add\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    isCopy \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#66D9EF\"> getattr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(item, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'_v_is_cp'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#AE81FF\">None\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> isCopy:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">        setattr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, config.\u003C/span>\u003Cspan style=\"color:#AE81FF\">UUID_ATTR\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#AE81FF\">None\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">        self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">._delReferenceAnnotations()\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Every things ok ? Well no, in fact, i m trying to validate by retry the scenario above. c document has the related document to a. good, but i next delete c and that action delete the b relation with a (b doesn t have relation with a anymore). And Archetypes team writes ## * we want to lose refs on the new object ??? You call this a feature, i call that an error of referenceengine design !\u003C/p>\n\u003Cp>Thank you Archeytpes !\u003C/p>\n\u003Cp>If anyone know how to fix this i m ready to listen :)\u003C/p>",{"headings":226,"localImagePaths":227,"remoteImagePaths":228,"frontmatter":229,"imagePaths":233},[],[],[],{"title":216,"categories":230,"tags":231,"date":232},[17],[87],["Date","2008-03-07T00:00:00.000Z"],[],"2008-03-07-archetypes.md","2008-12-14-catalog",{"id":235,"data":237,"body":242,"filePath":243,"digest":244,"rendered":245,"legacyId":256},{"title":238,"date":239,"categories":240,"tags":241,"lang":17},"Archetype_tool, QueueCatalog, be careful with indexing with Plone's portal_catalog!",["Date","2008-12-14T00:00:00.000Z"],[17],[87],"The portal_catalog in Plone is the index of all objects. It means the portal_catalog stores some data (indexes+metadata) per object in the website. So when the number of entries in the site grows up, the portal_catalog size follows. The post by Tarek [Indexing](http://tarekziade.wordpress.com/2008/01/20/snow-sprint-report-1-indexing/) explains it well:\n\n    50% of the size of the ZODB was the catalog (I am talking about gigas here)\n\nAnd that is the case for some website I'm working on.\n\nIf you are storing about 10 indexes and 10 metadata items in it, the size of a brain with indexes for one object is not so far from the real object (brains are persistent objects stored!). So if you are about to add an index, or a metadata, think about it twice before doing so.\n\nBut as me, you want to be able to index new data from your new content type to search for objects that match your criteria. For example, you have a type \"Contact\" with a field \"EMail\". Many developers will just add an index getEmail in the portal_catalog. Please don't do it! Just add a new catalog tool inherited from CMFPlone CatalogTool, and change the init index method (Plone 2.5 doesn't support well the GenericSetup way of managing catalog indexes and metadata). Next, add a path index that is needed by the Archetype CatalogMultiplexing class to reindexObject, and register this object in the archetype_tool so it will be automatically synchronized with the new catalog.\n\nYou can query that new catalog like the portal_catalog, and  if you don’t want to wake up the object and get the metadata from the portal_catalog, just do a query to the portal_catalog by using the path index. Recently i have totaly remove a content type from the portal_catalog. That has been possible because this content type was not displayed throw classic plone folder_content view. As results 30 000 brains has been removed from the portal_catalog.\n\nThink about why you will add an index in portal_catalog. Every object in your web site has that field or are supposed to be able to have it ? if you answer yes, you can. A good example is a rating information, If you want to be able to sort results on it, you must use the portal_catalog.\n\nAn other things very important about indexing with Plone is about full text indexation and is for performance purpose. As you will find in mailing list, lot’s of people are complaining about ZCTextIndex. They are slow ! I have done a bench this week with PloneQueueCatalog and factory hack. I have delayed every ZCTextIndex, and put a pyston timed decorator on indexObject, reindexObject and unindexObject of CatalogMultiplexin class. The results was:\n\n* 0.039 seconds with ZCTextIndexes and 0.025 seconds with ZCTextIndexes delayed on the last indexObject call.\n* 0.5sec for not interesting index+reindex+unindex in portal_factory without factoryhack, and 0.11sec with the hack. This one has not been improved by QueueCatalog.\n\nThe portal_catalog has 130,000 objects indexed, and the Data.fs is about 1.3 GB. This benchmark has been done on my laptop (Intel Core 2 Duo + 2 GB RAM).\n\nSo now I'm using those products in production.\n\nTESTS PURPOSE: I would like to use a relational database to replace the portal_catalog. Now PostgreSQL supports full-text indexing, and it will be pretty easy to return basic objects that will use results from SQL queries as attributes. With a good JMeter test plan to see results. If anyone has already done that kind of test, I'm really interested in this, please tell me.","src/content/posts/2008-12-14-catalog.md","927162284014fed3",{"html":246,"metadata":247},"\u003Cp>The portal_catalog in Plone is the index of all objects. It means the portal_catalog stores some data (indexes+metadata) per object in the website. So when the number of entries in the site grows up, the portal_catalog size follows. The post by Tarek \u003Ca href=\"http://tarekziade.wordpress.com/2008/01/20/snow-sprint-report-1-indexing/\">Indexing\u003C/a> explains it well:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>50% of the size of the ZODB was the catalog (I am talking about gigas here)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>And that is the case for some website I’m working on.\u003C/p>\n\u003Cp>If you are storing about 10 indexes and 10 metadata items in it, the size of a brain with indexes for one object is not so far from the real object (brains are persistent objects stored!). So if you are about to add an index, or a metadata, think about it twice before doing so.\u003C/p>\n\u003Cp>But as me, you want to be able to index new data from your new content type to search for objects that match your criteria. For example, you have a type “Contact” with a field “EMail”. Many developers will just add an index getEmail in the portal_catalog. Please don’t do it! Just add a new catalog tool inherited from CMFPlone CatalogTool, and change the init index method (Plone 2.5 doesn’t support well the GenericSetup way of managing catalog indexes and metadata). Next, add a path index that is needed by the Archetype CatalogMultiplexing class to reindexObject, and register this object in the archetype_tool so it will be automatically synchronized with the new catalog.\u003C/p>\n\u003Cp>You can query that new catalog like the portal_catalog, and  if you don’t want to wake up the object and get the metadata from the portal_catalog, just do a query to the portal_catalog by using the path index. Recently i have totaly remove a content type from the portal_catalog. That has been possible because this content type was not displayed throw classic plone folder_content view. As results 30 000 brains has been removed from the portal_catalog.\u003C/p>\n\u003Cp>Think about why you will add an index in portal_catalog. Every object in your web site has that field or are supposed to be able to have it ? if you answer yes, you can. A good example is a rating information, If you want to be able to sort results on it, you must use the portal_catalog.\u003C/p>\n\u003Cp>An other things very important about indexing with Plone is about full text indexation and is for performance purpose. As you will find in mailing list, lot’s of people are complaining about ZCTextIndex. They are slow ! I have done a bench this week with PloneQueueCatalog and factory hack. I have delayed every ZCTextIndex, and put a pyston timed decorator on indexObject, reindexObject and unindexObject of CatalogMultiplexin class. The results was:\u003C/p>\n\u003Cul>\n\u003Cli>0.039 seconds with ZCTextIndexes and 0.025 seconds with ZCTextIndexes delayed on the last indexObject call.\u003C/li>\n\u003Cli>0.5sec for not interesting index+reindex+unindex in portal_factory without factoryhack, and 0.11sec with the hack. This one has not been improved by QueueCatalog.\u003C/li>\n\u003C/ul>\n\u003Cp>The portal_catalog has 130,000 objects indexed, and the Data.fs is about 1.3 GB. This benchmark has been done on my laptop (Intel Core 2 Duo + 2 GB RAM).\u003C/p>\n\u003Cp>So now I’m using those products in production.\u003C/p>\n\u003Cp>TESTS PURPOSE: I would like to use a relational database to replace the portal_catalog. Now PostgreSQL supports full-text indexing, and it will be pretty easy to return basic objects that will use results from SQL queries as attributes. With a good JMeter test plan to see results. If anyone has already done that kind of test, I’m really interested in this, please tell me.\u003C/p>",{"headings":248,"localImagePaths":249,"remoteImagePaths":250,"frontmatter":251,"imagePaths":255},[],[],[],{"title":238,"categories":252,"tags":253,"date":254},[17],[87],["Date","2008-12-14T00:00:00.000Z"],[],"2008-12-14-catalog.md","2009-03-07-en-svn-git",{"id":257,"data":259,"body":264,"filePath":265,"digest":266,"rendered":267,"legacyId":278},{"title":260,"date":261,"categories":262,"tags":263,"lang":17},"Switching from SVN to GIT",["Date","2009-03-07T00:00:00.000Z"],[17],[19,20],"Yet another post to say SVN sucks. Yes it does. But many people who use SVN are happy with it and I was happy too.\n\nIt's hard to maintain a trunk when 5 people are committing on it during the project life. So I have started to look at DVCS (git, hg, bzr). I have tried GIT because of its popularity.\n\nAt work, someone is using Mercurial (hg) and we are two people interested in GIT. So I have decided to test it but over SVN. It means the central repository is still an SVN one.\n\nHere is the way I'm using it:\n\n1. clone the repo (git svn clone blabla)\n2. branche\n3. work on your code (commit, …)\n4. merge on master\n5. git svn dcommit\n\nAnd you get it, only one commit on the trunk (master) and the power of git to merge, commit, etc.\n\nSome cool features and properties of git:\n\n* space on HDD of a git clone \u003C svn checkout (and you get the entire history)\n* fast, git is damn faster than svn. When you type the enter key, you get it (except from git svn clone, because here it's svn)\n* qgit2 (Qt4) is a very good tool (you can browse your svn history, look at diffs, etc.)\n* the help on command line. git status gives you help for the next command you will make\n\nBut there are some points I have not found handy:\n\n* git st mygitrepo/ doesn't work (\"is not a git repo\" but it is)\n* no default aliases (st, co, etc.) but can be easily configured\n* svn externals can be seen as submodules, but not managed in that way. git svn does not handle svn:externals and you can't use git submodules over svn\n* Eclipse does not manage git (and I know it's a pain for Eclipse guys because it breaks the way the platform is thought)\n\nI hope all these things will be improved in the future of git, but now I'm using git at work. Next step will be code review TTW.","src/content/posts/2009-03-07-en-svn-git.md","689a03d2986bb5d8",{"html":268,"metadata":269},"\u003Cp>Yet another post to say SVN sucks. Yes it does. But many people who use SVN are happy with it and I was happy too.\u003C/p>\n\u003Cp>It’s hard to maintain a trunk when 5 people are committing on it during the project life. So I have started to look at DVCS (git, hg, bzr). I have tried GIT because of its popularity.\u003C/p>\n\u003Cp>At work, someone is using Mercurial (hg) and we are two people interested in GIT. So I have decided to test it but over SVN. It means the central repository is still an SVN one.\u003C/p>\n\u003Cp>Here is the way I’m using it:\u003C/p>\n\u003Col>\n\u003Cli>clone the repo (git svn clone blabla)\u003C/li>\n\u003Cli>branche\u003C/li>\n\u003Cli>work on your code (commit, …)\u003C/li>\n\u003Cli>merge on master\u003C/li>\n\u003Cli>git svn dcommit\u003C/li>\n\u003C/ol>\n\u003Cp>And you get it, only one commit on the trunk (master) and the power of git to merge, commit, etc.\u003C/p>\n\u003Cp>Some cool features and properties of git:\u003C/p>\n\u003Cul>\n\u003Cli>space on HDD of a git clone &#x3C; svn checkout (and you get the entire history)\u003C/li>\n\u003Cli>fast, git is damn faster than svn. When you type the enter key, you get it (except from git svn clone, because here it’s svn)\u003C/li>\n\u003Cli>qgit2 (Qt4) is a very good tool (you can browse your svn history, look at diffs, etc.)\u003C/li>\n\u003Cli>the help on command line. git status gives you help for the next command you will make\u003C/li>\n\u003C/ul>\n\u003Cp>But there are some points I have not found handy:\u003C/p>\n\u003Cul>\n\u003Cli>git st mygitrepo/ doesn’t work (“is not a git repo” but it is)\u003C/li>\n\u003Cli>no default aliases (st, co, etc.) but can be easily configured\u003C/li>\n\u003Cli>svn externals can be seen as submodules, but not managed in that way. git svn does not handle svn:externals and you can’t use git submodules over svn\u003C/li>\n\u003Cli>Eclipse does not manage git (and I know it’s a pain for Eclipse guys because it breaks the way the platform is thought)\u003C/li>\n\u003C/ul>\n\u003Cp>I hope all these things will be improved in the future of git, but now I’m using git at work. Next step will be code review TTW.\u003C/p>",{"headings":270,"localImagePaths":271,"remoteImagePaths":272,"frontmatter":273,"imagePaths":277},[],[],[],{"title":260,"categories":274,"tags":275,"date":276},[17],[19,20],["Date","2009-03-07T00:00:00.000Z"],[],"2009-03-07-en-svn-git.md","2009-03-14-en-plone-roles",{"id":279,"data":281,"body":286,"filePath":287,"digest":288,"rendered":289,"legacyId":300},{"title":282,"date":283,"categories":284,"tags":285,"lang":17},"Plone and local roles, too quiet.",["Date","2009-03-14T00:00:00.000Z"],[17],[87],"I have worked hard on testing/debugging an already developed specific app that handle local roles in a Plone site. I was sure that local roles was just manageable throw a permission but i have finally read the code that handle local roles and understand things:\n\n* you can only add a role to somebody if you have the permission “Change local roles”\n* you can only add a role to somebody if you this role in that context\n* role are quiet on error (if you don’t have the role you are trying to add, you will not have any log)\n* if you have manager role you can do what ever you want (don’t do your tests in manager !!! )\n* else candidate local roles are only yours without ‘Anonymous’, ‘Authenticated’ and ‘Shared’\n* local roles are stored in a dict called __ac_local_roles__ on the context\n\nAfter one day of work with local roles, i think the most painful part is to don’t have log, even in debug mode. When a process is called to do a job and it do half of it, i think it has to said something.\n\nBut local roles are an essential part of Plone that i really like.\n\nPS: i have discover to late a good module to display local roles in Plone: [zopyx.plone.cassandra](http://pypi.python.org/pypi/zopyx.plone.cassandra).","src/content/posts/2009-03-14-en-plone-roles.md","c5e3b9368f83bc10",{"html":290,"metadata":291},"\u003Cp>I have worked hard on testing/debugging an already developed specific app that handle local roles in a Plone site. I was sure that local roles was just manageable throw a permission but i have finally read the code that handle local roles and understand things:\u003C/p>\n\u003Cul>\n\u003Cli>you can only add a role to somebody if you have the permission “Change local roles”\u003C/li>\n\u003Cli>you can only add a role to somebody if you this role in that context\u003C/li>\n\u003Cli>role are quiet on error (if you don’t have the role you are trying to add, you will not have any log)\u003C/li>\n\u003Cli>if you have manager role you can do what ever you want (don’t do your tests in manager !!! )\u003C/li>\n\u003Cli>else candidate local roles are only yours without ‘Anonymous’, ‘Authenticated’ and ‘Shared’\u003C/li>\n\u003Cli>local roles are stored in a dict called \u003Cstrong>ac_local_roles\u003C/strong> on the context\u003C/li>\n\u003C/ul>\n\u003Cp>After one day of work with local roles, i think the most painful part is to don’t have log, even in debug mode. When a process is called to do a job and it do half of it, i think it has to said something.\u003C/p>\n\u003Cp>But local roles are an essential part of Plone that i really like.\u003C/p>\n\u003Cp>PS: i have discover to late a good module to display local roles in Plone: \u003Ca href=\"http://pypi.python.org/pypi/zopyx.plone.cassandra\">zopyx.plone.cassandra\u003C/a>.\u003C/p>",{"headings":292,"localImagePaths":293,"remoteImagePaths":294,"frontmatter":295,"imagePaths":299},[],[],[],{"title":282,"categories":296,"tags":297,"date":298},[17],[87],["Date","2009-03-14T00:00:00.000Z"],[],"2009-03-14-en-plone-roles.md","2009-08-12-my-first-plone-patch",{"id":301,"data":303,"body":308,"filePath":309,"digest":310,"rendered":311,"legacyId":322},{"title":304,"date":305,"categories":306,"tags":307,"lang":17},"My first patch! Improve performance of Plone",["Date","2009-08-12T00:00:00.000Z"],[17],[87],"I'm proud of it, so I want to blog about it. Let me tell you the story of my first patch on Plone.\n\nTwo students from '[Ecole polytechnique de l'université de Nantes](http://www.polytech.univ-nantes.fr/)' have worked for me during 6 months. They have discovered so many technologies:\n\n* Python\n* Zope\n* Plone\n* JMeter\n* etc.\n\nTheir subject was: \"Just improve authentication performance of Plone\". They have not succeeded in doing this, but they have showed me some graphics where I have found a performance issue: the user properties. So I have kept Nasreddine BERCHIDA for the summer to continue on this. Tuesday, July 7, he has found that enumerateUsers from PlonePas.plugins.property was the source code that matters.\n\nWe have done a [report with funkload](http://jm406.free.fr/travail/plone/diff_01_connect_p_atch_bis_N4_vs_o_cache_no_admin-N2/) with lots of users and got it: lots of green means performance improved.\n\nThe patch is about to be merged (I hope).\n\nReferences:\n\n* [mailing list discussion](http://plone.org/support/forums/general#nabble-td3230154|a3230154)\n* [bug tracker ticket](https://dev.plone.org/plone/ticket/9361) (need a plone.org account)","src/content/posts/2009-08-12-my-first-plone-patch.md","7877e15ef98c5396",{"html":312,"metadata":313},"\u003Cp>I’m proud of it, so I want to blog about it. Let me tell you the story of my first patch on Plone.\u003C/p>\n\u003Cp>Two students from ‘\u003Ca href=\"http://www.polytech.univ-nantes.fr/\">Ecole polytechnique de l’université de Nantes\u003C/a>’ have worked for me during 6 months. They have discovered so many technologies:\u003C/p>\n\u003Cul>\n\u003Cli>Python\u003C/li>\n\u003Cli>Zope\u003C/li>\n\u003Cli>Plone\u003C/li>\n\u003Cli>JMeter\u003C/li>\n\u003Cli>etc.\u003C/li>\n\u003C/ul>\n\u003Cp>Their subject was: “Just improve authentication performance of Plone”. They have not succeeded in doing this, but they have showed me some graphics where I have found a performance issue: the user properties. So I have kept Nasreddine BERCHIDA for the summer to continue on this. Tuesday, July 7, he has found that enumerateUsers from PlonePas.plugins.property was the source code that matters.\u003C/p>\n\u003Cp>We have done a \u003Ca href=\"http://jm406.free.fr/travail/plone/diff_01_connect_p_atch_bis_N4_vs_o_cache_no_admin-N2/\">report with funkload\u003C/a> with lots of users and got it: lots of green means performance improved.\u003C/p>\n\u003Cp>The patch is about to be merged (I hope).\u003C/p>\n\u003Cp>References:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://plone.org/support/forums/general#nabble-td3230154%7Ca3230154\">mailing list discussion\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://dev.plone.org/plone/ticket/9361\">bug tracker ticket\u003C/a> (need a plone.org account)\u003C/li>\n\u003C/ul>",{"headings":314,"localImagePaths":315,"remoteImagePaths":316,"frontmatter":317,"imagePaths":321},[],[],[],{"title":304,"categories":318,"tags":319,"date":320},[17],[87],["Date","2009-08-12T00:00:00.000Z"],[],"2009-08-12-my-first-plone-patch.md","2009-08-12-monkey",{"id":323,"data":325,"body":330,"filePath":331,"digest":332,"rendered":333,"legacyId":344},{"title":326,"date":327,"categories":328,"tags":329,"lang":17},"Monkey ! When patching can’t be merged",["Date","2009-08-12T00:00:00.000Z"],[17],[87],"Next to my first Plone patch that improved performance, I have been profiling the code on a simple query: get a javascript from portal_javascript already computed.\n\nThe result is clear: 28% of the time is spent in opaqueitems. So I have discussed about it on [CMF mailing list](http://mail.zope.org/pipermail/zope-cmf/2009-August/028559.html).\n\nA monkey patch was already existing: [experimental.opaquespeedup](http://pypi.python.org/pypi/experimental.opaquespeedup). I have read the code. It replaces the time-consuming calls on all attributes by a catalog request. But I know that catalog can be slow if the website has lots of contents. I have decided to make something more aggressive, by just removing opaqueitems that seem to be not used.\n\nSo use it at your own risk!","src/content/posts/2009-08-12-monkey.md","4d2e5058b11d765b",{"html":334,"metadata":335},"\u003Cp>Next to my first Plone patch that improved performance, I have been profiling the code on a simple query: get a javascript from portal_javascript already computed.\u003C/p>\n\u003Cp>The result is clear: 28% of the time is spent in opaqueitems. So I have discussed about it on \u003Ca href=\"http://mail.zope.org/pipermail/zope-cmf/2009-August/028559.html\">CMF mailing list\u003C/a>.\u003C/p>\n\u003Cp>A monkey patch was already existing: \u003Ca href=\"http://pypi.python.org/pypi/experimental.opaquespeedup\">experimental.opaquespeedup\u003C/a>. I have read the code. It replaces the time-consuming calls on all attributes by a catalog request. But I know that catalog can be slow if the website has lots of contents. I have decided to make something more aggressive, by just removing opaqueitems that seem to be not used.\u003C/p>\n\u003Cp>So use it at your own risk!\u003C/p>",{"headings":336,"localImagePaths":337,"remoteImagePaths":338,"frontmatter":339,"imagePaths":343},[],[],[],{"title":326,"categories":340,"tags":341,"date":342},[17],[87],["Date","2009-08-12T00:00:00.000Z"],[],"2009-08-12-monkey.md","2009-08-17-versionning",{"id":345,"data":347,"body":353,"filePath":354,"digest":355,"rendered":356,"legacyId":367},{"title":348,"date":349,"categories":350,"tags":351,"lang":17},"versioning during release on pypi",["Date","2009-08-17T00:00:00.000Z"],[17],[352],"python","Posted in plone, python on August 17, 2009 by toutpt\nI often see lots of information about version numbers on release. I would like to explain it. For sure, there are lots of different use cases but here, I speak about code you are writing and want to package.\n\nFor me there are 4 parts:\n\n* Major version number\n* Feature version indice\n* Current level of release\n* Status of the release\n\nMajor version number is about layout or about backward compatibility. When you change that number it means you have totally changed most things or you have broken the layout because you have made a big mistake and you don't have another choice. For example Zope 2.X.X and Zope 3.X.X.\n\nFeature version indice is all about features. For me this number is increased when you have added feature(s). For example, adding undo/redo to the software.\n\nCurrent level of release is all about bug fixes. For example, an i18n broken reported by someone.\n\nThe status is a character or a word like beta, rc, etc., and is all about release status. The order is:\n\n* alpha (a) often means only for developers, first calls for testing (try to install)\n* beta (b) often it is used to call for testing (install and use it)\n* candidate (c or rc) means no more bugs reported, just about packaging and last call for testing\n\nI'm sure there are some formal papers around the Internet that explain this a lot better, but I was just wanting to explain my point of view.","src/content/posts/2009-08-17-versionning.md","b3a7903b674327d6",{"html":357,"metadata":358},"\u003Cp>Posted in plone, python on August 17, 2009 by toutpt\nI often see lots of information about version numbers on release. I would like to explain it. For sure, there are lots of different use cases but here, I speak about code you are writing and want to package.\u003C/p>\n\u003Cp>For me there are 4 parts:\u003C/p>\n\u003Cul>\n\u003Cli>Major version number\u003C/li>\n\u003Cli>Feature version indice\u003C/li>\n\u003Cli>Current level of release\u003C/li>\n\u003Cli>Status of the release\u003C/li>\n\u003C/ul>\n\u003Cp>Major version number is about layout or about backward compatibility. When you change that number it means you have totally changed most things or you have broken the layout because you have made a big mistake and you don’t have another choice. For example Zope 2.X.X and Zope 3.X.X.\u003C/p>\n\u003Cp>Feature version indice is all about features. For me this number is increased when you have added feature(s). For example, adding undo/redo to the software.\u003C/p>\n\u003Cp>Current level of release is all about bug fixes. For example, an i18n broken reported by someone.\u003C/p>\n\u003Cp>The status is a character or a word like beta, rc, etc., and is all about release status. The order is:\u003C/p>\n\u003Cul>\n\u003Cli>alpha (a) often means only for developers, first calls for testing (try to install)\u003C/li>\n\u003Cli>beta (b) often it is used to call for testing (install and use it)\u003C/li>\n\u003Cli>candidate (c or rc) means no more bugs reported, just about packaging and last call for testing\u003C/li>\n\u003C/ul>\n\u003Cp>I’m sure there are some formal papers around the Internet that explain this a lot better, but I was just wanting to explain my point of view.\u003C/p>",{"headings":359,"localImagePaths":360,"remoteImagePaths":361,"frontmatter":362,"imagePaths":366},[],[],[],{"title":348,"categories":363,"tags":364,"date":365},[17],[352],["Date","2009-08-17T00:00:00.000Z"],[],"2009-08-17-versionning.md","2009-09-11-private-pypi",{"id":368,"data":370,"body":375,"filePath":376,"digest":377,"rendered":378,"legacyId":389},{"title":371,"date":372,"categories":373,"tags":374,"lang":17},"Private Pypi setup",["Date","2009-09-11T00:00:00.000Z"],[17],[352],"I have succeeded in setting up a full private PyPI. So I want to share this.\n\nFirst you need to install a Plone on a server with [Plone software center](http://pypi.python.org/pypi/Products.PloneSoftwareCenter). Our system administrators have set up DNS to this Plone with Apache + HTTP auth + SSL (https) and have given me one login/password.\n\nNext you need to add a new software center to the content of your site. You can also change the base workflow of a project to be approved by default.\n\nThe final step for the server is to add a user at the root of Zope with the same user/password as HTTP auth\n\nNow you are ready for the next step: set up your environment on your computer. You need to add HTTP auth ability to buildout and collective.dist. For this:\n\n* configure the pypirc file like described on plone.org\n* Add lovely.buildouthttp extension to your buildout\n* Add `.buildout` folder to your home directory if it doesn't already exist\n* Add `.buildout/.httpauth` with realm, https://yourdomain, user, password\nI have been looking for the 'realm' of my server for 2 hours. So what is a realm? Thanks to Tarek who has taken time to answer me on IRC:\n\n    toupt the realm is the domain the server sends back when you do a challenge\n    for instance zope sends \"Zope\"\n    trac sends \"trac\"\n    etc\n\nI have Apache httpd as server, so is it \"Apache\"? The documentation of lovely.buildouthttp says \"My domain\" but it still doesn't work. Finally I have found the realm. It was 'Members Only Area'. This is the default Apache realm. This is a good thing to know.\n\nA contribution: add documentation to lovely.buildouthttp, collective.dist and software center. The realm and the user in Zope trick were not easy to find.\n\nThe benefits of a private pypi:\n\n* Release private eggs for customers\n* Test some eggs before release on pypi and plone.org (fix rest for example)\n* Release your last commit on collective to use it now in production\n* Learn release process of an egg","src/content/posts/2009-09-11-private-pypi.md","5d44a3d617869b60",{"html":379,"metadata":380},"\u003Cp>I have succeeded in setting up a full private PyPI. So I want to share this.\u003C/p>\n\u003Cp>First you need to install a Plone on a server with \u003Ca href=\"http://pypi.python.org/pypi/Products.PloneSoftwareCenter\">Plone software center\u003C/a>. Our system administrators have set up DNS to this Plone with Apache + HTTP auth + SSL (https) and have given me one login/password.\u003C/p>\n\u003Cp>Next you need to add a new software center to the content of your site. You can also change the base workflow of a project to be approved by default.\u003C/p>\n\u003Cp>The final step for the server is to add a user at the root of Zope with the same user/password as HTTP auth\u003C/p>\n\u003Cp>Now you are ready for the next step: set up your environment on your computer. You need to add HTTP auth ability to buildout and collective.dist. For this:\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>configure the pypirc file like described on plone.org\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Add lovely.buildouthttp extension to your buildout\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Add \u003Ccode>.buildout\u003C/code> folder to your home directory if it doesn’t already exist\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Add \u003Ccode>.buildout/.httpauth\u003C/code> with realm, \u003Ca href=\"https://yourdomain\">https://yourdomain\u003C/a>, user, password\nI have been looking for the ‘realm’ of my server for 2 hours. So what is a realm? Thanks to Tarek who has taken time to answer me on IRC:\u003C/p>\n\u003Cp>toupt the realm is the domain the server sends back when you do a challenge\nfor instance zope sends “Zope”\ntrac sends “trac”\netc\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Cp>I have Apache httpd as server, so is it “Apache”? The documentation of lovely.buildouthttp says “My domain” but it still doesn’t work. Finally I have found the realm. It was ‘Members Only Area’. This is the default Apache realm. This is a good thing to know.\u003C/p>\n\u003Cp>A contribution: add documentation to lovely.buildouthttp, collective.dist and software center. The realm and the user in Zope trick were not easy to find.\u003C/p>\n\u003Cp>The benefits of a private pypi:\u003C/p>\n\u003Cul>\n\u003Cli>Release private eggs for customers\u003C/li>\n\u003Cli>Test some eggs before release on pypi and plone.org (fix rest for example)\u003C/li>\n\u003Cli>Release your last commit on collective to use it now in production\u003C/li>\n\u003Cli>Learn release process of an egg\u003C/li>\n\u003C/ul>",{"headings":381,"localImagePaths":382,"remoteImagePaths":383,"frontmatter":384,"imagePaths":388},[],[],[],{"title":371,"categories":385,"tags":386,"date":387},[17],[352],["Date","2009-09-11T00:00:00.000Z"],[],"2009-09-11-private-pypi.md","2008-12-10-lorem",{"id":390,"data":392,"body":397,"filePath":398,"digest":399,"rendered":400,"legacyId":411},{"title":393,"date":394,"categories":395,"tags":396,"lang":17},"A word about lorem ipsum (aka lipsum) generator and Python",["Date","2008-12-10T00:00:00.000Z"],[17],[352],"Today I have made some functional tests with lorem ipsum text generator for Plone Selenium. The first thing I have done is to search for a Python script to generate text à la [lipsum](http://www.lipsum.com/).\n\nI have been surprised by the fact that most scripts I have found use text already generated. It's the case for:\n\n* [lorem-ipsum-generator](http://code.google.com/p/lorem-ipsum-generator/)\n* [lorem](lorem)\n\nBut on the official web site we can find a python script : [pypsum](http://code.google.com/p/pypsum/). I have used and derived that one to generate CSV file by that way:\n\n```sh\npython data_csv.py -a 10 -f paras:3:texte_paras:1:description_words:5:title -d articles10_20081210_02.csv\n```\n\nAnd then:\n\n```sh\npython selenium_html.py -c articles10_20081210_02.csv -d articles10_20081210_02.html -o addArticles\n```\n\n[You can find all my tests here](http://jm406.free.fr/travail/lipsum)\n\nFor sure it's Plone-specific code for the Selenium part, but I'm pretty happy with the result. I can now create random content for any website very quickly.","src/content/posts/2008-12-10-lorem.md","ff2ee675dd027997",{"html":401,"metadata":402},"\u003Cp>Today I have made some functional tests with lorem ipsum text generator for Plone Selenium. The first thing I have done is to search for a Python script to generate text à la \u003Ca href=\"http://www.lipsum.com/\">lipsum\u003C/a>.\u003C/p>\n\u003Cp>I have been surprised by the fact that most scripts I have found use text already generated. It’s the case for:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://code.google.com/p/lorem-ipsum-generator/\">lorem-ipsum-generator\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"lorem\">lorem\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Cp>But on the official web site we can find a python script : \u003Ca href=\"http://code.google.com/p/pypsum/\">pypsum\u003C/a>. I have used and derived that one to generate CSV file by that way:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">python\u003C/span>\u003Cspan style=\"color:#E6DB74\"> data_csv.py\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -a\u003C/span>\u003Cspan style=\"color:#AE81FF\"> 10\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -f\u003C/span>\u003Cspan style=\"color:#E6DB74\"> paras:3:texte_paras:1:description_words:5:title\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -d\u003C/span>\u003Cspan style=\"color:#E6DB74\"> articles10_20081210_02.csv\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>And then:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">python\u003C/span>\u003Cspan style=\"color:#E6DB74\"> selenium_html.py\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -c\u003C/span>\u003Cspan style=\"color:#E6DB74\"> articles10_20081210_02.csv\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -d\u003C/span>\u003Cspan style=\"color:#E6DB74\"> articles10_20081210_02.html\u003C/span>\u003Cspan style=\"color:#AE81FF\"> -o\u003C/span>\u003Cspan style=\"color:#E6DB74\"> addArticles\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ca href=\"http://jm406.free.fr/travail/lipsum\">You can find all my tests here\u003C/a>\u003C/p>\n\u003Cp>For sure it’s Plone-specific code for the Selenium part, but I’m pretty happy with the result. I can now create random content for any website very quickly.\u003C/p>",{"headings":403,"localImagePaths":404,"remoteImagePaths":405,"frontmatter":406,"imagePaths":410},[],[],[],{"title":393,"categories":407,"tags":408,"date":409},[17],[352],["Date","2008-12-10T00:00:00.000Z"],[],"2008-12-10-lorem.md","2009-10-07-collection",{"id":412,"data":414,"body":419,"filePath":420,"digest":421,"rendered":422,"legacyId":433},{"title":415,"date":416,"categories":417,"tags":418,"lang":17},"Collection and related items",["Date","2009-10-07T00:00:00.000Z"],[17],[87],"Today I have worked on Collection (ATTopic). I have discovered a great feature.\n\nYou can use related items to choose first results. It can be very useful to manage a home page. First results are the most important items because they are the most read.\n\nSo choosing first items is important and at the same time making the page content change with the website activity is just great!\n\nAt the time of writing this post, this feature has a bug: If criteria match related items, they just appear twice. I have reported that bug with a test and a patch here: https://dev.plone.org/plone/ticket/9591. I hope it will be accepted.\n\nIt is not finished yet. You can use archetypes.referencebrowserwidget to add order handling to related items. It adds up and down arrows on each related item. So you can move up and down each one of them like in folder listing with items.","src/content/posts/2009-10-07-collection.md","fb7f2cab20994a1e",{"html":423,"metadata":424},"\u003Cp>Today I have worked on Collection (ATTopic). I have discovered a great feature.\u003C/p>\n\u003Cp>You can use related items to choose first results. It can be very useful to manage a home page. First results are the most important items because they are the most read.\u003C/p>\n\u003Cp>So choosing first items is important and at the same time making the page content change with the website activity is just great!\u003C/p>\n\u003Cp>At the time of writing this post, this feature has a bug: If criteria match related items, they just appear twice. I have reported that bug with a test and a patch here: \u003Ca href=\"https://dev.plone.org/plone/ticket/9591\">https://dev.plone.org/plone/ticket/9591\u003C/a>. I hope it will be accepted.\u003C/p>\n\u003Cp>It is not finished yet. You can use archetypes.referencebrowserwidget to add order handling to related items. It adds up and down arrows on each related item. So you can move up and down each one of them like in folder listing with items.\u003C/p>",{"headings":425,"localImagePaths":426,"remoteImagePaths":427,"frontmatter":428,"imagePaths":432},[],[],[],{"title":415,"categories":429,"tags":430,"date":431},[17],[87],["Date","2009-10-07T00:00:00.000Z"],[],"2009-10-07-collection.md","2009-11-02-sprint",{"id":434,"data":436,"body":441,"filePath":442,"digest":443,"rendered":444,"legacyId":468},{"title":437,"date":438,"categories":439,"tags":440,"lang":17},"Plone Conf 2009 sprint report",["Date","2009-11-02T00:00:00.000Z"],[17],[19,20],"Plone needs to reach a new QA level: Adding nightly performance tests. It is important when you make a modification to the code to know if there is an impact on the performance of the application. As Elisabeth said in the \"unloading plone\" conference, measure!\n\nTo understand and use technologies, you first need to know what are the names of all these packages:\n\n* [Funkload](http://funkload.nuxeo.org/) Functional and load web tester\n* [Buildbot](http://buildbot.net/) System to automate the compile/test cycle\n* collective.coreloadtests Three funkload tests for Plone + some setup profiles\n* collective.loadtesting One buildout to setup a buildbot with funkload + some examples.\n* collective.funkload Complex functional load testing and benchmarking\n* collective.buildbot A set of zc.buildout recipes and support for declarative configuration for Buildbot\n* collective.recipe.funkload Easy running of funkload tests and generation of reports.\n\nSo what has been done during the sprint:\n\n## Day One\n\nI have reviewed [pasteFunBot](http://pypi.python.org/pypi/pasteFunBot/0.1). I have kept some scripts and the template script but I have removed all the templates.\n\nI have read the code of most of the different eggs and tried most of them.\n\nWhat I had in mind before starting:\n\n* Buildbot + Plone4 + Funkload + coreloadtests\n* Use collective.loadtesting as an example\n* Add a paster script to start continuous performance tests faster\n\nBy the end of the day 1 I have done collective.funkbot a paster that create a new performance test bot in three questions:\n\n* vcs [‘svn’]\n* vcs_url [”]\n* email [”]\n\nIn the Plone community we are using buildout, so the vcs_url is supposed to be the buildout url to checkout / update every night. email is the email adress where will be sent the reports. Also if the buildbot failed to build the buildout, a mail with all stdio will be sent.\n\nAt the end of the day I had some troubles with funkload. I was not able to launch performance tests.\n\n## Day Two\n\nIn the morning tomlazar and vincing have helped me and I have discovered their work on collective.recipe.funkload done during the last performance sprint in Bristol. In fact, funkload script needs to know in which eggs it can look for tests. I have found a bug and fixed it. So now there is a new release of this egg (done with mkrelease)\n\nAfter lunch I had decided to work on Plone 4 buildout to fix coreloadtests.cfg. Because I'm new to the community I have done this work under the collective.funkbot repository (still collective but not SVN Plone).\n\nNext I have used my paster to initialize the buildout of the future nightly performance bot (still under collective.funkbot repository)\n\nBefore the sprint report of the day I have succeeded in fixing most bugs. The only remaining one was on the creation of the Plone 4 site. That has been a bit funny to report this: \"I have succeeded except I can't create a Plone site...\"\n\nAfter this report I have finished and added the ability to collective.recipe.plonesite to create a Plone 4 site. I have next discovered a bug with the basic theme of Plone, so I have reported it to limi and added the profile of plonetheme.sunburst to launch funkload.\n\nI have also refreshed a bit coreloadtests by moving GenericSetup registrations and steps in ZCML.\n\nI have also made this report :)\n\nYou can check this picture:\n\n## TODO\n\n* Push my patch on plone4 buildout\n* Refresh the scripts that send the performance reports by email (atm their is a simple python script) and the one who serve html reports throw paste server #static (this one is also used by links inside the email)\n* Make a better documentation\n* Make contentgenerator faster (it seems not working at all)\n\n## Conclusion\n\nI want to thank my company Makina-Corpus for having given me the ability to come to the conference and sprint.\n\nI want to thank the Plone community for being so full of great and impressive people!\n\nI have learned a lot about many different topics (hosting, testing, performances, future of Plone, etc.)\n\nI want to be at the next sprints and at the next Plone conferences!\n\nI will continue to work on that topic, so to stay connected, you can follow me on Twitter with the nickname toutpt that you can't pronounce in English, so if you try, do it like \"toopatai\" :)\n\nLinks\n\n* [collective.funkbot](http://pypi.python.org/pypi/collective.funkbot)\n* [plone4 buildout](http://svn.plone.org/svn/collective/collective.funkbot/plone4coreloadtestsbuildout/) patched to be triggered by buildout with coreloadtests\n* [The nighly buildout buildbot]](http://svn.plone.org/svn/collective/collective.funkbot/plone4funkbotbuildout/) (pasted from funkbot and adapted).","src/content/posts/2009-11-02-sprint.md","02d6596a0ee18549",{"html":445,"metadata":446},"\u003Cp>Plone needs to reach a new QA level: Adding nightly performance tests. It is important when you make a modification to the code to know if there is an impact on the performance of the application. As Elisabeth said in the “unloading plone” conference, measure!\u003C/p>\n\u003Cp>To understand and use technologies, you first need to know what are the names of all these packages:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://funkload.nuxeo.org/\">Funkload\u003C/a> Functional and load web tester\u003C/li>\n\u003Cli>\u003Ca href=\"http://buildbot.net/\">Buildbot\u003C/a> System to automate the compile/test cycle\u003C/li>\n\u003Cli>collective.coreloadtests Three funkload tests for Plone + some setup profiles\u003C/li>\n\u003Cli>collective.loadtesting One buildout to setup a buildbot with funkload + some examples.\u003C/li>\n\u003Cli>collective.funkload Complex functional load testing and benchmarking\u003C/li>\n\u003Cli>collective.buildbot A set of zc.buildout recipes and support for declarative configuration for Buildbot\u003C/li>\n\u003Cli>collective.recipe.funkload Easy running of funkload tests and generation of reports.\u003C/li>\n\u003C/ul>\n\u003Cp>So what has been done during the sprint:\u003C/p>\n\u003Ch2 id=\"day-one\">Day One\u003C/h2>\n\u003Cp>I have reviewed \u003Ca href=\"http://pypi.python.org/pypi/pasteFunBot/0.1\">pasteFunBot\u003C/a>. I have kept some scripts and the template script but I have removed all the templates.\u003C/p>\n\u003Cp>I have read the code of most of the different eggs and tried most of them.\u003C/p>\n\u003Cp>What I had in mind before starting:\u003C/p>\n\u003Cul>\n\u003Cli>Buildbot + Plone4 + Funkload + coreloadtests\u003C/li>\n\u003Cli>Use collective.loadtesting as an example\u003C/li>\n\u003Cli>Add a paster script to start continuous performance tests faster\u003C/li>\n\u003C/ul>\n\u003Cp>By the end of the day 1 I have done collective.funkbot a paster that create a new performance test bot in three questions:\u003C/p>\n\u003Cul>\n\u003Cli>vcs [‘svn’]\u003C/li>\n\u003Cli>vcs_url [”]\u003C/li>\n\u003Cli>email [”]\u003C/li>\n\u003C/ul>\n\u003Cp>In the Plone community we are using buildout, so the vcs_url is supposed to be the buildout url to checkout / update every night. email is the email adress where will be sent the reports. Also if the buildbot failed to build the buildout, a mail with all stdio will be sent.\u003C/p>\n\u003Cp>At the end of the day I had some troubles with funkload. I was not able to launch performance tests.\u003C/p>\n\u003Ch2 id=\"day-two\">Day Two\u003C/h2>\n\u003Cp>In the morning tomlazar and vincing have helped me and I have discovered their work on collective.recipe.funkload done during the last performance sprint in Bristol. In fact, funkload script needs to know in which eggs it can look for tests. I have found a bug and fixed it. So now there is a new release of this egg (done with mkrelease)\u003C/p>\n\u003Cp>After lunch I had decided to work on Plone 4 buildout to fix coreloadtests.cfg. Because I’m new to the community I have done this work under the collective.funkbot repository (still collective but not SVN Plone).\u003C/p>\n\u003Cp>Next I have used my paster to initialize the buildout of the future nightly performance bot (still under collective.funkbot repository)\u003C/p>\n\u003Cp>Before the sprint report of the day I have succeeded in fixing most bugs. The only remaining one was on the creation of the Plone 4 site. That has been a bit funny to report this: “I have succeeded except I can’t create a Plone site…”\u003C/p>\n\u003Cp>After this report I have finished and added the ability to collective.recipe.plonesite to create a Plone 4 site. I have next discovered a bug with the basic theme of Plone, so I have reported it to limi and added the profile of plonetheme.sunburst to launch funkload.\u003C/p>\n\u003Cp>I have also refreshed a bit coreloadtests by moving GenericSetup registrations and steps in ZCML.\u003C/p>\n\u003Cp>I have also made this report :)\u003C/p>\n\u003Cp>You can check this picture:\u003C/p>\n\u003Ch2 id=\"todo\">TODO\u003C/h2>\n\u003Cul>\n\u003Cli>Push my patch on plone4 buildout\u003C/li>\n\u003Cli>Refresh the scripts that send the performance reports by email (atm their is a simple python script) and the one who serve html reports throw paste server #static (this one is also used by links inside the email)\u003C/li>\n\u003Cli>Make a better documentation\u003C/li>\n\u003Cli>Make contentgenerator faster (it seems not working at all)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>I want to thank my company Makina-Corpus for having given me the ability to come to the conference and sprint.\u003C/p>\n\u003Cp>I want to thank the Plone community for being so full of great and impressive people!\u003C/p>\n\u003Cp>I have learned a lot about many different topics (hosting, testing, performances, future of Plone, etc.)\u003C/p>\n\u003Cp>I want to be at the next sprints and at the next Plone conferences!\u003C/p>\n\u003Cp>I will continue to work on that topic, so to stay connected, you can follow me on Twitter with the nickname toutpt that you can’t pronounce in English, so if you try, do it like “toopatai” :)\u003C/p>\n\u003Cp>Links\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://pypi.python.org/pypi/collective.funkbot\">collective.funkbot\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"http://svn.plone.org/svn/collective/collective.funkbot/plone4coreloadtestsbuildout/\">plone4 buildout\u003C/a> patched to be triggered by buildout with coreloadtests\u003C/li>\n\u003Cli>[The nighly buildout buildbot]](\u003Ca href=\"http://svn.plone.org/svn/collective/collective.funkbot/plone4funkbotbuildout/\">http://svn.plone.org/svn/collective/collective.funkbot/plone4funkbotbuildout/\u003C/a>) (pasted from funkbot and adapted).\u003C/li>\n\u003C/ul>",{"headings":447,"localImagePaths":461,"remoteImagePaths":462,"frontmatter":463,"imagePaths":467},[448,452,455,458],{"depth":449,"slug":450,"text":451},2,"day-one","Day One",{"depth":449,"slug":453,"text":454},"day-two","Day Two",{"depth":449,"slug":456,"text":457},"todo","TODO",{"depth":449,"slug":459,"text":460},"conclusion","Conclusion",[],[],{"title":437,"categories":464,"tags":465,"date":466},[17],[19,20],["Date","2009-11-02T00:00:00.000Z"],[],"2009-11-02-sprint.md","2009-11-17-import",{"id":469,"data":471,"body":476,"filePath":477,"digest":478,"rendered":479,"legacyId":499},{"title":472,"date":473,"categories":474,"tags":475,"lang":17},"Import contents & keywords with generic setup",["Date","2009-11-17T00:00:00.000Z"],[17],[87],"I really like GenericSetup to build Plone instances.\n\nBut, I was not able to do some things like set up contents (folders for structure, documents to make some example pages, etc.), keywords and portlets.\n\nNote: The default import structure step of Plone doesn't do enough things for me, and I find it hard to use. So I have contributed to some third-party modules:\n\n## CSVReplicata\n\ncsvreplicata first give you a way to import/export content within the csv file format. So you can import/export atcontent types (and more) with it. I have added a csvimportStep to be able to use it with genericsetup:\n\n```python\ndef importcsvStep(context):\n    \"\"\"This step give you a way to import content in your website with\n    csvreplicata.\n\n    How it works:\n    read replicata.cfg file to load configuration\n\n    read replicata.csv and call csvreplicata with the config.\n\n    Config:\n    [replicable_types]\n    #List schemata for each types you want to import\n    #Folder : default, categorization, dates, ownership, settings\n    #News Item : default\n\n    Document: default\n\n    [settings]\n    #list here every csv settings that will be given to replicator.importcsv\n    encoding:utf-8\n    delimiter:,\n    stringdelimiter:\"\n    datetimeformat:%d/%m/%Y\n    wf_transition = publish\n    conflict_winner:SERVER\n\n    \"\"\"\n```\n\nSo you just have to drop replicata.csv and replicata.cfg files in your profile to be able to import contents in your Plone site. An other way of doing, is to create the content with Plone, then export it, and save the file in your profile.\n\n## PloneKeywordManager\n\nI have done the same with PloneKeywordManager. There is a new import step named 'keywords'. It reads a 'keywords.txt' file in the current profile, and creates a document called 'keywords'. The file must have one keyword per line. It is simple and it works.\n\nNote: To use this you need to use the SVN collective trunk version at the moment but they will be released soon.\n\n## Portlet?\n\nNow I'm trying to make the same thing with portlets but I don't have any idea how to do this. If anyone has ideas about this, please mail me, I would be glad to implement it!","src/content/posts/2009-11-17-import.md","43412abf48666df6",{"html":480,"metadata":481},"\u003Cp>I really like GenericSetup to build Plone instances.\u003C/p>\n\u003Cp>But, I was not able to do some things like set up contents (folders for structure, documents to make some example pages, etc.), keywords and portlets.\u003C/p>\n\u003Cp>Note: The default import structure step of Plone doesn’t do enough things for me, and I find it hard to use. So I have contributed to some third-party modules:\u003C/p>\n\u003Ch2 id=\"csvreplicata\">CSVReplicata\u003C/h2>\n\u003Cp>csvreplicata first give you a way to import/export content within the csv file format. So you can import/export atcontent types (and more) with it. I have added a csvimportStep to be able to use it with genericsetup:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">def\u003C/span>\u003Cspan style=\"color:#A6E22E\"> importcsvStep\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">context\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"\"\"This step give you a way to import content in your website with\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    csvreplicata.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    How it works:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    read replicata.cfg file to load configuration\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    read replicata.csv and call csvreplicata with the config.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    Config:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    [replicable_types]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    #List schemata for each types you want to import\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    #Folder : default, categorization, dates, ownership, settings\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    #News Item : default\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    Document: default\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    [settings]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    #list here every csv settings that will be given to replicator.importcsv\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    encoding:utf-8\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    delimiter:,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    stringdelimiter:\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    datetimeformat:%d/%m/%Y\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    wf_transition = publish\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    conflict_winner:SERVER\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"\"\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>So you just have to drop replicata.csv and replicata.cfg files in your profile to be able to import contents in your Plone site. An other way of doing, is to create the content with Plone, then export it, and save the file in your profile.\u003C/p>\n\u003Ch2 id=\"plonekeywordmanager\">PloneKeywordManager\u003C/h2>\n\u003Cp>I have done the same with PloneKeywordManager. There is a new import step named ‘keywords’. It reads a ‘keywords.txt’ file in the current profile, and creates a document called ‘keywords’. The file must have one keyword per line. It is simple and it works.\u003C/p>\n\u003Cp>Note: To use this you need to use the SVN collective trunk version at the moment but they will be released soon.\u003C/p>\n\u003Ch2 id=\"portlet\">Portlet?\u003C/h2>\n\u003Cp>Now I’m trying to make the same thing with portlets but I don’t have any idea how to do this. If anyone has ideas about this, please mail me, I would be glad to implement it!\u003C/p>",{"headings":482,"localImagePaths":492,"remoteImagePaths":493,"frontmatter":494,"imagePaths":498},[483,486,489],{"depth":449,"slug":484,"text":485},"csvreplicata","CSVReplicata",{"depth":449,"slug":487,"text":488},"plonekeywordmanager","PloneKeywordManager",{"depth":449,"slug":490,"text":491},"portlet","Portlet?",[],[],{"title":472,"categories":495,"tags":496,"date":497},[17],[87],["Date","2009-11-17T00:00:00.000Z"],[],"2009-11-17-import.md","2009-11-30-remove",{"id":500,"data":502,"body":507,"filePath":508,"digest":509,"rendered":510,"legacyId":521},{"title":503,"date":504,"categories":505,"tags":506,"lang":17},"collective.remove",["Date","2009-11-30T00:00:00.000Z"],[17],[87],"Plone has lots of features. collective.remove is a project to remove some features from Plone and be useful to integrators.\n\nWhy? My customers don't need them and for performance purposes, it's good to remove things not used.\n\nWhat? This project has three eggs at the moment:\n\n* collective.remove.kss\n* collective.remove.kupu\n* collective.remove.rules\n\nTo know what to remove, it's per project need. For example, I'm using TinyMCE on my last project, so I have removed Kupu. Vincent Fretin tells me the rules tab permission check is slow and I don't need it. Limi has tweeted that KSS makes Plone slower so I have removed it.\n\nThe goal is to remove one thing at a time when a feature is not needed. Most of the time I was doing this in the policy but I have written the same thing multiple times, so let's release it in a reusable package.\n\nIt is more than uninstall profiles. It is uninstall packages.","src/content/posts/2009-11-30-remove.md","9dfc44c4342b77f1",{"html":511,"metadata":512},"\u003Cp>Plone has lots of features. collective.remove is a project to remove some features from Plone and be useful to integrators.\u003C/p>\n\u003Cp>Why? My customers don’t need them and for performance purposes, it’s good to remove things not used.\u003C/p>\n\u003Cp>What? This project has three eggs at the moment:\u003C/p>\n\u003Cul>\n\u003Cli>collective.remove.kss\u003C/li>\n\u003Cli>collective.remove.kupu\u003C/li>\n\u003Cli>collective.remove.rules\u003C/li>\n\u003C/ul>\n\u003Cp>To know what to remove, it’s per project need. For example, I’m using TinyMCE on my last project, so I have removed Kupu. Vincent Fretin tells me the rules tab permission check is slow and I don’t need it. Limi has tweeted that KSS makes Plone slower so I have removed it.\u003C/p>\n\u003Cp>The goal is to remove one thing at a time when a feature is not needed. Most of the time I was doing this in the policy but I have written the same thing multiple times, so let’s release it in a reusable package.\u003C/p>\n\u003Cp>It is more than uninstall profiles. It is uninstall packages.\u003C/p>",{"headings":513,"localImagePaths":514,"remoteImagePaths":515,"frontmatter":516,"imagePaths":520},[],[],[],{"title":503,"categories":517,"tags":518,"date":519},[17],[87],["Date","2009-11-30T00:00:00.000Z"],[],"2009-11-30-remove.md","2010-01-06-doctest",{"id":522,"data":524,"body":529,"filePath":530,"digest":531,"rendered":532,"legacyId":543},{"title":525,"date":526,"categories":527,"tags":528,"lang":17},"Functional doctest snippet of the day",["Date","2010-01-06T00:00:00.000Z"],[17],[352],"I was looking for an easy way to get the current browser.contents in my real browser to easily debug what is happening in my doctest.\n\nHere is the snippet:\n\nUpdated on 01/13/2009\n\n```python\n>>> import tempfile as tmp\n>>> def contents():\n...    fd, fn = tmp.mkstemp(suffix=\".html\", prefix=\"testbrowser-\")\n...    file = open(fn, 'w')\n...    file.write(browser.contents)\n...    file.close()\n...    print fn\n>>> import pdb; pdb.set_trace()\n```\n\nSo now you can just call contents() and copy-paste the file path in your real browser and see what's happening in your tests. Maybe it can be added to testbrowser.Browser?","src/content/posts/2010-01-06-doctest.md","fa20c53e35ef0bb8",{"html":533,"metadata":534},"\u003Cp>I was looking for an easy way to get the current browser.contents in my real browser to easily debug what is happening in my doctest.\u003C/p>\n\u003Cp>Here is the snippet:\u003C/p>\n\u003Cp>Updated on 01/13/2009\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">>>>\u003C/span>\u003Cspan style=\"color:#F92672\"> import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> tempfile \u003C/span>\u003Cspan style=\"color:#F92672\">as\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> tmp\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">>>>\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> def\u003C/span>\u003Cspan style=\"color:#A6E22E\"> contents\u003C/span>\u003Cspan style=\"color:#F8F8F2\">():\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">    fd, fn \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> tmp.mkstemp(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">suffix\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\".html\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">prefix\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"testbrowser-\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">    file \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#66D9EF\"> open\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(fn, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'w'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">    file.write(browser.contents)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">    file.close()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">...\u003C/span>\u003Cspan style=\"color:#66D9EF\">    print\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> fn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">>>>\u003C/span>\u003Cspan style=\"color:#F92672\"> import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> pdb; pdb.set_trace()\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>So now you can just call contents() and copy-paste the file path in your real browser and see what’s happening in your tests. Maybe it can be added to testbrowser.Browser?\u003C/p>",{"headings":535,"localImagePaths":536,"remoteImagePaths":537,"frontmatter":538,"imagePaths":542},[],[],[],{"title":525,"categories":539,"tags":540,"date":541},[17],[352],["Date","2010-01-06T00:00:00.000Z"],[],"2010-01-06-doctest.md","2010-06-15-sendmail",{"id":544,"data":546,"body":551,"filePath":552,"digest":553,"rendered":554,"legacyId":565},{"title":547,"date":548,"categories":549,"tags":550,"lang":17},"How to add a random time between two emails sent from zope.sendmail",["Date","2010-06-15T00:00:00.000Z"],[17],[87],"I’m using collective.dancing for a mass mailing: +8000 emails to send.\n\nOne of the questions is how to not be blacklisted? A first thing I have done today is to add a random time between two sends.\n\nTo achieve this I have read the code of zope.sendmail. It is a well-documented egg so it is not hard to understand how it works:\n\n* A maildir (a directory) stores mails in files ready to be sent\n* A mailer (a utility) is ready to be called to send emails one by one\n* A queue mail delivery (utility) is ready to put messages inside a maildir\n* A mailqueue processor (not a component, a thread implementation) parses every 3 seconds if there are new emails to send in the mailbox\n\nSo to achieve this you just have to unconfigure the plone.smtp utility and declare a new utility called plone.smtp with this code:\n\n```python\nimport random\nimport time\n\nfrom zope.sendmail import mailer\n\nclass SMTP(mailer.SMTPMailer):\n    \"\"\"Override SMTPMailer to let a random time\"\"\"\n\n    def send(self, fromaddr, toaddrs, message):\n        time.sleep(random.uniform(0,2))\n        super(SMTP, self).send(fromaddr, toaddrs, message)\n```\n\nIt’s working !","src/content/posts/2010-06-15-sendmail.md","7c74a8bbb66866c8",{"html":555,"metadata":556},"\u003Cp>I’m using collective.dancing for a mass mailing: +8000 emails to send.\u003C/p>\n\u003Cp>One of the questions is how to not be blacklisted? A first thing I have done today is to add a random time between two sends.\u003C/p>\n\u003Cp>To achieve this I have read the code of zope.sendmail. It is a well-documented egg so it is not hard to understand how it works:\u003C/p>\n\u003Cul>\n\u003Cli>A maildir (a directory) stores mails in files ready to be sent\u003C/li>\n\u003Cli>A mailer (a utility) is ready to be called to send emails one by one\u003C/li>\n\u003Cli>A queue mail delivery (utility) is ready to put messages inside a maildir\u003C/li>\n\u003Cli>A mailqueue processor (not a component, a thread implementation) parses every 3 seconds if there are new emails to send in the mailbox\u003C/li>\n\u003C/ul>\n\u003Cp>So to achieve this you just have to unconfigure the plone.smtp utility and declare a new utility called plone.smtp with this code:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> random\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> time\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> zope.sendmail \u003C/span>\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> mailer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">class\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">SMTP\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#A6E22E;font-style:italic;text-decoration:underline\">mailer\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#A6E22E;font-style:italic;text-decoration:underline\">SMTPMailer\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"\"\"Override SMTPMailer to let a random time\"\"\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    def\u003C/span>\u003Cspan style=\"color:#A6E22E\"> send\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">fromaddr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">toaddrs\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">message\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        time.sleep(random.uniform(\u003C/span>\u003Cspan style=\"color:#AE81FF\">0\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003Cspan style=\"color:#AE81FF\">2\u003C/span>\u003Cspan style=\"color:#F8F8F2\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">        super\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#AE81FF\">SMTP\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">).send(fromaddr, toaddrs, message)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>It’s working !\u003C/p>",{"headings":557,"localImagePaths":558,"remoteImagePaths":559,"frontmatter":560,"imagePaths":564},[],[],[],{"title":547,"categories":561,"tags":562,"date":563},[17],[87],["Date","2010-06-15T00:00:00.000Z"],[],"2010-06-15-sendmail.md","2010-02-17-cms",{"id":566,"data":568,"body":573,"filePath":574,"digest":575,"rendered":576,"legacyId":587},{"title":569,"date":570,"categories":571,"tags":572,"lang":17},"A more simple editorial process in Plone",["Date","2010-02-17T00:00:00.000Z"],[17],[87],"For a project I have tried to create a simpler editorial process for Plone. To understand this you have first to know the normal editorial process of Plone:\n\n* First you have to go to the folder where you want to add your article.\n* Next you click on add an article\n* You fill the form (content + categorization)\n* Finally you publish your article.\n\nPages are created with topics to fake publication of one article in multiple sections.\n\nContents are stored like on a computer: inside folders.\n\nIn many projects this is a pain because the writer must first think about \"where will I add this article\".\n\nSo here is the idea. Remove the first step and simply use a link \"add article\" available anywhere in the site.\n\nThe way to achieve this is to create one “database” (large plone folder) per content type and add one action category with all “add xxx” actions + a portlet. At the moment I initialise this in policy.\n\nNow we are able to create articles without that first step. We need to know: How to keep my tree that makes such nice URLs with Plone? Let me introduce you to the magic \"acquisition\" used with topics: collective.inplacetopicview.\n\nA topic is like a persistent search done in Plone. The webmaster adds criteria, and the display is like folders but links point to the real destination where the article has been added. This adds a real issue when you add contextual theming inside Plone. The user can be very surprised if just by clicking on an article link they move outside the current context (so theme can change).\n\nWith inplacetopicview the link has a different behavior. When you click you just stay in the current context so the theme just stays the same.\n\nThere are different ways to achieve this. inplacetopicview doesn't add any new content type or whatsoever, it just adds some new views that let your visitor stay in the context of the topic but in different ways:\n* With acquisition (domain.com/mytopic/articles/myarticle with myarticle real path = /myplone/articles/myarticle)\n* With beautifulsoup by rendering both article and topic, and replacing the content of the topic with the content of the article.\n\nThere are some other ideas to implement in inplacetopicview like\n\n* Ajax\n* Popup\n\nNow let's try it by installing collective.inplacetopicview and adding an initial structure with transmogrifier in your profile.\n\nThis process is not perfect but it is one first step done. For example, image content handled through wysiwyg editor needs customization. The breadcrumb shows the real path.\n\nLet me know what you think of this process and if you have ideas to improve it.","src/content/posts/2010-02-17-cms.md","35ad4dd9c4a22538",{"html":577,"metadata":578},"\u003Cp>For a project I have tried to create a simpler editorial process for Plone. To understand this you have first to know the normal editorial process of Plone:\u003C/p>\n\u003Cul>\n\u003Cli>First you have to go to the folder where you want to add your article.\u003C/li>\n\u003Cli>Next you click on add an article\u003C/li>\n\u003Cli>You fill the form (content + categorization)\u003C/li>\n\u003Cli>Finally you publish your article.\u003C/li>\n\u003C/ul>\n\u003Cp>Pages are created with topics to fake publication of one article in multiple sections.\u003C/p>\n\u003Cp>Contents are stored like on a computer: inside folders.\u003C/p>\n\u003Cp>In many projects this is a pain because the writer must first think about “where will I add this article”.\u003C/p>\n\u003Cp>So here is the idea. Remove the first step and simply use a link “add article” available anywhere in the site.\u003C/p>\n\u003Cp>The way to achieve this is to create one “database” (large plone folder) per content type and add one action category with all “add xxx” actions + a portlet. At the moment I initialise this in policy.\u003C/p>\n\u003Cp>Now we are able to create articles without that first step. We need to know: How to keep my tree that makes such nice URLs with Plone? Let me introduce you to the magic “acquisition” used with topics: collective.inplacetopicview.\u003C/p>\n\u003Cp>A topic is like a persistent search done in Plone. The webmaster adds criteria, and the display is like folders but links point to the real destination where the article has been added. This adds a real issue when you add contextual theming inside Plone. The user can be very surprised if just by clicking on an article link they move outside the current context (so theme can change).\u003C/p>\n\u003Cp>With inplacetopicview the link has a different behavior. When you click you just stay in the current context so the theme just stays the same.\u003C/p>\n\u003Cp>There are different ways to achieve this. inplacetopicview doesn’t add any new content type or whatsoever, it just adds some new views that let your visitor stay in the context of the topic but in different ways:\u003C/p>\n\u003Cul>\n\u003Cli>With acquisition (domain.com/mytopic/articles/myarticle with myarticle real path = /myplone/articles/myarticle)\u003C/li>\n\u003Cli>With beautifulsoup by rendering both article and topic, and replacing the content of the topic with the content of the article.\u003C/li>\n\u003C/ul>\n\u003Cp>There are some other ideas to implement in inplacetopicview like\u003C/p>\n\u003Cul>\n\u003Cli>Ajax\u003C/li>\n\u003Cli>Popup\u003C/li>\n\u003C/ul>\n\u003Cp>Now let’s try it by installing collective.inplacetopicview and adding an initial structure with transmogrifier in your profile.\u003C/p>\n\u003Cp>This process is not perfect but it is one first step done. For example, image content handled through wysiwyg editor needs customization. The breadcrumb shows the real path.\u003C/p>\n\u003Cp>Let me know what you think of this process and if you have ideas to improve it.\u003C/p>",{"headings":579,"localImagePaths":580,"remoteImagePaths":581,"frontmatter":582,"imagePaths":586},[],[],[],{"title":569,"categories":583,"tags":584,"date":585},[17],[87],["Date","2010-02-17T00:00:00.000Z"],[],"2010-02-17-cms.md","2010-06-21-extract",{"id":588,"data":590,"body":595,"filePath":596,"digest":597,"rendered":598,"legacyId":609},{"title":591,"date":592,"categories":593,"tags":594,"lang":17},"Extract all images of your skin with a script to serve them by apache",["Date","2010-06-21T00:00:00.000Z"],[17],[87],"Following the \"Unloading Plone\" conference at Budapest last year, you may want to serve images from skin directly by Apache.\n\nTo do this you will need first to extract images. So here is a small Python script to help you:\n\n```python\nskintool = context.portal_skins\nskin = skintool.getDefaultSkin()\nPATHS = skintool.getSkinPath(skin).split(',')\n\nimages = skintool.ZopeFind(skintool, obj_metatypes=['Filesystem Image'],search_sub=1)\nimages_skin = [path for path, obj in images if path.split('/')[0] in PATHS and skintool.isFirstInSkin(path)]\n\nimages_str = \"\\n\".join(['/'.join(path.split('/')[1:]) for path,obj in images])\nprint \"You have extracted %s images. Here is the result:\"%(len(images_skin))\nprint images_str\nreturn printed\n```\n\nTo use it, you just have to go in the Zope Management Interface (ZMI), Add a Script (Python) with the drop-down menu and paste this script. Next you can execute it with the \"test\" tab or access it by its URL.\n\nWrite the content of the result page in a text file and then follow this blog post: http://www.makina-corpus.org/blog/use-rewritemap-prevent-proxying-some-static-contents\n\nHope this will help you to unload Plone.","src/content/posts/2010-06-21-extract.md","1cc6861ff5d0022f",{"html":599,"metadata":600},"\u003Cp>Following the “Unloading Plone” conference at Budapest last year, you may want to serve images from skin directly by Apache.\u003C/p>\n\u003Cp>To do this you will need first to extract images. So here is a small Python script to help you:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">skintool \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> context.portal_skins\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">skin \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> skintool.getDefaultSkin()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">PATHS\u003C/span>\u003Cspan style=\"color:#F92672\"> =\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> skintool.getSkinPath(skin).split(\u003C/span>\u003Cspan style=\"color:#E6DB74\">','\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">images \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> skintool.ZopeFind(skintool, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">obj_metatypes\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">[\u003C/span>\u003Cspan style=\"color:#E6DB74\">'Filesystem Image'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">],\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">search_sub\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#AE81FF\">1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">images_skin \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [path \u003C/span>\u003Cspan style=\"color:#F92672\">for\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> path, obj \u003C/span>\u003Cspan style=\"color:#F92672\">in\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> images \u003C/span>\u003Cspan style=\"color:#F92672\">if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> path.split(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'/'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)[\u003C/span>\u003Cspan style=\"color:#AE81FF\">0\u003C/span>\u003Cspan style=\"color:#F8F8F2\">] \u003C/span>\u003Cspan style=\"color:#F92672\">in\u003C/span>\u003Cspan style=\"color:#AE81FF\"> PATHS\u003C/span>\u003Cspan style=\"color:#F92672\"> and\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> skintool.isFirstInSkin(path)]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">images_str \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"\u003C/span>\u003Cspan style=\"color:#AE81FF\">\\n\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.join([\u003C/span>\u003Cspan style=\"color:#E6DB74\">'/'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.join(path.split(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'/'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)[\u003C/span>\u003Cspan style=\"color:#AE81FF\">1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:]) \u003C/span>\u003Cspan style=\"color:#F92672\">for\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> path,obj \u003C/span>\u003Cspan style=\"color:#F92672\">in\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> images])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">print\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"You have extracted \u003C/span>\u003Cspan style=\"color:#AE81FF\">%s\u003C/span>\u003Cspan style=\"color:#E6DB74\"> images. Here is the result:\"\u003C/span>\u003Cspan style=\"color:#F92672\">%\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#66D9EF\">len\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(images_skin))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">print\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> images_str\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> printed\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>To use it, you just have to go in the Zope Management Interface (ZMI), Add a Script (Python) with the drop-down menu and paste this script. Next you can execute it with the “test” tab or access it by its URL.\u003C/p>\n\u003Cp>Write the content of the result page in a text file and then follow this blog post: \u003Ca href=\"http://www.makina-corpus.org/blog/use-rewritemap-prevent-proxying-some-static-contents\">http://www.makina-corpus.org/blog/use-rewritemap-prevent-proxying-some-static-contents\u003C/a>\u003C/p>\n\u003Cp>Hope this will help you to unload Plone.\u003C/p>",{"headings":601,"localImagePaths":602,"remoteImagePaths":603,"frontmatter":604,"imagePaths":608},[],[],[],{"title":591,"categories":605,"tags":606,"date":607},[17],[87],["Date","2010-06-21T00:00:00.000Z"],[],"2010-06-21-extract.md","2010-07-10-nmd",{"id":610,"data":612,"body":618,"filePath":619,"digest":620,"rendered":621,"legacyId":644},{"title":613,"date":614,"categories":615,"tags":616,"lang":17},"Nantes-developpement.com",["Date","2010-07-10T00:00:00.000Z"],[17],[617,87],"réalisation","I'm proud to announce it, the new website of \"The Greater Nantes Economic Agency\" is now available here: http://www.nantes-developpement.com.\n\nThis website uses Plone with some community add-ons (available on PyPI). Some of these are new, meaning they have been created to fit the customer needs, others have been contributed, meaning they have been modified upstream, and the last have just been used:\n\n* collective.z3cform.norobots [new]\n* collective.groupdashboard [used]\n* collective.gallery [new]\n* collective.dewplayer [new]\n* collective.portlet.actions [used]\n* collective.portlet.contact [new]\n* collective.portlet.feedmixer [used]\n* qi.portlet.TagClouds [contributed]\n* collective.plonebookmarklets [contributed]\n* collective.singing & collective.dancing [contributed]\n* collective.contentlicensing [contributed]\n* nmd.plonelinkasvideoembed [new]\n* archetypes.uploadreferencewidget [contributed]\n* babel [used]\n* collective.autopermission [used]\n* collective.contentrules.mail [used]\n* collective.harlequin [new]\n* collective.monkeypatcher [used]\n* collective.z3cform.grok [new]\n* collective.z3cform.norobots [new]\n* Products.Maps [contributed]\n* Products.PloneFormGen [contributed]\n* Products.TinyMCE [contributed]\n* Products.TextIndexNG3 [used]\n* Products.CompoundField [contributed]\n* Products.ZNagios [used]\n* five.grok [used]\n* experimental.contentcreation [used]\n* experimental.aggressiveopaquespeedup [new]\n* collective.remove.kss [new]\n* collective.remove.kupu [new]\n* collective.remove.rules [new]\n* Products.CacheSetup [used]\n* Products.MemcachedManager [used]\n* plone.app.ldap [used]\n* iw.fss [used]\n* Relstorage [used]\n\nCustom code contains:\n\n* the theme done as a usual plonetheme (not with xdv).\n* policy (integration of all community add-ons and plone configuration)\n* portlets\n* content-types (collection, folderish document, video/audio interview, …)\n\n## System architecture\n\nWe have Apache2 in front end. Next we have Varnish as proxy cache (but not load balancer). Configuration has been taken from Products.PloneOrg Subversion. It is already compatible with Varnish 2.1.2\n\nNext we have HAProxy as load balancer that dispatches requests over 4 Zope instances. Each Zope instance is configured with 2 threads (Zope default configuration is 4 threads).\n\nFor the database we use RelStorage with PostgreSQL, iw.fss to store files on the server's file system and OpenLDAP to store users.\n\n## Monitoring & maintenance\n\nWe use Nagios & Cacti to monitor all services. We have split services into two categories:\n\n* system services: apache, postgresql, memcached, ldap\n* app services: varnish, haproxy, zope\n\nThis has some advantages: You can deploy the application without system services. This has been possible with buildout because it is very flexible. Supervisord and HAProxy have just been taken from the über buildout.\n\nRelStorage has a script to export the database to any database format: MySQL, FileStorage (Data.fs) or whatever you want. So we use a script every night just after the backup to build a File Storage \"Data.fs\", so any developer can work without having to install system services and has the latest database available. It is easier to work on bugs when you have the content produced by the customer.\n\n## What I would like to improve/add to Plone this year\n\nFor sure after a project like this one, I would like to contribute to Plone, share my experience. Here it is.\n\nportlets dynamic template: I would like to be able to register new templates to provide multiple choices of portlet display. As you can choose how a content is displayed with dynamic view FTI feature, you should be able to choose how a portlet is displayed. I overrode collection and static portlet just to do that.\n\nportlets order: I want to have first portlet for users & groups, next portlet for content types and next contextual portlets. To achieve this I overrode portlet mechanism because it was hardcoded.\n\n## Performances\n\nPlone 3 is slow. Right, but it is great. So how can I create a site with traffic and a newsletter of 8300 subscribers? Here are my keys:\n\ninstall experimental add-ons listed below\ninstall cachesetup with Varnish as proxy cache and configure both (debug is easy with Wireshark & Firebug)\nconfiguration of Zope: 2 threads, object cache and jarn.checkinterval\nexternalize binary content: fss is the best for Plone 3. Use blob for Plone 4\ncollective.solr: I have tried out Solr but I was not satisfied: some Plone features are broken\nadd one instance only to deliver the newsletter. This one can not be reached by request, only the clock server\nBecause we followed the way Plone community does websites, we succeeded in creating a great website with only free (GNU & BSD) software. We are working on Linux desktop and we produce only free software because we love this.\n\nThe buildout used to deploy this website has been pushed to the collective Subversion under the name of nmd. Feel free to use it, to contribute, to share ideas. It has been designed to be usable in offline mode, and built upon reusable pieces depending on what you want.\n\nI would like to thank the community for help, efforts, bug fixes and all great add-ons that have been created. I would like to thank nantes-developpement.com for this experience and their warm welcome of Plone.","src/content/posts/2010-07-10-nmd.md","e65efc5923df05ac",{"html":622,"metadata":623},"\u003Cp>I’m proud to announce it, the new website of “The Greater Nantes Economic Agency” is now available here: \u003Ca href=\"http://www.nantes-developpement.com\">http://www.nantes-developpement.com\u003C/a>.\u003C/p>\n\u003Cp>This website uses Plone with some community add-ons (available on PyPI). Some of these are new, meaning they have been created to fit the customer needs, others have been contributed, meaning they have been modified upstream, and the last have just been used:\u003C/p>\n\u003Cul>\n\u003Cli>collective.z3cform.norobots [new]\u003C/li>\n\u003Cli>collective.groupdashboard [used]\u003C/li>\n\u003Cli>collective.gallery [new]\u003C/li>\n\u003Cli>collective.dewplayer [new]\u003C/li>\n\u003Cli>collective.portlet.actions [used]\u003C/li>\n\u003Cli>collective.portlet.contact [new]\u003C/li>\n\u003Cli>collective.portlet.feedmixer [used]\u003C/li>\n\u003Cli>qi.portlet.TagClouds [contributed]\u003C/li>\n\u003Cli>collective.plonebookmarklets [contributed]\u003C/li>\n\u003Cli>collective.singing &#x26; collective.dancing [contributed]\u003C/li>\n\u003Cli>collective.contentlicensing [contributed]\u003C/li>\n\u003Cli>nmd.plonelinkasvideoembed [new]\u003C/li>\n\u003Cli>archetypes.uploadreferencewidget [contributed]\u003C/li>\n\u003Cli>babel [used]\u003C/li>\n\u003Cli>collective.autopermission [used]\u003C/li>\n\u003Cli>collective.contentrules.mail [used]\u003C/li>\n\u003Cli>collective.harlequin [new]\u003C/li>\n\u003Cli>collective.monkeypatcher [used]\u003C/li>\n\u003Cli>collective.z3cform.grok [new]\u003C/li>\n\u003Cli>collective.z3cform.norobots [new]\u003C/li>\n\u003Cli>Products.Maps [contributed]\u003C/li>\n\u003Cli>Products.PloneFormGen [contributed]\u003C/li>\n\u003Cli>Products.TinyMCE [contributed]\u003C/li>\n\u003Cli>Products.TextIndexNG3 [used]\u003C/li>\n\u003Cli>Products.CompoundField [contributed]\u003C/li>\n\u003Cli>Products.ZNagios [used]\u003C/li>\n\u003Cli>five.grok [used]\u003C/li>\n\u003Cli>experimental.contentcreation [used]\u003C/li>\n\u003Cli>experimental.aggressiveopaquespeedup [new]\u003C/li>\n\u003Cli>collective.remove.kss [new]\u003C/li>\n\u003Cli>collective.remove.kupu [new]\u003C/li>\n\u003Cli>collective.remove.rules [new]\u003C/li>\n\u003Cli>Products.CacheSetup [used]\u003C/li>\n\u003Cli>Products.MemcachedManager [used]\u003C/li>\n\u003Cli>plone.app.ldap [used]\u003C/li>\n\u003Cli>iw.fss [used]\u003C/li>\n\u003Cli>Relstorage [used]\u003C/li>\n\u003C/ul>\n\u003Cp>Custom code contains:\u003C/p>\n\u003Cul>\n\u003Cli>the theme done as a usual plonetheme (not with xdv).\u003C/li>\n\u003Cli>policy (integration of all community add-ons and plone configuration)\u003C/li>\n\u003Cli>portlets\u003C/li>\n\u003Cli>content-types (collection, folderish document, video/audio interview, …)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"system-architecture\">System architecture\u003C/h2>\n\u003Cp>We have Apache2 in front end. Next we have Varnish as proxy cache (but not load balancer). Configuration has been taken from Products.PloneOrg Subversion. It is already compatible with Varnish 2.1.2\u003C/p>\n\u003Cp>Next we have HAProxy as load balancer that dispatches requests over 4 Zope instances. Each Zope instance is configured with 2 threads (Zope default configuration is 4 threads).\u003C/p>\n\u003Cp>For the database we use RelStorage with PostgreSQL, iw.fss to store files on the server’s file system and OpenLDAP to store users.\u003C/p>\n\u003Ch2 id=\"monitoring--maintenance\">Monitoring &#x26; maintenance\u003C/h2>\n\u003Cp>We use Nagios &#x26; Cacti to monitor all services. We have split services into two categories:\u003C/p>\n\u003Cul>\n\u003Cli>system services: apache, postgresql, memcached, ldap\u003C/li>\n\u003Cli>app services: varnish, haproxy, zope\u003C/li>\n\u003C/ul>\n\u003Cp>This has some advantages: You can deploy the application without system services. This has been possible with buildout because it is very flexible. Supervisord and HAProxy have just been taken from the über buildout.\u003C/p>\n\u003Cp>RelStorage has a script to export the database to any database format: MySQL, FileStorage (Data.fs) or whatever you want. So we use a script every night just after the backup to build a File Storage “Data.fs”, so any developer can work without having to install system services and has the latest database available. It is easier to work on bugs when you have the content produced by the customer.\u003C/p>\n\u003Ch2 id=\"what-i-would-like-to-improveadd-to-plone-this-year\">What I would like to improve/add to Plone this year\u003C/h2>\n\u003Cp>For sure after a project like this one, I would like to contribute to Plone, share my experience. Here it is.\u003C/p>\n\u003Cp>portlets dynamic template: I would like to be able to register new templates to provide multiple choices of portlet display. As you can choose how a content is displayed with dynamic view FTI feature, you should be able to choose how a portlet is displayed. I overrode collection and static portlet just to do that.\u003C/p>\n\u003Cp>portlets order: I want to have first portlet for users &#x26; groups, next portlet for content types and next contextual portlets. To achieve this I overrode portlet mechanism because it was hardcoded.\u003C/p>\n\u003Ch2 id=\"performances\">Performances\u003C/h2>\n\u003Cp>Plone 3 is slow. Right, but it is great. So how can I create a site with traffic and a newsletter of 8300 subscribers? Here are my keys:\u003C/p>\n\u003Cp>install experimental add-ons listed below\ninstall cachesetup with Varnish as proxy cache and configure both (debug is easy with Wireshark &#x26; Firebug)\nconfiguration of Zope: 2 threads, object cache and jarn.checkinterval\nexternalize binary content: fss is the best for Plone 3. Use blob for Plone 4\ncollective.solr: I have tried out Solr but I was not satisfied: some Plone features are broken\nadd one instance only to deliver the newsletter. This one can not be reached by request, only the clock server\nBecause we followed the way Plone community does websites, we succeeded in creating a great website with only free (GNU &#x26; BSD) software. We are working on Linux desktop and we produce only free software because we love this.\u003C/p>\n\u003Cp>The buildout used to deploy this website has been pushed to the collective Subversion under the name of nmd. Feel free to use it, to contribute, to share ideas. It has been designed to be usable in offline mode, and built upon reusable pieces depending on what you want.\u003C/p>\n\u003Cp>I would like to thank the community for help, efforts, bug fixes and all great add-ons that have been created. I would like to thank nantes-developpement.com for this experience and their warm welcome of Plone.\u003C/p>",{"headings":624,"localImagePaths":637,"remoteImagePaths":638,"frontmatter":639,"imagePaths":643},[625,628,631,634],{"depth":449,"slug":626,"text":627},"system-architecture","System architecture",{"depth":449,"slug":629,"text":630},"monitoring--maintenance","Monitoring & maintenance",{"depth":449,"slug":632,"text":633},"what-i-would-like-to-improveadd-to-plone-this-year","What I would like to improve/add to Plone this year",{"depth":449,"slug":635,"text":636},"performances","Performances",[],[],{"title":613,"categories":640,"tags":641,"date":642},[17],[617,87],["Date","2010-07-10T00:00:00.000Z"],[],"2010-07-10-nmd.md","2009-03-03-zope3",{"id":645,"data":647,"body":653,"filePath":654,"digest":655,"rendered":656,"legacyId":667},{"title":648,"date":649,"categories":650,"tags":651,"lang":17},"Build a zope 3.4 with Postgresql and YUI framework & get ready to work with",["Date","2009-03-03T00:00:00.000Z"],[17],[652],"zope","I just want to try to make a simple application with the best of current open-source technologies. I'll give it a try with these ones:\n\n* Python 2.5\n* Zope 3.4\n* PostgreSQL 8.3\n* SQLAlchemy 0.5\n* YUI 2.7\n* ZODB in PostgreSQL with RelStorage\n\nI have taken an hour to install this on my laptop, with the excellent virtualenv to build a copy of an already installed Python in a directory.\n\n    /path/2/python/bin/virtualenv --no-site-packages /path/2/project\n\nNext, I have used zopeproject to install the latest Zope 3 technologies. Now zopeproject uses the KGS to set the version of eggs to use.\n\n```\ncd  /path/2/project\nsource bin/activate\neasy_install zopeproject\nzopeproject myproject\n```\n\nYou get it, you have the latest release of Zope 3.4. Now add the eggs you want to use\n\n```ini\neggs = ...\n       psycopg2\n       RelStorage\n       ore.alchemist\n       hurry.zopeyui\n       z3c.form\n#       chameleon.zpt require zope.i18n > 3.4\n```\n\nmodify your zope.conf to configure RelStorage:\n\n```xml\n%import relstorage\n\u003Czodb>\n  \u003Crelstorage>\n    \u003Cpostgresql>\n      # The dsn is optional, as are each of the parameters in the dsn.\n      dsn dbname='zope' user='zope' host='localhost'\n    \u003C/postgresql>\n  \u003C/relstorage>\n\u003C/zodb>\n```\n\nNow, you've got your Zope 3.4 running on Python 2.5 and storing the ZODB data in PostgreSQL. I have lost most of the time on RelStorage and PostgreSQL configuration. I'm ready to work with all those technologies.\n\nI will work on making a simple blog in pure Zope 3, and next I will try to make the same application with SQLAlchemy.","src/content/posts/2009-03-03-zope3.md","d38347df081597fc",{"html":657,"metadata":658},"\u003Cp>I just want to try to make a simple application with the best of current open-source technologies. I’ll give it a try with these ones:\u003C/p>\n\u003Cul>\n\u003Cli>Python 2.5\u003C/li>\n\u003Cli>Zope 3.4\u003C/li>\n\u003Cli>PostgreSQL 8.3\u003C/li>\n\u003Cli>SQLAlchemy 0.5\u003C/li>\n\u003Cli>YUI 2.7\u003C/li>\n\u003Cli>ZODB in PostgreSQL with RelStorage\u003C/li>\n\u003C/ul>\n\u003Cp>I have taken an hour to install this on my laptop, with the excellent virtualenv to build a copy of an already installed Python in a directory.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>/path/2/python/bin/virtualenv --no-site-packages /path/2/project\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Next, I have used zopeproject to install the latest Zope 3 technologies. Now zopeproject uses the KGS to set the version of eggs to use.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>cd  /path/2/project\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>source bin/activate\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>easy_install zopeproject\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>zopeproject myproject\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>You get it, you have the latest release of Zope 3.4. Now add the eggs you want to use\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"ini\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">eggs\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> = ...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">       psycopg2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">       RelStorage\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">       ore.alchemist\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">       hurry.zopeyui\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">       z3c.form\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">#       chameleon.zpt require zope.i18n > 3.4\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>modify your zope.conf to configure RelStorage:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"xml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">%import relstorage\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">zodb\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  &#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">relstorage\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">postgresql\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      # The dsn is optional, as are each of the parameters in the dsn.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      dsn dbname='zope' user='zope' host='localhost'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">postgresql\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  &#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">relstorage\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">zodb\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now, you’ve got your Zope 3.4 running on Python 2.5 and storing the ZODB data in PostgreSQL. I have lost most of the time on RelStorage and PostgreSQL configuration. I’m ready to work with all those technologies.\u003C/p>\n\u003Cp>I will work on making a simple blog in pure Zope 3, and next I will try to make the same application with SQLAlchemy.\u003C/p>",{"headings":659,"localImagePaths":660,"remoteImagePaths":661,"frontmatter":662,"imagePaths":666},[],[],[],{"title":648,"categories":663,"tags":664,"date":665},[17],[652],["Date","2009-03-03T00:00:00.000Z"],[],"2009-03-03-zope3.md","2011-02-10-itemview",{"id":668,"data":670,"body":675,"filePath":676,"digest":677,"rendered":678,"legacyId":689},{"title":671,"date":672,"categories":673,"tags":674,"lang":17},"collective.portlet.itemview",["Date","2011-02-10T00:00:00.000Z"],[17],[87],"The idea is simple. Let Plone manage the content and the portlet be simply a small browser view.\n\nPlone is content-centric, but a web page needs to display more than the current content. This is why I have created this add-on. The add form lets you choose one content item (like in the collection portlet) and a view mode. The default view covers all Plone content types.\n\nThere are many examples to cover, to show you how simple it is to use and to add support for.\nI have already added conditional support with collective.gallery. So now you can choose a content item to act as a gallery in a portlet (link, folder or topic + 'Gallery' view in Itemview portlet). The same has been done on nmd.plonelinkasvideoembed, so you can publish a video from a link content item.\n\nComments and feedback are welcome!\n\n[collective.portlet.itemview](http://pypi.python.org/pypi/collective.portlet.itemview) package is on PyPI!","src/content/posts/2011-02-10-itemview.md","f51e8006f725c777",{"html":679,"metadata":680},"\u003Cp>The idea is simple. Let Plone manage the content and the portlet be simply a small browser view.\u003C/p>\n\u003Cp>Plone is content-centric, but a web page needs to display more than the current content. This is why I have created this add-on. The add form lets you choose one content item (like in the collection portlet) and a view mode. The default view covers all Plone content types.\u003C/p>\n\u003Cp>There are many examples to cover, to show you how simple it is to use and to add support for.\nI have already added conditional support with collective.gallery. So now you can choose a content item to act as a gallery in a portlet (link, folder or topic + ‘Gallery’ view in Itemview portlet). The same has been done on nmd.plonelinkasvideoembed, so you can publish a video from a link content item.\u003C/p>\n\u003Cp>Comments and feedback are welcome!\u003C/p>\n\u003Cp>\u003Ca href=\"http://pypi.python.org/pypi/collective.portlet.itemview\">collective.portlet.itemview\u003C/a> package is on PyPI!\u003C/p>",{"headings":681,"localImagePaths":682,"remoteImagePaths":683,"frontmatter":684,"imagePaths":688},[],[],[],{"title":671,"categories":685,"tags":686,"date":687},[17],[87],["Date","2011-02-10T00:00:00.000Z"],[],"2011-02-10-itemview.md","2011-09-22-fr-actualites-collectivegallery-10-and-its-future9340",{"id":690,"data":692,"body":700,"filePath":701,"digest":702,"rendered":703,"legacyId":714},{"title":693,"date":694,"categories":695,"tags":697,"lang":17},"collective.gallery 1.0 et 2.X",["Date","2011-09-22T00:00:00.000Z"],[696],"fr",[87,698,699],"module","gallery","Je viens juste de sortir la première version officiellement stable 1.0.\n\nUn peu d'histoire pour commencer. Ce module a été commencé en 2009. J'avais choisi Galleriffic comme plugin jQuery pour réaliser une UI parce que c'était le seul à me permettre d'afficher un album ayant plus de 300 photos. Ensuite j'avais choisi Picasaweb comme mode de stockage pour les fonctionnalités et aussi parce que c'est Google.\n\nAujourd'hui collective.gallery peut afficher des photos fournies par un dossier, une collection, mais aussi par Facebook, Flickr et Picasaweb au travers du type de contenu lien.\n\nPlan pour la 2.0. Faire une super jolie galerie de photos n'est pas chose simple. En effet les photos sont des éléments à tailles fixes alors que Plone propose une interface fluide par défaut. De plus la réalisation d'un site web ne permet pas de prédire la largeur qui sera disponible. Rendre ceci configurable page par page serait juste un enfer pour tout le monde.\n\nC'est pourquoi collective.gallery ne sera pas fourni avec une interface d'affichage dans sa version 2.0. Cependant vous aurez juste à choisir une de celles disponible:\n\ncollective.galleriffic\ncollective.galleria\ncollective.gallery deviendra donc un fournisseur de photos utilisant les types de contenu de Plone avec une bonne documentation sur comment réaliser une interface graphique rapidement.","src/content/posts/2011-09-22-fr-actualites-collective.gallery-1.0-and-its-future9340.md","a08fe947f8b50033",{"html":704,"metadata":705},"\u003Cp>Je viens juste de sortir la première version officiellement stable 1.0.\u003C/p>\n\u003Cp>Un peu d’histoire pour commencer. Ce module a été commencé en 2009. J’avais choisi Galleriffic comme plugin jQuery pour réaliser une UI parce que c’était le seul à me permettre d’afficher un album ayant plus de 300 photos. Ensuite j’avais choisi Picasaweb comme mode de stockage pour les fonctionnalités et aussi parce que c’est Google.\u003C/p>\n\u003Cp>Aujourd’hui collective.gallery peut afficher des photos fournies par un dossier, une collection, mais aussi par Facebook, Flickr et Picasaweb au travers du type de contenu lien.\u003C/p>\n\u003Cp>Plan pour la 2.0. Faire une super jolie galerie de photos n’est pas chose simple. En effet les photos sont des éléments à tailles fixes alors que Plone propose une interface fluide par défaut. De plus la réalisation d’un site web ne permet pas de prédire la largeur qui sera disponible. Rendre ceci configurable page par page serait juste un enfer pour tout le monde.\u003C/p>\n\u003Cp>C’est pourquoi collective.gallery ne sera pas fourni avec une interface d’affichage dans sa version 2.0. Cependant vous aurez juste à choisir une de celles disponible:\u003C/p>\n\u003Cp>collective.galleriffic\ncollective.galleria\ncollective.gallery deviendra donc un fournisseur de photos utilisant les types de contenu de Plone avec une bonne documentation sur comment réaliser une interface graphique rapidement.\u003C/p>",{"headings":706,"localImagePaths":707,"remoteImagePaths":708,"frontmatter":709,"imagePaths":713},[],[],[],{"title":693,"categories":710,"tags":711,"date":712},[696],[87,698,699],["Date","2011-09-22T00:00:00.000Z"],[],"2011-09-22-fr-actualites-collective.gallery-1.0-and-its-future9340.md","2011-09-21-fr-articles-comment-tester-un-module-plone-en-10-minutes",{"id":715,"data":717,"body":722,"filePath":723,"digest":724,"rendered":725,"legacyId":756},{"title":718,"date":719,"categories":720,"tags":721,"lang":17},"Comment tester un module Plone en 10 minutes",["Date","2011-09-21T00:00:00.000Z"],[696],[87],"# Introduction\n\nQuand on travaille avec un CMS, il est courant de vouloir tester un module\net de ne pas le faire par manque de temps. Ce que vous ne savez peut-être pas,\nc'est qu'un module peut être testé en 10 minutes.\n\n## Prérequis\n\nIl faut pour suivre ce tutoriel disposer d'un Python version 2.6 avec\nle nécessaire en dépendances (support SSL, tar, zip, libjpeg, ...)\n\nUn autre prérequis est de connaître l'adresse URL du dépôt de code utilisé\npour ce module. Avec Plone vous avez souvent:\n\n* [svn collective](https://svn.plone.org/collective/)\n* [github collective](https://github.com/collective)\n* un github privé\n\nSinon ce n'est pas bon signe, votre module ne fait pas partie de la communauté Plone.\n\n# Tutoriel\n\n## Initialisation (2 minutes)\n\nDisons que nous voulons tester collective.galleria\n\n    git clone https://github.com/collective/collective.galleria.git collective.galleria\n    python bootstrap.py\n    bin/buildout\n    bin/instance fg\n\nSi le module ne dispose pas des fichiers buildout.cfg et bootstrap.py c'est assez facile de les ajouter:\n\n    wget http://svn.zope.org/*checkout*/zc.buildout/trunk/bootstrap/bootstrap.py\n    wget https://github.com/collective/collective.googledocsviewer/blob/master/buildout.cfg\n\nIl vous reste à modifier le fichier buildout.cfg pour remplacer le contenu\nde la variable package-name par le nom du module que vous souhaitez tester\n(dans notre cas il faudra mettre collective.lemodule)\n\n## Lecture du code (3 minutes)\n\nIl faut jeter un oeil pour vérifier quelques points:\n\n* setup.py il y a des dépendances ?\n* [src/]collective/package/profiles/default/* Qu'est ce que le module installe, un tool ? un type de contenu ? des vues ? ...)\n* regarder rapidement le reste du code pour en voir la qualité\n* regarder changelog ([docs]/CHANGES.txt, [docs]/HISTORY.txt) pour voir si le module est récent et s'il le développement est actif\n\n## Tester le module\n\n* ajouter un site Plone\n* installer le module\n* tester les fonctionnalités que vous avez comprises du profil par défaut du module\n\nS'il vous reste un peu de temps, vous pouvez faire la traduction directement et faire un mail sur la liste de diffusion plone-fr.\n\n# Conclusion\n\nOn ne prend pas assez le temps de vérifier les dépendances et l'état d'un module.\nLe problème, c'est qu'après quand il y a un souci sur la production, c'est bien vous qu'on va venir voir,\net vous serez responsable de ce code.\n\nC'est bien là que le logiciel libre prend tout son sens. En ayant des gens capables de maintenir du code\nécrit par quelqu'un qui n'est plus là.","src/content/posts/2011-09-21-fr-articles-comment-tester-un-module-plone-en-10-minutes.md","7199eb3dff336a92",{"html":726,"metadata":727},"\u003Ch1 id=\"introduction\">Introduction\u003C/h1>\n\u003Cp>Quand on travaille avec un CMS, il est courant de vouloir tester un module\net de ne pas le faire par manque de temps. Ce que vous ne savez peut-être pas,\nc’est qu’un module peut être testé en 10 minutes.\u003C/p>\n\u003Ch2 id=\"prérequis\">Prérequis\u003C/h2>\n\u003Cp>Il faut pour suivre ce tutoriel disposer d’un Python version 2.6 avec\nle nécessaire en dépendances (support SSL, tar, zip, libjpeg, …)\u003C/p>\n\u003Cp>Un autre prérequis est de connaître l’adresse URL du dépôt de code utilisé\npour ce module. Avec Plone vous avez souvent:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://svn.plone.org/collective/\">svn collective\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/collective\">github collective\u003C/a>\u003C/li>\n\u003Cli>un github privé\u003C/li>\n\u003C/ul>\n\u003Cp>Sinon ce n’est pas bon signe, votre module ne fait pas partie de la communauté Plone.\u003C/p>\n\u003Ch1 id=\"tutoriel\">Tutoriel\u003C/h1>\n\u003Ch2 id=\"initialisation-2-minutes\">Initialisation (2 minutes)\u003C/h2>\n\u003Cp>Disons que nous voulons tester collective.galleria\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>git clone https://github.com/collective/collective.galleria.git collective.galleria\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>python bootstrap.py\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>bin/buildout\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>bin/instance fg\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Si le module ne dispose pas des fichiers buildout.cfg et bootstrap.py c’est assez facile de les ajouter:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>wget http://svn.zope.org/*checkout*/zc.buildout/trunk/bootstrap/bootstrap.py\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>wget https://github.com/collective/collective.googledocsviewer/blob/master/buildout.cfg\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Il vous reste à modifier le fichier buildout.cfg pour remplacer le contenu\nde la variable package-name par le nom du module que vous souhaitez tester\n(dans notre cas il faudra mettre collective.lemodule)\u003C/p>\n\u003Ch2 id=\"lecture-du-code-3-minutes\">Lecture du code (3 minutes)\u003C/h2>\n\u003Cp>Il faut jeter un oeil pour vérifier quelques points:\u003C/p>\n\u003Cul>\n\u003Cli>setup.py il y a des dépendances ?\u003C/li>\n\u003Cli>[src/]collective/package/profiles/default/* Qu’est ce que le module installe, un tool ? un type de contenu ? des vues ? …)\u003C/li>\n\u003Cli>regarder rapidement le reste du code pour en voir la qualité\u003C/li>\n\u003Cli>regarder changelog ([docs]/CHANGES.txt, [docs]/HISTORY.txt) pour voir si le module est récent et s’il le développement est actif\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"tester-le-module\">Tester le module\u003C/h2>\n\u003Cul>\n\u003Cli>ajouter un site Plone\u003C/li>\n\u003Cli>installer le module\u003C/li>\n\u003Cli>tester les fonctionnalités que vous avez comprises du profil par défaut du module\u003C/li>\n\u003C/ul>\n\u003Cp>S’il vous reste un peu de temps, vous pouvez faire la traduction directement et faire un mail sur la liste de diffusion plone-fr.\u003C/p>\n\u003Ch1 id=\"conclusion\">Conclusion\u003C/h1>\n\u003Cp>On ne prend pas assez le temps de vérifier les dépendances et l’état d’un module.\nLe problème, c’est qu’après quand il y a un souci sur la production, c’est bien vous qu’on va venir voir,\net vous serez responsable de ce code.\u003C/p>\n\u003Cp>C’est bien là que le logiciel libre prend tout son sens. En ayant des gens capables de maintenir du code\nécrit par quelqu’un qui n’est plus là.\u003C/p>",{"headings":728,"localImagePaths":749,"remoteImagePaths":750,"frontmatter":751,"imagePaths":755},[729,733,736,739,742,745,748],{"depth":730,"slug":731,"text":732},1,"introduction","Introduction",{"depth":449,"slug":734,"text":735},"prérequis","Prérequis",{"depth":730,"slug":737,"text":738},"tutoriel","Tutoriel",{"depth":449,"slug":740,"text":741},"initialisation-2-minutes","Initialisation (2 minutes)",{"depth":449,"slug":743,"text":744},"lecture-du-code-3-minutes","Lecture du code (3 minutes)",{"depth":449,"slug":746,"text":747},"tester-le-module","Tester le module",{"depth":730,"slug":459,"text":460},[],[],{"title":718,"categories":752,"tags":753,"date":754},[696],[87],["Date","2011-09-21T00:00:00.000Z"],[],"2011-09-21-fr-articles-comment-tester-un-module-plone-en-10-minutes.md","2011-10-05-fr-articles-presentation-du-registre-de-configuration-plone",{"id":757,"data":759,"body":764,"filePath":765,"digest":766,"rendered":767,"legacyId":799},{"title":760,"date":761,"categories":762,"tags":763,"lang":17},"Présentation du registre de configuration Plone",["Date","2011-10-05T00:00:00.000Z"],[696],[87],"Le nouveau moteur de configuration est disponible sous forme de module additionnel depuis Plone4:\n\n* [plone.registry](http://pypi.python.org/pypi/plone.registry)\n* [plone.app.registry](http://pypi.python.org/pypi/plone.app.registry)\n \n\nIl utilise z3cform comme moteur de formulaire qui sera donc également installé.\n\nDans les versions précédentes de Plone vous utilisiez le portal_properties\nqui est un conteneur de \"feuille de propriétés\" (propertysheet).\nDans son utilisation vous pouviez ajouter, modifier ou supprimer vos\nconfigurations en ZMI ou via les profils d'installation.\nVous pouviez également accéder à vos propriétés par l'appel à l'API de portal_properties.\n\n\nAlors pourquoi changer ? Le passage aux composants de Zope date de 2001 avec\nl'apparition de Zope3 ; La communauté Plone a fait le choix de ré-écrire\ncertaines parties de CMF en utilisant les composants dans le plus grand\nrespect de Zope2. On peut ainsi voir l'ensemble des packages plone.* comme des modules\npython/ztk et tous les packages plone.app.* comme leur intégration dans Zope2/CMF.\nAu-delà des raisons techniques, l'interface graphique de gestion des configurations s'en trouve améliorée.\nOn voit aussi disparaître la notion de propertysheet.\n\n# Présentation de plone.registry\n\nVoici la liste des fichiers importants:\n\n* interfaces.py\n* registry.py\n* recordsproxy.py\n* configure.zcml\n* field.py\n* record.py\n\n## Les interfaces (API)\n\n* IPersistentField\n* IRecord\n* IRecordProxy\n* IRegistry\n\n\nIPersistentField est un champ persistant. Un champ définit un type de donnée,\npar exemple le type nombre entier. Il définit également des métadonnées dessus :\nle nom, la description, quelques contraintes comme la valeur minimale par exemple.\nLa liste des types de champs est disponible sur la documentation officielle ou dans le fichier field.py.\nEn dehors des champs de type primitif, on retrouve un champ de type référence vers un autre Record.\n\nIRecord est un enregistrement dans le registre de configuration.\nCet objet appartient donc au registre et garde un pointeur vers celui-ci via l'attribut __parent__.\nL'attribut field correspond à une instance de IPersistentField et l'attribut value correspond à la valeur de votre configuration.\n\nIRecordProxy est utilisé dans le cadre de l'utilisation de schéma de configuration.\nUn schéma de configuration est une interface (zope.interface.Interface) ayant des champs (zope.schema).\nC'est l'approche que je privilégie dans mes implémentations car elle est très claire, orientée objet et facile à utiliser.\nDonc un RecordProxy est un objet qui peut implémenter dynamiquement un schéma de données.\nLes accès au valeur se font alors par les attributs de l'instance.\n\nIRegistry est le chef d'orchestre.\nC'est le composant que vous allez demander via l'utilisation de queryUtility.\nIl est le conteneur des enregistrements et dispose d'une API permettant d'accéder à la configuration de différentes manières :\n\n* clé/valeur\n* record proxy\n \n\n# Intégration au CMS (plone.app.registry)\n\nMaintenant que vous avez compris la base de ce module nous allons passer à la partie CMS.\n\nL'intégration réalisée met à disposition un registre au niveau du site accessible par le panneau de configuration sous le nom 'Registre de configuration'.\nIl se présente sous la forme d'un tableau clé, valeur.\nChaque clé est affichée sous la forme d'un lien qui ouvrira un 'overlay' contenant un formulaire qui vous permettra de modifier les valeurs\n\n![screenshot of the plone.app.registry controlpanel]({{ site.url }}/assets/imgs/plone-app-registry-edit-field.png)\n\n# Utilisation (développeur & intégrateur)\n\nQui dit configuration dit aussi profil de configuration.\nLors de l'installation de votre module vous souhaitez disposer d'une configuration.\nVoici la marche à suivre.\n\n## Définition et initialisation de la configuration\n\nIl faut commencer par créer un schéma de données comme par exemple :\n\n    from zope.interface import Interface\n    from zope import schema\n    class IZooSettings(Interface):\n        entryPrice = schema.Decimal(title=u\"Admission charge\")\n        messageOfTheDay = schema.TextLine(title=u\"A banner message\", default=u\"Welcome!\")\n\nAjouter un fichier registry.xml dans le profile d'installation de votre module:\n\n    \u003Cregistry>\n      \u003Crecord interface=\"my.package.interfaces.IZooSettings\" prefix=\"my.package\"/>\n    \u003C/registry>\n\nVous pouvez installer votre module pour qu'il bénéficie de la configuration correspondante.\nLes clés auront toutes la forme \"my.package.\" via l'utilisation de l'option prefix.\n\nLes valeurs par défaut de l'interface seront utilisées à la création de votre configuration.\nVous pouvez cependant outre passer cela de la manière suivante et proposer d'autres valeurs dans le profile de configuration:\n\n    \u003Cregistry>\n      \u003Crecord interface=\"my.package.interfaces.IZooSettings\" prefix=\"my.package\">  \n        \u003Cvalue key=\"entryPrice\">70\u003C/value>\n      \u003C/record>\n    \u003C/registry>\n\n\nC'est pratique lorsque vous effectuez une intégration de plusieurs modules et que vous souhaitez proposer une autre configuration que celle par défaut d'un module X ou Y.\n\nVous pouvez également demander au registre de ne pas prendre en compte certains champs de votre interface :\n\n    \u003Crecords interface=\"my.package.interfaces.IZooSettings\">\n      \u003Comit>messageOfTheDay\u003C/omit>\n    \u003C/records>\n \n\n## Utilisation de la configuration\n\n \n\nNous pouvons maintenant apprendre à utiliser cette configuration.\nVous pouvez récupérer votre configuration sous deux formes.\nSoit vous continuez avec un objet correspondant aux schémas de données que plone.registry se charge de construire pour vous avec la classe Record, soit vous décidez d'utiliser la configuration sous forme de dictionnaire Python (clé ; valeur)\n\nLa base est toujours la même :\n\n\n    from zope import component\n    from plone.registry.interfaces import IRegistry\n    from my.package import interfaces\n    \n    ...\n    \n    def mymethod():\n        registry = component.getUtility(IRegistry)\n        #access par cle/valeur\n        entryPrice = registry['my.package.entryPrice']\n        #access par recordproxy\n        zooSettings = registry.forInterface(interfaces.IZooSettings, check=False)\n        if zooSettings is not None:\n            entryPriceBis = zooSettings.entryPrice\n\nLe paramètre \"check=False\" permet de ne rien retourner si le registre ne dispose pas des enregistrements correspondant à l'interface.\nDans le cas contraire une exception \"KeyError\" est soulevée et vous devez donc la gérer avec les instructions python try/except.\n\n\n## Création d'un panneau de configuration de votre module additionnel\n\nIl est toujours pratique pour un administrateur de site de disposer d'un panneau de configuration de votre module additionnel.\nL'intégration de plone.registry dans le CMS met à disposition la base nécessaire pour pouvoir réaliser un panneau de configuration très rapidement.\nPour commencer vous devez créer un fichier controlpanel.py avec ce code:\n\n    from plone.app.registry.browser import controlpanel as basepanel\n    from plone.z3cform import layout\n    from my.package import interfaces\n    from my.package import messageFactory as _\n    \n    class ZooControlPanelForm(basepanel.RegistryEditForm):\n        schema = interfaces.IZooSettings\n    \n    ZooControlPanelView = layout.wrap_form(ZooControlPanelForm, ControlPanelFormWrapper)\n    \n    ZooControlPanelView.label = _(u\"Zoo settings\")\n\n\nDans votre fichier configure.zcml il faut maintenant ajouter la vue correspondante:\n\n    \u003Cbrowser:page\n      name=\"zoo-controlpanel\"\n      for=\"Products.CMFPlone.interfaces.IPloneSiteRoot\"\n      permission=\"cmf.ManagePortal\"\n      class=\".controlpanel.ZooControlPanelView\"\n    /> \n\n\nDans le profile d'installation vous devez également déclarer la \"configlet\" pour que votre vue soit accéssible à partir du panneau de contrôle:\n\n    \u003C?xml version=\"1.0\"?>\n    \u003Cobject\n      name=\"portal_controlpanel\"\n      xmlns:i18n=\"http://xml.zope.org/namespaces/i18n\"\n      i18n:domain=\"my.package\">\n    \n      \u003Cconfiglet\n        title=\"Zoo settings\"\n        action_id=\"my.package.zoosettings\" \n        appId=\"my.package\"\n        category=\"Products\"\n        condition_expr=\"\"\n        url_expr=\"string:${portal_url}/@@zoo-controlpanel\"\n        icon_expr=\"string:${portal_url}/++resource++my.package/icon.png\"\n        visible=\"True\"\n        i18n:attributes=\"title\">\n          \u003Cpermission>Manage portal\u003C/permission>\n      \u003C/configlet>\n    \n    \u003C/object>\n \n\nLa classe RegistryEditForm définie les méthodes \"updateFields\" et \"updateWidgets\" qui vous permette d'intervenir sur la construction du formulaire, pour par exemple changer le widgetFactory d'un champs ou encore changer les paramètres d'un widget comme par exemple le paramètre rows d'un champs texte.\n\nDisponible sous forme de module additionnel pour Plone 4 ce module est déjà largement utilisé.","src/content/posts/2011-10-05-fr-articles-presentation-du-registre-de-configuration-plone.md","69e63c202bc68bdd",{"html":768,"metadata":769},"\u003Cp>Le nouveau moteur de configuration est disponible sous forme de module additionnel depuis Plone4:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"http://pypi.python.org/pypi/plone.registry\">plone.registry\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"http://pypi.python.org/pypi/plone.app.registry\">plone.app.registry\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Cp>Il utilise z3cform comme moteur de formulaire qui sera donc également installé.\u003C/p>\n\u003Cp>Dans les versions précédentes de Plone vous utilisiez le portal_properties\nqui est un conteneur de “feuille de propriétés” (propertysheet).\nDans son utilisation vous pouviez ajouter, modifier ou supprimer vos\nconfigurations en ZMI ou via les profils d’installation.\nVous pouviez également accéder à vos propriétés par l’appel à l’API de portal_properties.\u003C/p>\n\u003Cp>Alors pourquoi changer ? Le passage aux composants de Zope date de 2001 avec\nl’apparition de Zope3 ; La communauté Plone a fait le choix de ré-écrire\ncertaines parties de CMF en utilisant les composants dans le plus grand\nrespect de Zope2. On peut ainsi voir l’ensemble des packages plone.* comme des modules\npython/ztk et tous les packages plone.app.* comme leur intégration dans Zope2/CMF.\nAu-delà des raisons techniques, l’interface graphique de gestion des configurations s’en trouve améliorée.\nOn voit aussi disparaître la notion de propertysheet.\u003C/p>\n\u003Ch1 id=\"présentation-de-ploneregistry\">Présentation de plone.registry\u003C/h1>\n\u003Cp>Voici la liste des fichiers importants:\u003C/p>\n\u003Cul>\n\u003Cli>interfaces.py\u003C/li>\n\u003Cli>registry.py\u003C/li>\n\u003Cli>recordsproxy.py\u003C/li>\n\u003Cli>configure.zcml\u003C/li>\n\u003Cli>field.py\u003C/li>\n\u003Cli>record.py\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"les-interfaces-api\">Les interfaces (API)\u003C/h2>\n\u003Cul>\n\u003Cli>IPersistentField\u003C/li>\n\u003Cli>IRecord\u003C/li>\n\u003Cli>IRecordProxy\u003C/li>\n\u003Cli>IRegistry\u003C/li>\n\u003C/ul>\n\u003Cp>IPersistentField est un champ persistant. Un champ définit un type de donnée,\npar exemple le type nombre entier. Il définit également des métadonnées dessus :\nle nom, la description, quelques contraintes comme la valeur minimale par exemple.\nLa liste des types de champs est disponible sur la documentation officielle ou dans le fichier field.py.\nEn dehors des champs de type primitif, on retrouve un champ de type référence vers un autre Record.\u003C/p>\n\u003Cp>IRecord est un enregistrement dans le registre de configuration.\nCet objet appartient donc au registre et garde un pointeur vers celui-ci via l’attribut \u003Cstrong>parent\u003C/strong>.\nL’attribut field correspond à une instance de IPersistentField et l’attribut value correspond à la valeur de votre configuration.\u003C/p>\n\u003Cp>IRecordProxy est utilisé dans le cadre de l’utilisation de schéma de configuration.\nUn schéma de configuration est une interface (zope.interface.Interface) ayant des champs (zope.schema).\nC’est l’approche que je privilégie dans mes implémentations car elle est très claire, orientée objet et facile à utiliser.\nDonc un RecordProxy est un objet qui peut implémenter dynamiquement un schéma de données.\nLes accès au valeur se font alors par les attributs de l’instance.\u003C/p>\n\u003Cp>IRegistry est le chef d’orchestre.\nC’est le composant que vous allez demander via l’utilisation de queryUtility.\nIl est le conteneur des enregistrements et dispose d’une API permettant d’accéder à la configuration de différentes manières :\u003C/p>\n\u003Cul>\n\u003Cli>clé/valeur\u003C/li>\n\u003Cli>record proxy\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"intégration-au-cms-ploneappregistry\">Intégration au CMS (plone.app.registry)\u003C/h1>\n\u003Cp>Maintenant que vous avez compris la base de ce module nous allons passer à la partie CMS.\u003C/p>\n\u003Cp>L’intégration réalisée met à disposition un registre au niveau du site accessible par le panneau de configuration sous le nom ‘Registre de configuration’.\nIl se présente sous la forme d’un tableau clé, valeur.\nChaque clé est affichée sous la forme d’un lien qui ouvrira un ‘overlay’ contenant un formulaire qui vous permettra de modifier les valeurs\u003C/p>\n\u003Cp>![screenshot of the plone.app.registry controlpanel]({{ site.url }}/assets/imgs/plone-app-registry-edit-field.png)\u003C/p>\n\u003Ch1 id=\"utilisation-développeur--intégrateur\">Utilisation (développeur &#x26; intégrateur)\u003C/h1>\n\u003Cp>Qui dit configuration dit aussi profil de configuration.\nLors de l’installation de votre module vous souhaitez disposer d’une configuration.\nVoici la marche à suivre.\u003C/p>\n\u003Ch2 id=\"définition-et-initialisation-de-la-configuration\">Définition et initialisation de la configuration\u003C/h2>\n\u003Cp>Il faut commencer par créer un schéma de données comme par exemple :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>from zope.interface import Interface\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from zope import schema\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>class IZooSettings(Interface):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    entryPrice = schema.Decimal(title=u\"Admission charge\")\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    messageOfTheDay = schema.TextLine(title=u\"A banner message\", default=u\"Welcome!\")\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Ajouter un fichier registry.xml dans le profile d’installation de votre module:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>&#x3C;registry>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;record interface=\"my.package.interfaces.IZooSettings\" prefix=\"my.package\"/>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>&#x3C;/registry>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Vous pouvez installer votre module pour qu’il bénéficie de la configuration correspondante.\nLes clés auront toutes la forme “my.package.” via l’utilisation de l’option prefix.\u003C/p>\n\u003Cp>Les valeurs par défaut de l’interface seront utilisées à la création de votre configuration.\nVous pouvez cependant outre passer cela de la manière suivante et proposer d’autres valeurs dans le profile de configuration:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>&#x3C;registry>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;record interface=\"my.package.interfaces.IZooSettings\" prefix=\"my.package\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    &#x3C;value key=\"entryPrice\">70&#x3C;/value>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;/record>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>&#x3C;/registry>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>C’est pratique lorsque vous effectuez une intégration de plusieurs modules et que vous souhaitez proposer une autre configuration que celle par défaut d’un module X ou Y.\u003C/p>\n\u003Cp>Vous pouvez également demander au registre de ne pas prendre en compte certains champs de votre interface :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>&#x3C;records interface=\"my.package.interfaces.IZooSettings\">\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;omit>messageOfTheDay&#x3C;/omit>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>&#x3C;/records>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"utilisation-de-la-configuration\">Utilisation de la configuration\u003C/h2>\n\u003Cp>Nous pouvons maintenant apprendre à utiliser cette configuration.\nVous pouvez récupérer votre configuration sous deux formes.\nSoit vous continuez avec un objet correspondant aux schémas de données que plone.registry se charge de construire pour vous avec la classe Record, soit vous décidez d’utiliser la configuration sous forme de dictionnaire Python (clé ; valeur)\u003C/p>\n\u003Cp>La base est toujours la même :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>from zope import component\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from plone.registry.interfaces import IRegistry\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from my.package import interfaces\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>def mymethod():\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    registry = component.getUtility(IRegistry)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    #access par cle/valeur\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    entryPrice = registry['my.package.entryPrice']\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    #access par recordproxy\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    zooSettings = registry.forInterface(interfaces.IZooSettings, check=False)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    if zooSettings is not None:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        entryPriceBis = zooSettings.entryPrice\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Le paramètre “check=False” permet de ne rien retourner si le registre ne dispose pas des enregistrements correspondant à l’interface.\nDans le cas contraire une exception “KeyError” est soulevée et vous devez donc la gérer avec les instructions python try/except.\u003C/p>\n\u003Ch2 id=\"création-dun-panneau-de-configuration-de-votre-module-additionnel\">Création d’un panneau de configuration de votre module additionnel\u003C/h2>\n\u003Cp>Il est toujours pratique pour un administrateur de site de disposer d’un panneau de configuration de votre module additionnel.\nL’intégration de plone.registry dans le CMS met à disposition la base nécessaire pour pouvoir réaliser un panneau de configuration très rapidement.\nPour commencer vous devez créer un fichier controlpanel.py avec ce code:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>from plone.app.registry.browser import controlpanel as basepanel\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from plone.z3cform import layout\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from my.package import interfaces\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>from my.package import messageFactory as _\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>class ZooControlPanelForm(basepanel.RegistryEditForm):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    schema = interfaces.IZooSettings\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>ZooControlPanelView = layout.wrap_form(ZooControlPanelForm, ControlPanelFormWrapper)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>ZooControlPanelView.label = _(u\"Zoo settings\")\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Dans votre fichier configure.zcml il faut maintenant ajouter la vue correspondante:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>&#x3C;browser:page\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  name=\"zoo-controlpanel\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  for=\"Products.CMFPlone.interfaces.IPloneSiteRoot\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  permission=\"cmf.ManagePortal\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  class=\".controlpanel.ZooControlPanelView\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>/> \u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Dans le profile d’installation vous devez également déclarer la “configlet” pour que votre vue soit accéssible à partir du panneau de contrôle:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>&#x3C;?xml version=\"1.0\"?>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>&#x3C;object\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  name=\"portal_controlpanel\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  xmlns:i18n=\"http://xml.zope.org/namespaces/i18n\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  i18n:domain=\"my.package\">\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;configlet\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    title=\"Zoo settings\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    action_id=\"my.package.zoosettings\" \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    appId=\"my.package\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    category=\"Products\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    condition_expr=\"\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    url_expr=\"string:${portal_url}/@@zoo-controlpanel\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    icon_expr=\"string:${portal_url}/++resource++my.package/icon.png\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    visible=\"True\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    i18n:attributes=\"title\">\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>      &#x3C;permission>Manage portal&#x3C;/permission>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  &#x3C;/configlet>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>&#x3C;/object>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>La classe RegistryEditForm définie les méthodes “updateFields” et “updateWidgets” qui vous permette d’intervenir sur la construction du formulaire, pour par exemple changer le widgetFactory d’un champs ou encore changer les paramètres d’un widget comme par exemple le paramètre rows d’un champs texte.\u003C/p>\n\u003Cp>Disponible sous forme de module additionnel pour Plone 4 ce module est déjà largement utilisé.\u003C/p>",{"headings":770,"localImagePaths":792,"remoteImagePaths":793,"frontmatter":794,"imagePaths":798},[771,774,777,780,783,786,789],{"depth":730,"slug":772,"text":773},"présentation-de-ploneregistry","Présentation de plone.registry",{"depth":449,"slug":775,"text":776},"les-interfaces-api","Les interfaces (API)",{"depth":730,"slug":778,"text":779},"intégration-au-cms-ploneappregistry","Intégration au CMS (plone.app.registry)",{"depth":730,"slug":781,"text":782},"utilisation-développeur--intégrateur","Utilisation (développeur & intégrateur)",{"depth":449,"slug":784,"text":785},"définition-et-initialisation-de-la-configuration","Définition et initialisation de la configuration",{"depth":449,"slug":787,"text":788},"utilisation-de-la-configuration","Utilisation de la configuration",{"depth":449,"slug":790,"text":791},"création-dun-panneau-de-configuration-de-votre-module-additionnel","Création d’un panneau de configuration de votre module additionnel",[],[],{"title":760,"categories":795,"tags":796,"date":797},[696],[87],["Date","2011-10-05T00:00:00.000Z"],[],"2011-10-05-fr-articles-presentation-du-registre-de-configuration-plone.md","2011-10-06-fr-actualites-plone-sur-github8241",{"id":800,"data":802,"body":807,"filePath":808,"digest":809,"rendered":810,"legacyId":821},{"title":803,"date":804,"categories":805,"tags":806,"lang":17},"Le code source du CMS Plone est maintenant sur Github",["Date","2011-10-06T00:00:00.000Z"],[696],[87],"Après un an d'expérience pour les modules additionnels via la création de\nhttps://github.com/collective, les core développeurs ont décidé de passer\nle code de Plone sur Github.\n\nEncore quelques ajustements sont nécessaires cependant vous trouverez déjà\nle code de Plone à l'adresse suivante : https://github.com/plone.\n\nEn attendant que les comptes LDAP soient migrés, vous pouvez forker un module\npuis faire une pull request.","src/content/posts/2011-10-06-fr-actualites-plone-sur-github8241.md","32e933cf7cc2f344",{"html":811,"metadata":812},"\u003Cp>Après un an d’expérience pour les modules additionnels via la création de\n\u003Ca href=\"https://github.com/collective\">https://github.com/collective\u003C/a>, les core développeurs ont décidé de passer\nle code de Plone sur Github.\u003C/p>\n\u003Cp>Encore quelques ajustements sont nécessaires cependant vous trouverez déjà\nle code de Plone à l’adresse suivante : \u003Ca href=\"https://github.com/plone\">https://github.com/plone\u003C/a>.\u003C/p>\n\u003Cp>En attendant que les comptes LDAP soient migrés, vous pouvez forker un module\npuis faire une pull request.\u003C/p>",{"headings":813,"localImagePaths":814,"remoteImagePaths":815,"frontmatter":816,"imagePaths":820},[],[],[],{"title":803,"categories":817,"tags":818,"date":819},[696],[87],["Date","2011-10-06T00:00:00.000Z"],[],"2011-10-06-fr-actualites-plone-sur-github8241.md","2011-10-06-fr-actualites-collective-disqus-now-support-for-multi-languages-site614",{"id":822,"data":824,"body":829,"filePath":830,"digest":831,"rendered":832,"legacyId":843},{"title":825,"date":826,"categories":827,"tags":828,"lang":17},"Le module disqus pour Plone supporte maintenant le multilingue",["Date","2011-10-06T00:00:00.000Z"],[696],[87,698],"Je viens d'ajouter le support du multilingue en suivant l'aide officielle. Donc maintenant Disqus s'affiche dans la langue de la page.","src/content/posts/2011-10-06-fr-actualites-collective-disqus-now-support-for-multi-languages-site614.md","47f5e7fc366bc52d",{"html":833,"metadata":834},"\u003Cp>Je viens d’ajouter le support du multilingue en suivant l’aide officielle. Donc maintenant Disqus s’affiche dans la langue de la page.\u003C/p>",{"headings":835,"localImagePaths":836,"remoteImagePaths":837,"frontmatter":838,"imagePaths":842},[],[],[],{"title":825,"categories":839,"tags":840,"date":841},[696],[87,698],["Date","2011-10-06T00:00:00.000Z"],[],"2011-10-06-fr-actualites-collective-disqus-now-support-for-multi-languages-site614.md","2011-11-21-fr-actualites-views-used-in-your-plone-site",{"id":844,"data":846,"body":852,"filePath":853,"digest":854,"rendered":855,"legacyId":866},{"title":847,"date":848,"categories":849,"tags":850,"lang":17},"Comment connaître les vues utilisées dans votre site Plone",["Date","2011-11-21T00:00:00.000Z"],[696],[87,851],"gist","Ce bout de code affiche les vues utilisées par type de contenu.\n\n{% gist toutpt/6719746 %}","src/content/posts/2011-11-21-fr-actualites-views-used-in-your-plone-site.md","71932df14bad3a12",{"html":856,"metadata":857},"\u003Cp>Ce bout de code affiche les vues utilisées par type de contenu.\u003C/p>\n\u003Cp>{% gist toutpt/6719746 %}\u003C/p>",{"headings":858,"localImagePaths":859,"remoteImagePaths":860,"frontmatter":861,"imagePaths":865},[],[],[],{"title":847,"categories":862,"tags":863,"date":864},[696],[87,851],["Date","2011-11-21T00:00:00.000Z"],[],"2011-11-21-fr-actualites-views-used-in-your-plone-site.md","2012-02-27-fr-actualites-le-site-internet-du-salon-natura-2012",{"id":867,"data":869,"body":874,"filePath":875,"digest":876,"rendered":877,"legacyId":888},{"title":870,"date":871,"categories":872,"tags":873,"lang":17},"Le site Internet du Salon Natura 2012",["Date","2012-02-27T00:00:00.000Z"],[696],[87,617],"Le Salon Natura est le plus grand salon bio de l'ouest.\nIl aura lieu cette année du 23 au 26 mars 2012.\n\nLe site Internet [Salon Natura](http://www.salon-natura.com/) utilise le [CMS Plone](http://plone.org) avec les modules suivants:\n\n* collective.addthis\n* collective.galleria\n* collective.googleanalytics\n* collective.masonry\n* collective.js.datatable\n* collective.portlet.embed\n* collective.seo\n* Products.PloneFormGen\n \n\nUne belle réalisation gérée par la société organisatrice [NGE](http://nge-nantes.fr/).\nToutes mes félicitations !","src/content/posts/2012-02-27-fr-actualites-le-site-internet-du-salon-natura-2012.md","a6d7b5d275d2dfec",{"html":878,"metadata":879},"\u003Cp>Le Salon Natura est le plus grand salon bio de l’ouest.\nIl aura lieu cette année du 23 au 26 mars 2012.\u003C/p>\n\u003Cp>Le site Internet \u003Ca href=\"http://www.salon-natura.com/\">Salon Natura\u003C/a> utilise le \u003Ca href=\"http://plone.org\">CMS Plone\u003C/a> avec les modules suivants:\u003C/p>\n\u003Cul>\n\u003Cli>collective.addthis\u003C/li>\n\u003Cli>collective.galleria\u003C/li>\n\u003Cli>collective.googleanalytics\u003C/li>\n\u003Cli>collective.masonry\u003C/li>\n\u003Cli>collective.js.datatable\u003C/li>\n\u003Cli>collective.portlet.embed\u003C/li>\n\u003Cli>collective.seo\u003C/li>\n\u003Cli>Products.PloneFormGen\u003C/li>\n\u003C/ul>\n\u003Cp>Une belle réalisation gérée par la société organisatrice \u003Ca href=\"http://nge-nantes.fr/\">NGE\u003C/a>.\nToutes mes félicitations !\u003C/p>",{"headings":880,"localImagePaths":881,"remoteImagePaths":882,"frontmatter":883,"imagePaths":887},[],[],[],{"title":870,"categories":884,"tags":885,"date":886},[696],[87,617],["Date","2012-02-27T00:00:00.000Z"],[],"2012-02-27-fr-actualites-le-site-internet-du-salon-natura-2012.md","2012-12-09-fr-actualites-masonry-plugin-updated223",{"id":889,"data":891,"body":896,"filePath":897,"digest":898,"rendered":899,"legacyId":910},{"title":892,"date":893,"categories":894,"tags":895,"lang":17},"Mise à jour du plugin Masonry",["Date","2012-12-09T00:00:00.000Z"],[696],[87,698],"Le module [collective.masonry](http://pypi.python.org/pypi/collective.masonry) a été mis à jour ! Les nouveautés sont :\n\nLe module jQuery [Masonry](http://masonry.desandro.com/index.html) a été mis à jour à la version 2.0 ainsi que le module jQuery imageLoaded qui l'accompagne.\n\nLa page de démonstration a aussi été mise à jour avec des images.\n\nLes deux conteneur de portlets ont été déplacés:\n\nde IAboveContent à IAboveContentBody\n\nde IBelowContent à IBelowContentBody\n\nVotre point de vue m'intéresse !","src/content/posts/2012-12-09-fr-actualites-masonry-plugin-updated223.md","f3a79e30a0ec5486",{"html":900,"metadata":901},"\u003Cp>Le module \u003Ca href=\"http://pypi.python.org/pypi/collective.masonry\">collective.masonry\u003C/a> a été mis à jour ! Les nouveautés sont :\u003C/p>\n\u003Cp>Le module jQuery \u003Ca href=\"http://masonry.desandro.com/index.html\">Masonry\u003C/a> a été mis à jour à la version 2.0 ainsi que le module jQuery imageLoaded qui l’accompagne.\u003C/p>\n\u003Cp>La page de démonstration a aussi été mise à jour avec des images.\u003C/p>\n\u003Cp>Les deux conteneur de portlets ont été déplacés:\u003C/p>\n\u003Cp>de IAboveContent à IAboveContentBody\u003C/p>\n\u003Cp>de IBelowContent à IBelowContentBody\u003C/p>\n\u003Cp>Votre point de vue m’intéresse !\u003C/p>",{"headings":902,"localImagePaths":903,"remoteImagePaths":904,"frontmatter":905,"imagePaths":909},[],[],[],{"title":892,"categories":906,"tags":907,"date":908},[696],[87,698],["Date","2012-12-09T00:00:00.000Z"],[],"2012-12-09-fr-actualites-masonry-plugin-updated223.md","2012-12-09-fr-actualites-nantes-developpementcom",{"id":911,"data":913,"body":918,"filePath":919,"digest":920,"rendered":921,"legacyId":944},{"title":914,"date":915,"categories":916,"tags":917,"lang":17},"Nantes Métropole Développement",["Date","2012-12-09T00:00:00.000Z"],[696],[617,87],"C'est en juillet 2010 que j'avais annoncé la nouvelle version du site Internet\n\n[nantes-developpement](http://www.nantes-developpement.com).\n\nCe projet utilisant beaucoup de modules, je vous fais profiter de ce choix:\n\n\n* [collective.addthis](https://pypi.python.org/pypi/collective.addthis)\n\n* [collective.picnik](https://pypi.python.org/pypi/collective.picknik)\n* [collective.sugarcrm](https://pypi.python.org/pypi/collective.sugarcrm)\n* [collective.configviews](https://pypi.python.org/pypi/collective.configviews)\n* [collective.gallery](https://pypi.python.org/pypi/collective.gallery)\n* [collective.dewplayer](https://pypi.python.org/pypi/collective.dewplayer)\n* [collective.portlet.contact](https://pypi.python.org/pypi/collective.portlet.contact)\n* [collective.portlet.feedmixer](https://pypi.python.org/pypi/collective.portlet.feedmixer)\n* [collective.googleanalytics](https://pypi.python.org/pypi/collective.googleanalytics)\n* [nmd.plonelinkasvideoembed](https://pypi.python.org/pypi/nmd.plonelinkasvideoembed)\n* [collective.z3cform.norobots](https://pypi.python.org/pypi/collective.z3cform.norobots)\n* [qi.portlet.TagClouds](https://pypi.python.org/pypi/qi.portlet.TagClouds)\n* [collective.singing & collective.dancing](https://pypi.python.org/pypi/collective.singing)\n* [archetypes.uploadreferencewidget](https://pypi.python.org/pypi/archetypes.uploadreferencewidget)\n* [babel](https://pypi.python.org/pypi/babel)\n* [Products.Maps](https://pypi.python.org/pypi/Products.Maps)\n* [Products.PloneFormGen](https://pypi.python.org/pypi/Products.PloneFormGen)\n* [Products.TinyMCE](https://pypi.python.org/pypi/Products.TinyMCE)\n* [Products.TextIndexNG3](https://pypi.python.org/pypi/Products.TextIndexNG3)\n* [Products.CompoundField](https://pypi.python.org/pypi/Products.CompoundField)\n* [Products.ZNagios](https://pypi.python.org/pypi/Products.ZNagios)\n* [five.grok](https://pypi.python.org/pypi/five.grok)\n* [Products.MemcachedManager](https://pypi.python.org/pypi/Products.MemcachedManager)\n* [Relstorage](https://pypi.python.org/pypi/Relstorage)\n* [plone.app.theming](https://pypi.python.org/pypi/plone.app.theming)\n* [plone.app.caching](https://pypi.python.org/pypi/plone.app.caching)\n* [plone.app.search](https://pypi.python.org/pypi/plone.app.search)\n\n\nCes modules étaient présents dans la version Plone3 mais ont été retirés :\n\n* [collective.groupdashboard](https://pypi.python.org/pypi/collective.groupdashboard)\n* [collective.portlet.actions](https://pypi.python.org/pypi/collective.portlet.actions)\n* [collective.plonebookmarklets](https://pypi.python.org/pypi/collective.plonebookmarklets)\n* [collective.contentlicensing](https://pypi.python.org/pypi/collective.contentlicensing)\n* [collective.autopermission](https://pypi.python.org/pypi/collective.autopermission)\n* [collective.contentrules.mail](https://pypi.python.org/pypi/collective.contentrules.mail)\n* [collective.harlequin](https://pypi.python.org/pypi/collective.harlequin)\n* [collective.monkeypatcher](https://pypi.python.org/pypi/collective.monkeypatcher)\n* [collective.z3cform.grok](https://pypi.python.org/pypi/collective.z3cform.grok)\n* [experimental.contentcreation](https://pypi.python.org/pypi/experimental.contentcreation)\n* [experimental.aggressiveopaquespeedup](https://pypi.python.org/pypi/experimental.aggressiveopaquespeedup)\n* [collective.remove.kss](https://pypi.python.org/pypi/collective.remove.kss)\n* [collective.remove.kupu](https://pypi.python.org/pypi/collective.remove.kupu)\n* [collective.remove.rules](https://pypi.python.org/pypi/collective.remove.rules)\n* [Products.CacheSetup](https://pypi.python.org/pypi/Products.CacheSetup)\n* [plone.app.ldap](https://pypi.python.org/pypi/plone.app.ldap)\n* [iw.fss](https://pypi.python.org/pypi/iw.fss)\n\n# Migrer de Plone3 à Plone4\n\nLa migration a été réalisée via un script de prémigration pour préparer la\nbase de données à la migration, la migration effective du site, puis une migration liée aux modules.\n\n## Retirer iw.fss\n\nCe ne fut pas le plus simple. Après avoir lu pas mal de mails autour de ça, j'ai adapté un bout de code à mon cas.\n\n{% gist toutpt/6719656 %}\n\n# Theme\n\nLe changement de charte graphique a été l'événement déclencheur de la migration.\nLe thème utilise le framework de grille CSS 960 avec le tout nouveau moteur de thème Plone :\nplone.app.theming, basé sur Diazo.\n\nC'est mon second thème avec ce moteur. Mon avis est qu'il accélère la création de thèmes simples\nmais ne permet pas la création d'un thème complet.\n\nLe besoin de surcharger des templates, des viewlets, de connaître la mécanique\ndes 'skins directories' et autre 'browser view' reste nécessaire.\n\n# Integration\n\nJ'ai testé beaucoup de modules, créé quelques modules, amélioré,\nfait des rapports de bugs, mais aussi de l'intégration.\n\nJ'ai ajouté l'intégration entre les modules collective.addthis et\ncollective.googleanalytics pour que tout partage pousse un événement social dans GA.\n\nJ'ai découvert le module plone.app.search qui est le moteur de recherche\nde la prochaine version de Plone (4.2). L'intégration au projet a été simple,\nil m'a suffi d'ajouter Modernizr au registre des javascripts, de modifier\nle rendu (simple template) et de modifier les liens dans le livesearch\npour utiliser cette nouvelle version.\nCe nouveau module est bien plus simple que les précédents moteurs de recherche.\n\nLe proxy cache Varnish est utilisé et intégré à l'aide du module plone.app.caching.\nJ'ai rapporté un bug concernant la fonction afficher/masquer une portlet qui ne fonctionne pas bien avec Varnish.\n\nSugarCRM est utilisé à plusieurs niveaux : authentification, portlet contact,\nformulaire de lead (via le module PloneFormGen) et une viewlet affichant\nune entreprise et un contact (activé avec un formulaire autocomplete) le tout via le module collective.sugarcrm.\n\nTinyMCE 1.3 est utilisé dans sa version développement et utilise ici une modification :\nla configuration n'est pas la même pour un administrateur de site que pour un contributeur.\nVous trouverez le master sur GitHub.\n\nLes galeries (diaporamas) sont affichées avec le module collective.gallery et\nun affichage basé sur le plugin jQuery ad-gallery, en utilisant Picasaweb comme base d'albums photos.","src/content/posts/2012-12-09-fr-actualites-nantes-developpement.com.md","2047f88ff870cecc",{"html":922,"metadata":923},"\u003Cp>C’est en juillet 2010 que j’avais annoncé la nouvelle version du site Internet\u003C/p>\n\u003Cp>\u003Ca href=\"http://www.nantes-developpement.com\">nantes-developpement\u003C/a>.\u003C/p>\n\u003Cp>Ce projet utilisant beaucoup de modules, je vous fais profiter de ce choix:\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.addthis\">collective.addthis\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.picknik\">collective.picnik\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.sugarcrm\">collective.sugarcrm\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.configviews\">collective.configviews\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.gallery\">collective.gallery\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.dewplayer\">collective.dewplayer\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.portlet.contact\">collective.portlet.contact\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.portlet.feedmixer\">collective.portlet.feedmixer\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.googleanalytics\">collective.googleanalytics\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/nmd.plonelinkasvideoembed\">nmd.plonelinkasvideoembed\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.z3cform.norobots\">collective.z3cform.norobots\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/qi.portlet.TagClouds\">qi.portlet.TagClouds\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/collective.singing\">collective.singing &#x26; collective.dancing\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/archetypes.uploadreferencewidget\">archetypes.uploadreferencewidget\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/babel\">babel\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.Maps\">Products.Maps\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.PloneFormGen\">Products.PloneFormGen\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.TinyMCE\">Products.TinyMCE\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.TextIndexNG3\">Products.TextIndexNG3\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.CompoundField\">Products.CompoundField\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.ZNagios\">Products.ZNagios\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/five.grok\">five.grok\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Products.MemcachedManager\">Products.MemcachedManager\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/Relstorage\">Relstorage\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/plone.app.theming\">plone.app.theming\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/plone.app.caching\">plone.app.caching\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://pypi.python.org/pypi/plone.app.search\">plone.app.search\u003C/a>\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Cp>Ces modules étaient présents dans la version Plone3 mais ont été retirés :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.groupdashboard\">collective.groupdashboard\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.portlet.actions\">collective.portlet.actions\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.plonebookmarklets\">collective.plonebookmarklets\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.contentlicensing\">collective.contentlicensing\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.autopermission\">collective.autopermission\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.contentrules.mail\">collective.contentrules.mail\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.harlequin\">collective.harlequin\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.monkeypatcher\">collective.monkeypatcher\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.z3cform.grok\">collective.z3cform.grok\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/experimental.contentcreation\">experimental.contentcreation\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/experimental.aggressiveopaquespeedup\">experimental.aggressiveopaquespeedup\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.remove.kss\">collective.remove.kss\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.remove.kupu\">collective.remove.kupu\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/collective.remove.rules\">collective.remove.rules\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/Products.CacheSetup\">Products.CacheSetup\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/plone.app.ldap\">plone.app.ldap\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://pypi.python.org/pypi/iw.fss\">iw.fss\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"migrer-de-plone3-à-plone4\">Migrer de Plone3 à Plone4\u003C/h1>\n\u003Cp>La migration a été réalisée via un script de prémigration pour préparer la\nbase de données à la migration, la migration effective du site, puis une migration liée aux modules.\u003C/p>\n\u003Ch2 id=\"retirer-iwfss\">Retirer iw.fss\u003C/h2>\n\u003Cp>Ce ne fut pas le plus simple. Après avoir lu pas mal de mails autour de ça, j’ai adapté un bout de code à mon cas.\u003C/p>\n\u003Cp>{% gist toutpt/6719656 %}\u003C/p>\n\u003Ch1 id=\"theme\">Theme\u003C/h1>\n\u003Cp>Le changement de charte graphique a été l’événement déclencheur de la migration.\nLe thème utilise le framework de grille CSS 960 avec le tout nouveau moteur de thème Plone :\nplone.app.theming, basé sur Diazo.\u003C/p>\n\u003Cp>C’est mon second thème avec ce moteur. Mon avis est qu’il accélère la création de thèmes simples\nmais ne permet pas la création d’un thème complet.\u003C/p>\n\u003Cp>Le besoin de surcharger des templates, des viewlets, de connaître la mécanique\ndes ‘skins directories’ et autre ‘browser view’ reste nécessaire.\u003C/p>\n\u003Ch1 id=\"integration\">Integration\u003C/h1>\n\u003Cp>J’ai testé beaucoup de modules, créé quelques modules, amélioré,\nfait des rapports de bugs, mais aussi de l’intégration.\u003C/p>\n\u003Cp>J’ai ajouté l’intégration entre les modules collective.addthis et\ncollective.googleanalytics pour que tout partage pousse un événement social dans GA.\u003C/p>\n\u003Cp>J’ai découvert le module plone.app.search qui est le moteur de recherche\nde la prochaine version de Plone (4.2). L’intégration au projet a été simple,\nil m’a suffi d’ajouter Modernizr au registre des javascripts, de modifier\nle rendu (simple template) et de modifier les liens dans le livesearch\npour utiliser cette nouvelle version.\nCe nouveau module est bien plus simple que les précédents moteurs de recherche.\u003C/p>\n\u003Cp>Le proxy cache Varnish est utilisé et intégré à l’aide du module plone.app.caching.\nJ’ai rapporté un bug concernant la fonction afficher/masquer une portlet qui ne fonctionne pas bien avec Varnish.\u003C/p>\n\u003Cp>SugarCRM est utilisé à plusieurs niveaux : authentification, portlet contact,\nformulaire de lead (via le module PloneFormGen) et une viewlet affichant\nune entreprise et un contact (activé avec un formulaire autocomplete) le tout via le module collective.sugarcrm.\u003C/p>\n\u003Cp>TinyMCE 1.3 est utilisé dans sa version développement et utilise ici une modification :\nla configuration n’est pas la même pour un administrateur de site que pour un contributeur.\nVous trouverez le master sur GitHub.\u003C/p>\n\u003Cp>Les galeries (diaporamas) sont affichées avec le module collective.gallery et\nun affichage basé sur le plugin jQuery ad-gallery, en utilisant Picasaweb comme base d’albums photos.\u003C/p>",{"headings":924,"localImagePaths":937,"remoteImagePaths":938,"frontmatter":939,"imagePaths":943},[925,928,931,934],{"depth":730,"slug":926,"text":927},"migrer-de-plone3-à-plone4","Migrer de Plone3 à Plone4",{"depth":449,"slug":929,"text":930},"retirer-iwfss","Retirer iw.fss",{"depth":730,"slug":932,"text":933},"theme","Theme",{"depth":730,"slug":935,"text":936},"integration","Integration",[],[],{"title":914,"categories":940,"tags":941,"date":942},[696],[617,87],["Date","2012-12-09T00:00:00.000Z"],[],"2012-12-09-fr-actualites-nantes-developpement.com.md","2012-12-09-fr-articles-contributions-pypi",{"id":945,"data":947,"body":952,"filePath":953,"digest":954,"rendered":955,"legacyId":966},{"title":948,"date":949,"categories":950,"tags":951,"lang":17},"Contributions pypi",["Date","2012-12-09T00:00:00.000Z"],[696],[87,698],"Faire le point sur la liste des modules que j'ai réalisé fut un moment \"satisfaisant\".\nVous trouverez cette liste ci après.\n\n```\npackage name    releases    downloads\ncollective.js.s3slider  2   1583\ncollective.recipe.funkload  3   2051\ncollective.js.jqueryui  35  65363\nmakina.recipe.postgres  1   1102\ncollective.steps    4   2465\nooo2tools.core  2   1641\nexperimental.aggressiveopaquespeedup    2   2182\nnmd.plonelinkasvideoembed   2   1588\ncollective.harlequin    4   2136\ncollective.remove.kss   2   1538\ncollective.funkbot  1   736\ncollective.coreloadtests    1   748\ncollective.gallery  12  8527\ncollective.remove.rules 1   686\ncollective.remove.kupu  1   765\ncollective.inplacetopicview 1   689\ncollective.dewslider    1   829\ncollective.js.galleryview   2   1516\ncollective.alerts   6   5010\ncollective.dewplayer    5   3121\ncollective.hook 1   653\ncollective.js.slimbox2  4   2102\ncollective.cssgridsystem    1   640\ncollective.sugarcrm 7   3345\ncollective.portlet.contact  3   1555\ncollective.js.pikachoose    3   1808\ncollective.js.datatables    15  11367\ncollective.js.galleriffic   2   2517\ncollective.js.cufon 1   584\ncollective.googlelibraries  1   574\ncollective.portlet.itemview 5   2722\ncollective.masonry  6   3298\ntoutpt.zopeskel 7   2579\ncollective.js.formalize 2   783\ncollective.googlenews   4   2199\ncollective.googleforms  1   528\ncollective.googleloader 1   538\ncollective.jqueryuithememanager 3   1483\nplonetheme.flowerbuds   1   750\ncollective.configviews  5   2771\ncollective.googledocsviewer 1   656\ncollective.seo  2   974\ncollective.galleria 6   2910\ncollective.swfobject    2   1013\ncollective.picnik   2   829\ncollective.scss 1   443\ncollective.portlet.embed    3   1741\ncollective.js.oembed    1   433\ncollective.oembed   7   3389\ncollective.portlet.oembed   3   1119\ncollective.js.easing    1   440\ncollective.js.fancybox  1   772\ncollective.js.galleria  6   3887\ncollective.js.highslide 1   698\ncollective.js.imagesloaded  2   627\ncollective.js.mousewheel    1   391\ncollective.js.twittertext   1   427\ncollective.registry 1   810\nplonetheme.responsive1140   1   344\ncollective.galleriffic  1   438\ncollective.fancybox 8   5599\ncollective.portlet.lingualinks  2   693\ncollective.localrolesdatatables 6   2448\ncollective.linguaanalytics  2   528\ncollective.linguadomains    2   529\ncollective.linguasitemap    3   988\ncollective.js.fitvids   1   326\narchetypes.linguakeywordwidget  4   1487\ncollective.portlet.group    2   631\ncollective.azindexpage  5   1815\ncollective.addthis  10  6859\ncollective.js.jcarousel 1   451\ncollective.js.nivoslider    2   1172\ncollective.js.nomensamediaplayer    1   371\ncollective.js.jwplayer  1   307\ncollective.portlet.videoanysurfer   3   1005\ncollective.videoanysurfer   6   2173\ncaptionstransformer 4   1255\ncollective.js.simplecart    1   280\ncollective.captionmanager   1   305\ncollective.js.ckeditor  1   223\ncollective.portlet.nivoslider   1   244\ncollective.portlet.organization 1   218\ncollective.metarobots   3   640\ncollective.baseline 1   202\ncollective.footerportletmanager 1   181\ncollective.js.masonry   1   170\ncollective.js.timeago   2   299\ncollective.portlet.globalnav    1   151\ncollective.portlet.jqueryuicalendar 1   137\ncollective.portlet.twittermultistream   2   196\ncollective.contentrules.yearmonth   1   106\ncollective.fancyboxgallery  1   83\ncollective.portlet.fancyboxgallery  1   77\ntotal   288 201562\n```","src/content/posts/2012-12-09-fr-articles-contributions-pypi.md","14d6fa7a4962b576",{"html":956,"metadata":957},"\u003Cp>Faire le point sur la liste des modules que j’ai réalisé fut un moment “satisfaisant”.\nVous trouverez cette liste ci après.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>package name    releases    downloads\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.s3slider  2   1583\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.recipe.funkload  3   2051\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.jqueryui  35  65363\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>makina.recipe.postgres  1   1102\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.steps    4   2465\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>ooo2tools.core  2   1641\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>experimental.aggressiveopaquespeedup    2   2182\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>nmd.plonelinkasvideoembed   2   1588\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.harlequin    4   2136\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.remove.kss   2   1538\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.funkbot  1   736\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.coreloadtests    1   748\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.gallery  12  8527\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.remove.rules 1   686\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.remove.kupu  1   765\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.inplacetopicview 1   689\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.dewslider    1   829\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.galleryview   2   1516\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.alerts   6   5010\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.dewplayer    5   3121\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.hook 1   653\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.slimbox2  4   2102\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.cssgridsystem    1   640\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.sugarcrm 7   3345\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.contact  3   1555\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.pikachoose    3   1808\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.datatables    15  11367\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.galleriffic   2   2517\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.cufon 1   584\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.googlelibraries  1   574\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.itemview 5   2722\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.masonry  6   3298\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>toutpt.zopeskel 7   2579\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.formalize 2   783\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.googlenews   4   2199\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.googleforms  1   528\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.googleloader 1   538\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.jqueryuithememanager 3   1483\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>plonetheme.flowerbuds   1   750\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.configviews  5   2771\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.googledocsviewer 1   656\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.seo  2   974\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.galleria 6   2910\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.swfobject    2   1013\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.picnik   2   829\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.scss 1   443\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.embed    3   1741\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.oembed    1   433\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.oembed   7   3389\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.oembed   3   1119\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.easing    1   440\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.fancybox  1   772\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.galleria  6   3887\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.highslide 1   698\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.imagesloaded  2   627\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.mousewheel    1   391\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.twittertext   1   427\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.registry 1   810\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>plonetheme.responsive1140   1   344\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.galleriffic  1   438\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.fancybox 8   5599\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.lingualinks  2   693\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.localrolesdatatables 6   2448\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.linguaanalytics  2   528\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.linguadomains    2   529\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.linguasitemap    3   988\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.fitvids   1   326\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>archetypes.linguakeywordwidget  4   1487\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.group    2   631\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.azindexpage  5   1815\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.addthis  10  6859\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.jcarousel 1   451\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.nivoslider    2   1172\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.nomensamediaplayer    1   371\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.jwplayer  1   307\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.videoanysurfer   3   1005\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.videoanysurfer   6   2173\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>captionstransformer 4   1255\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.simplecart    1   280\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.captionmanager   1   305\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.ckeditor  1   223\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.nivoslider   1   244\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.organization 1   218\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.metarobots   3   640\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.baseline 1   202\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.footerportletmanager 1   181\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.masonry   1   170\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.js.timeago   2   299\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.globalnav    1   151\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.jqueryuicalendar 1   137\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.twittermultistream   2   196\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.contentrules.yearmonth   1   106\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.fancyboxgallery  1   83\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>collective.portlet.fancyboxgallery  1   77\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>total   288 201562\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",{"headings":958,"localImagePaths":959,"remoteImagePaths":960,"frontmatter":961,"imagePaths":965},[],[],[],{"title":948,"categories":962,"tags":963,"date":964},[696],[87,698],["Date","2012-12-09T00:00:00.000Z"],[],"2012-12-09-fr-articles-contributions-pypi.md","2016-06-10-talend",{"id":967,"data":969,"body":976,"filePath":977,"digest":978,"rendered":979,"legacyId":990},{"title":970,"date":971,"categories":972,"tags":974,"lang":17},"Une nouvelle aventure dans l opensource: Talend",["Date","2016-06-10T00:00:00.000Z"],[973],"",[975],"Talend","Apres ces deux annees dans cette petite structure ou j ai pu acquerir une tres grande experience il est temps pour moi de voir plus grand ! J'ai la chance de demarrer un projet pour le Cloud.\n\nJe vais pouvoir me concentrer sur ce framework qui etait au debut une simple alternative a angular mais avec l'annonce de Google d arreter son developpement React deviens la solution naturel:\n\n- utilise en production par facebook\n- uniquement le rendering (peut faire peur)\n\nCe n'est pas la premiere fois que Google drop une technologie je dois avouer que je ne suis pas pret de refaire confiance au projet OSS qui sorte de Google.\n\nEt je peux deja vous dire que le projet demarre fort, Talend ne fait pas semblant.\nC'est la premier fois que je suis dans une entreprise avec plusieurs equipes ou chaque equipe a plusieurs dev, QA et un chef de projet !","src/content/posts/2016-06-10-talend.md","c6db4bed3c212350",{"html":980,"metadata":981},"\u003Cp>Apres ces deux annees dans cette petite structure ou j ai pu acquerir une tres grande experience il est temps pour moi de voir plus grand ! J’ai la chance de demarrer un projet pour le Cloud.\u003C/p>\n\u003Cp>Je vais pouvoir me concentrer sur ce framework qui etait au debut une simple alternative a angular mais avec l’annonce de Google d arreter son developpement React deviens la solution naturel:\u003C/p>\n\u003Cul>\n\u003Cli>utilise en production par facebook\u003C/li>\n\u003Cli>uniquement le rendering (peut faire peur)\u003C/li>\n\u003C/ul>\n\u003Cp>Ce n’est pas la premiere fois que Google drop une technologie je dois avouer que je ne suis pas pret de refaire confiance au projet OSS qui sorte de Google.\u003C/p>\n\u003Cp>Et je peux deja vous dire que le projet demarre fort, Talend ne fait pas semblant.\nC’est la premier fois que je suis dans une entreprise avec plusieurs equipes ou chaque equipe a plusieurs dev, QA et un chef de projet !\u003C/p>",{"headings":982,"localImagePaths":983,"remoteImagePaths":984,"frontmatter":985,"imagePaths":989},[],[],[],{"title":970,"categories":986,"tags":987,"date":988},[973],[975],["Date","2016-06-10T00:00:00.000Z"],[],"2016-06-10-talend.md","2014-10-01-opengst",{"id":991,"data":993,"body":1001,"filePath":1002,"digest":1003,"rendered":1004,"legacyId":1052},{"title":994,"date":995,"categories":996,"tags":997,"lang":17},"Une nouvelle aventure dans l'open source : OpenGST",["Date","2014-10-01T00:00:00.000Z"],[696],[998,999,1000],"opengst","angular","opensource","Aujourd'hui marque le début d'une nouvelle aventure professionnelle : je me lance dans un projet open source. Après sept années passées dans le monde du service et du consulting, il est temps pour moi de changer de cap et d'explorer l'univers du produit.\n\n## Sept ans de service : un bilan\n\nPendant sept ans, j'ai travaillé dans le service, aidant des clients à résoudre leurs problèmes techniques, intégrant des solutions, développant des fonctionnalités sur mesure. C'était intense, varié, enrichissant. Chaque projet était différent, chaque client avait ses propres contraintes, ses propres technologies.\n\nDans cet environnement, l'efficacité était reine. Il fallait livrer vite, bien, et passer au projet suivant. On utilisait les technologies dans un seul but : être efficace. Pas le temps de creuser, pas le temps de peaufiner. On fait, on livre, on passe à autre chose.\n\nMais voilà, après sept ans, je ressentais le besoin de quelque chose de différent. L'envie de construire plutôt que d'assembler. L'envie de perfectionner plutôt que de livrer. L'envie de créer un produit plutôt que de résoudre des problèmes ponctuels.\n\n## Pourquoi le produit ?\n\nLa transition du service au produit n'est pas anodine. Ce sont deux mondes différents, avec des rythmes différents, des objectifs différents.\n\nCe qui m'attire dans le produit, c'est avant tout **le temps**. Le temps de faire les choses bien. Le temps d'itérer. Le temps de perfectionner l'expérience utilisateur. Dans le service, on livre et on passe à autre chose. Dans le produit, on reste sur la même base de code, on la fait évoluer, on l'améliore continuellement.\n\nC'est aussi l'opportunité de travailler sur **l'expérience utilisateur** de manière approfondie. Ne plus se contenter de \"ça marche\", mais viser \"c'est agréable à utiliser\". Comprendre les utilisateurs, recueillir leurs retours, itérer sur les fonctionnalités. C'est un luxe qu'on n'a pas toujours dans le service.\n\nEt puis il y a **AngularJS**. Ce framework m'a toujours fasciné. Son approche, son architecture, ses possibilités. Mais dans le monde du service, on n'a jamais vraiment le temps de maîtriser un framework en profondeur. On l'utilise, certes, mais superficiellement. Là, j'ai l'opportunité d'y passer du temps, beaucoup de temps, et de vraiment le maîtriser.\n\n## OpenGST : Le projet\n\nLe projet qui marque ce nouveau chapitre s'appelle **OpenGST** (Open Gestion).\n\nOpenGST est un projet open source visant à créer une solution de gestion moderne, basée sur des technologies web récentes. L'idée est de construire un outil flexible, extensible, et surtout avec une expérience utilisateur moderne.\n\nLe choix de l'open source n'est pas anodin. C'est une façon de :\n\n- **Partager** : Créer quelque chose qui peut servir à d'autres\n- **Apprendre** : Bénéficier des retours et contributions de la communauté\n- **Contribuer** : Rendre à l'écosystème open source ce qu'il nous a donné\n\n### La stack technique\n\nLe projet est construit sur **AngularJS**, ce qui me permet enfin de plonger en profondeur dans ce framework. AngularJS apporte :\n\n- Une architecture MVC claire\n- Un système de binding bidirectionnel puissant\n- Une approche modulaire\n- Un écosystème riche\n\nC'est l'occasion rêvée de comprendre non seulement comment utiliser le framework, mais comment en tirer le meilleur parti, comment structurer une application d'envergure, comment optimiser les performances.\n\n## Les objectifs\n\nPour ce projet, j'ai plusieurs objectifs :\n\n### Construire un produit de qualité\nNe pas se contenter du \"ça marche\". Viser l'excellence dans le code, dans l'architecture, dans l'expérience utilisateur.\n\n### Maîtriser AngularJS\nPasser du statut d'utilisateur occasionnel à celui d'expert. Comprendre les patterns, les bonnes pratiques, les pièges à éviter.\n\n### Créer une communauté\nUn projet open source sans communauté est un projet mort. L'objectif est de créer quelque chose qui intéresse les gens, qui leur soit utile, et qui les encourage à contribuer.\n\n### Apprendre l'approche produit\nComprendre comment on construit un produit. Comment on priorise les fonctionnalités. Comment on mesure le succès. Comment on fait évoluer une vision.\n\n## L'aventure commence\n\nC'est un changement important dans ma carrière. Passer du service au produit, c'est changer de rythme, de méthode, d'objectifs. Mais c'est exactement ce dont j'avais besoin après sept ans.\n\nJe suis excité par les défis qui m'attendent :\n- Construire une architecture solide\n- Créer une expérience utilisateur moderne\n- Gérer un projet open source\n- Maîtriser AngularJS en profondeur\n- Penser \"produit\" plutôt que \"projet\"\n\nLe code du projet est disponible sur [GitHub](https://github.com/opengst). C'est le début de l'aventure, et j'ai hâte de voir où elle nous mènera.\n\n## Remerciements\n\nJe tiens à remercier **atReal Ouest** de m'avoir donné cette opportunité. Croire en un projet open source, donner à un développeur le temps et les moyens de le construire, c'est précieux. C'est cette confiance qui permet à de tels projets de voir le jour.\n\n## Et vous ?\n\nSi vous avez vécu une transition similaire, du service au produit, ou si vous travaillez sur des projets open source, n'hésitez pas à partager votre expérience en commentaire. J'ai beaucoup à apprendre, et les retours d'expérience sont toujours précieux.\n\nRestez connectés pour suivre l'évolution d'OpenGST. L'aventure ne fait que commencer !\n\n---\n\n**Liens utiles :**\n- [OpenGST sur GitHub](https://github.com/opengst)\n- [AngularJS](https://angularjs.org/)\n- [atReal Ouest](http://www.atreal.fr/)","src/content/posts/2014-10-01-opengst.md","d144e1a306044e32",{"html":1005,"metadata":1006},"\u003Cp>Aujourd’hui marque le début d’une nouvelle aventure professionnelle : je me lance dans un projet open source. Après sept années passées dans le monde du service et du consulting, il est temps pour moi de changer de cap et d’explorer l’univers du produit.\u003C/p>\n\u003Ch2 id=\"sept-ans-de-service--un-bilan\">Sept ans de service : un bilan\u003C/h2>\n\u003Cp>Pendant sept ans, j’ai travaillé dans le service, aidant des clients à résoudre leurs problèmes techniques, intégrant des solutions, développant des fonctionnalités sur mesure. C’était intense, varié, enrichissant. Chaque projet était différent, chaque client avait ses propres contraintes, ses propres technologies.\u003C/p>\n\u003Cp>Dans cet environnement, l’efficacité était reine. Il fallait livrer vite, bien, et passer au projet suivant. On utilisait les technologies dans un seul but : être efficace. Pas le temps de creuser, pas le temps de peaufiner. On fait, on livre, on passe à autre chose.\u003C/p>\n\u003Cp>Mais voilà, après sept ans, je ressentais le besoin de quelque chose de différent. L’envie de construire plutôt que d’assembler. L’envie de perfectionner plutôt que de livrer. L’envie de créer un produit plutôt que de résoudre des problèmes ponctuels.\u003C/p>\n\u003Ch2 id=\"pourquoi-le-produit\">Pourquoi le produit ?\u003C/h2>\n\u003Cp>La transition du service au produit n’est pas anodine. Ce sont deux mondes différents, avec des rythmes différents, des objectifs différents.\u003C/p>\n\u003Cp>Ce qui m’attire dans le produit, c’est avant tout \u003Cstrong>le temps\u003C/strong>. Le temps de faire les choses bien. Le temps d’itérer. Le temps de perfectionner l’expérience utilisateur. Dans le service, on livre et on passe à autre chose. Dans le produit, on reste sur la même base de code, on la fait évoluer, on l’améliore continuellement.\u003C/p>\n\u003Cp>C’est aussi l’opportunité de travailler sur \u003Cstrong>l’expérience utilisateur\u003C/strong> de manière approfondie. Ne plus se contenter de “ça marche”, mais viser “c’est agréable à utiliser”. Comprendre les utilisateurs, recueillir leurs retours, itérer sur les fonctionnalités. C’est un luxe qu’on n’a pas toujours dans le service.\u003C/p>\n\u003Cp>Et puis il y a \u003Cstrong>AngularJS\u003C/strong>. Ce framework m’a toujours fasciné. Son approche, son architecture, ses possibilités. Mais dans le monde du service, on n’a jamais vraiment le temps de maîtriser un framework en profondeur. On l’utilise, certes, mais superficiellement. Là, j’ai l’opportunité d’y passer du temps, beaucoup de temps, et de vraiment le maîtriser.\u003C/p>\n\u003Ch2 id=\"opengst--le-projet\">OpenGST : Le projet\u003C/h2>\n\u003Cp>Le projet qui marque ce nouveau chapitre s’appelle \u003Cstrong>OpenGST\u003C/strong> (Open Gestion).\u003C/p>\n\u003Cp>OpenGST est un projet open source visant à créer une solution de gestion moderne, basée sur des technologies web récentes. L’idée est de construire un outil flexible, extensible, et surtout avec une expérience utilisateur moderne.\u003C/p>\n\u003Cp>Le choix de l’open source n’est pas anodin. C’est une façon de :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Partager\u003C/strong> : Créer quelque chose qui peut servir à d’autres\u003C/li>\n\u003Cli>\u003Cstrong>Apprendre\u003C/strong> : Bénéficier des retours et contributions de la communauté\u003C/li>\n\u003Cli>\u003Cstrong>Contribuer\u003C/strong> : Rendre à l’écosystème open source ce qu’il nous a donné\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"la-stack-technique\">La stack technique\u003C/h3>\n\u003Cp>Le projet est construit sur \u003Cstrong>AngularJS\u003C/strong>, ce qui me permet enfin de plonger en profondeur dans ce framework. AngularJS apporte :\u003C/p>\n\u003Cul>\n\u003Cli>Une architecture MVC claire\u003C/li>\n\u003Cli>Un système de binding bidirectionnel puissant\u003C/li>\n\u003Cli>Une approche modulaire\u003C/li>\n\u003Cli>Un écosystème riche\u003C/li>\n\u003C/ul>\n\u003Cp>C’est l’occasion rêvée de comprendre non seulement comment utiliser le framework, mais comment en tirer le meilleur parti, comment structurer une application d’envergure, comment optimiser les performances.\u003C/p>\n\u003Ch2 id=\"les-objectifs\">Les objectifs\u003C/h2>\n\u003Cp>Pour ce projet, j’ai plusieurs objectifs :\u003C/p>\n\u003Ch3 id=\"construire-un-produit-de-qualité\">Construire un produit de qualité\u003C/h3>\n\u003Cp>Ne pas se contenter du “ça marche”. Viser l’excellence dans le code, dans l’architecture, dans l’expérience utilisateur.\u003C/p>\n\u003Ch3 id=\"maîtriser-angularjs\">Maîtriser AngularJS\u003C/h3>\n\u003Cp>Passer du statut d’utilisateur occasionnel à celui d’expert. Comprendre les patterns, les bonnes pratiques, les pièges à éviter.\u003C/p>\n\u003Ch3 id=\"créer-une-communauté\">Créer une communauté\u003C/h3>\n\u003Cp>Un projet open source sans communauté est un projet mort. L’objectif est de créer quelque chose qui intéresse les gens, qui leur soit utile, et qui les encourage à contribuer.\u003C/p>\n\u003Ch3 id=\"apprendre-lapproche-produit\">Apprendre l’approche produit\u003C/h3>\n\u003Cp>Comprendre comment on construit un produit. Comment on priorise les fonctionnalités. Comment on mesure le succès. Comment on fait évoluer une vision.\u003C/p>\n\u003Ch2 id=\"laventure-commence\">L’aventure commence\u003C/h2>\n\u003Cp>C’est un changement important dans ma carrière. Passer du service au produit, c’est changer de rythme, de méthode, d’objectifs. Mais c’est exactement ce dont j’avais besoin après sept ans.\u003C/p>\n\u003Cp>Je suis excité par les défis qui m’attendent :\u003C/p>\n\u003Cul>\n\u003Cli>Construire une architecture solide\u003C/li>\n\u003Cli>Créer une expérience utilisateur moderne\u003C/li>\n\u003Cli>Gérer un projet open source\u003C/li>\n\u003Cli>Maîtriser AngularJS en profondeur\u003C/li>\n\u003Cli>Penser “produit” plutôt que “projet”\u003C/li>\n\u003C/ul>\n\u003Cp>Le code du projet est disponible sur \u003Ca href=\"https://github.com/opengst\">GitHub\u003C/a>. C’est le début de l’aventure, et j’ai hâte de voir où elle nous mènera.\u003C/p>\n\u003Ch2 id=\"remerciements\">Remerciements\u003C/h2>\n\u003Cp>Je tiens à remercier \u003Cstrong>atReal Ouest\u003C/strong> de m’avoir donné cette opportunité. Croire en un projet open source, donner à un développeur le temps et les moyens de le construire, c’est précieux. C’est cette confiance qui permet à de tels projets de voir le jour.\u003C/p>\n\u003Ch2 id=\"et-vous\">Et vous ?\u003C/h2>\n\u003Cp>Si vous avez vécu une transition similaire, du service au produit, ou si vous travaillez sur des projets open source, n’hésitez pas à partager votre expérience en commentaire. J’ai beaucoup à apprendre, et les retours d’expérience sont toujours précieux.\u003C/p>\n\u003Cp>Restez connectés pour suivre l’évolution d’OpenGST. L’aventure ne fait que commencer !\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Liens utiles :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/opengst\">OpenGST sur GitHub\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://angularjs.org/\">AngularJS\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"http://www.atreal.fr/\">atReal Ouest\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1007,"localImagePaths":1045,"remoteImagePaths":1046,"frontmatter":1047,"imagePaths":1051},[1008,1011,1014,1017,1021,1024,1027,1030,1033,1036,1039,1042],{"depth":449,"slug":1009,"text":1010},"sept-ans-de-service--un-bilan","Sept ans de service : un bilan",{"depth":449,"slug":1012,"text":1013},"pourquoi-le-produit","Pourquoi le produit ?",{"depth":449,"slug":1015,"text":1016},"opengst--le-projet","OpenGST : Le projet",{"depth":1018,"slug":1019,"text":1020},3,"la-stack-technique","La stack technique",{"depth":449,"slug":1022,"text":1023},"les-objectifs","Les objectifs",{"depth":1018,"slug":1025,"text":1026},"construire-un-produit-de-qualité","Construire un produit de qualité",{"depth":1018,"slug":1028,"text":1029},"maîtriser-angularjs","Maîtriser AngularJS",{"depth":1018,"slug":1031,"text":1032},"créer-une-communauté","Créer une communauté",{"depth":1018,"slug":1034,"text":1035},"apprendre-lapproche-produit","Apprendre l’approche produit",{"depth":449,"slug":1037,"text":1038},"laventure-commence","L’aventure commence",{"depth":449,"slug":1040,"text":1041},"remerciements","Remerciements",{"depth":449,"slug":1043,"text":1044},"et-vous","Et vous ?",[],[],{"title":994,"categories":1048,"tags":1049,"date":1050},[696],[998,999,1000],["Date","2014-10-01T00:00:00.000Z"],[],"2014-10-01-opengst.md","2016-10-10-talend-ui",{"id":1053,"data":1055,"body":1062,"filePath":1063,"digest":1064,"rendered":1065,"legacyId":1096},{"title":1056,"date":1057,"categories":1058,"tags":1059,"lang":17},"Talend UI : Quand vision et exécution se rencontrent",["Date","2016-10-10T00:00:00.000Z"],[696],[975,1060,1061],"React","JavaScript","Il y a des moments dans une carrière de développeur où tout s'aligne parfaitement. C'est ce qui s'est passé lorsque j'ai eu la chance d'entendre notre directeur technique partager sa vision des produits, alors que nous venions justement de démarrer un projet ambitieux : créer une bibliothèque React commune pour l'entreprise.\n\n## La vision\n\nLors de cette présentation, le directeur technique a partagé une vision claire et inspirante : unifier l'expérience utilisateur à travers tous nos produits. Plus de disparité entre les applications, plus de composants réinventés à chaque nouveau projet. Une seule et même expérience, cohérente et moderne.\n\nCette vision résonnait tellement avec ce que nous étions en train de construire ! Nous ne faisions pas juste \"une bibliothèque de composants React de plus\". Nous étions en train de poser les fondations d'un système de design unifié pour toute l'entreprise.\n\n## Le projet : Talend UI\n\nC'est ainsi qu'est né [Talend UI](https://github.com/Talend/ui/), notre bibliothèque de composants React open source.\n\n### Les objectifs\n\nDès le départ, nous avions des objectifs clairs :\n\n- **Cohérence** : Tous les produits Talend doivent offrir la même expérience utilisateur\n- **Réutilisabilité** : Écrire une fois, utiliser partout\n- **Qualité** : Des composants testés, documentés et maintenus\n- **Modernité** : Utiliser les technologies les plus récentes et les meilleures pratiques\n- **Open Source** : Partager avec la communauté et bénéficier de ses contributions\n\n### Les débuts\n\nLes premiers pas ont été excitants et challengeants à la fois. Il a fallu :\n\n1. **Définir l'architecture** : Comment organiser une bibliothèque de composants qui va grandir ?\n2. **Établir les conventions** : Quelles règles de codage, quelle structure de tests ?\n3. **Choisir les outils** : Webpack, Babel, Jest... l'écosystème JavaScript est vaste\n4. **Créer les premiers composants** : Les boutons, les formulaires, les modales...\n5. **Documenter** : Une bibliothèque sans documentation est une bibliothèque morte\n\n## La résonance\n\nCette synchronisation entre la vision du management et l'exécution technique a été un véritable catalyseur. Savoir que notre travail technique s'inscrivait dans une vision d'entreprise plus large nous a donné :\n\n- **Du sens** : Nous ne codions pas juste des composants, nous construisions l'avenir de l'expérience utilisateur chez Talend\n- **De la légitimité** : La direction soutenait notre approche\n- **De la motivation** : Voir la vision se concrétiser dans le code est extrêmement gratifiant\n- **De l'alignement** : Toutes les équipes comprenaient où nous allions\n\n## L'objectif\n\nTalend UI doit devenir la fondation de tous les produits Talend.\n\nLe projet doit pour ça rester ouvert, porté par une communauté active de développeurs internes. Chaque composant ajouté, chaque amélioration apportée renforce cette vision d'unification que nous avons.\n\n## Leçons apprises\n\nCette expérience m'a appris plusieurs choses importantes :\n\n1. **L'importance de la vision** : Un projet technique sans vision claire risque de partir dans tous les sens\n2. **Le timing** : Parfois, tout s'aligne au bon moment\n3. **La communication** : Entendre directement la vision du management crée un lien fort\n4. **L'open source** : Partager son code force à maintenir un niveau de qualité élevé\n5. **La persévérance** : Les débuts sont toujours difficiles, mais la vision guide le chemin\n\n## Conclusion\n\nSi vous avez la chance d'être dans une situation où vision stratégique et exécution technique s'alignent, saisissez-la. Ces moments sont rares et précieux. Ils permettent de créer quelque chose qui dépasse la simple somme des lignes de code.\n\nTalend UI est l'exemple parfait de ce qui peut naître quand une équipe technique travaille main dans la main avec une vision d'entreprise claire. Et c'est ce genre de projets qui rend notre métier de développeur si passionnant.\n\nVous pouvez découvrir le projet sur [GitHub](https://github.com/Talend/ui/) et voir comment cette vision initiale continue de vivre et d'évoluer.","src/content/posts/2016-10-10-talend-ui.md","8e316cfacf44bb36",{"html":1066,"metadata":1067},"\u003Cp>Il y a des moments dans une carrière de développeur où tout s’aligne parfaitement. C’est ce qui s’est passé lorsque j’ai eu la chance d’entendre notre directeur technique partager sa vision des produits, alors que nous venions justement de démarrer un projet ambitieux : créer une bibliothèque React commune pour l’entreprise.\u003C/p>\n\u003Ch2 id=\"la-vision\">La vision\u003C/h2>\n\u003Cp>Lors de cette présentation, le directeur technique a partagé une vision claire et inspirante : unifier l’expérience utilisateur à travers tous nos produits. Plus de disparité entre les applications, plus de composants réinventés à chaque nouveau projet. Une seule et même expérience, cohérente et moderne.\u003C/p>\n\u003Cp>Cette vision résonnait tellement avec ce que nous étions en train de construire ! Nous ne faisions pas juste “une bibliothèque de composants React de plus”. Nous étions en train de poser les fondations d’un système de design unifié pour toute l’entreprise.\u003C/p>\n\u003Ch2 id=\"le-projet--talend-ui\">Le projet : Talend UI\u003C/h2>\n\u003Cp>C’est ainsi qu’est né \u003Ca href=\"https://github.com/Talend/ui/\">Talend UI\u003C/a>, notre bibliothèque de composants React open source.\u003C/p>\n\u003Ch3 id=\"les-objectifs\">Les objectifs\u003C/h3>\n\u003Cp>Dès le départ, nous avions des objectifs clairs :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Cohérence\u003C/strong> : Tous les produits Talend doivent offrir la même expérience utilisateur\u003C/li>\n\u003Cli>\u003Cstrong>Réutilisabilité\u003C/strong> : Écrire une fois, utiliser partout\u003C/li>\n\u003Cli>\u003Cstrong>Qualité\u003C/strong> : Des composants testés, documentés et maintenus\u003C/li>\n\u003Cli>\u003Cstrong>Modernité\u003C/strong> : Utiliser les technologies les plus récentes et les meilleures pratiques\u003C/li>\n\u003Cli>\u003Cstrong>Open Source\u003C/strong> : Partager avec la communauté et bénéficier de ses contributions\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"les-débuts\">Les débuts\u003C/h3>\n\u003Cp>Les premiers pas ont été excitants et challengeants à la fois. Il a fallu :\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Définir l’architecture\u003C/strong> : Comment organiser une bibliothèque de composants qui va grandir ?\u003C/li>\n\u003Cli>\u003Cstrong>Établir les conventions\u003C/strong> : Quelles règles de codage, quelle structure de tests ?\u003C/li>\n\u003Cli>\u003Cstrong>Choisir les outils\u003C/strong> : Webpack, Babel, Jest… l’écosystème JavaScript est vaste\u003C/li>\n\u003Cli>\u003Cstrong>Créer les premiers composants\u003C/strong> : Les boutons, les formulaires, les modales…\u003C/li>\n\u003Cli>\u003Cstrong>Documenter\u003C/strong> : Une bibliothèque sans documentation est une bibliothèque morte\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"la-résonance\">La résonance\u003C/h2>\n\u003Cp>Cette synchronisation entre la vision du management et l’exécution technique a été un véritable catalyseur. Savoir que notre travail technique s’inscrivait dans une vision d’entreprise plus large nous a donné :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Du sens\u003C/strong> : Nous ne codions pas juste des composants, nous construisions l’avenir de l’expérience utilisateur chez Talend\u003C/li>\n\u003Cli>\u003Cstrong>De la légitimité\u003C/strong> : La direction soutenait notre approche\u003C/li>\n\u003Cli>\u003Cstrong>De la motivation\u003C/strong> : Voir la vision se concrétiser dans le code est extrêmement gratifiant\u003C/li>\n\u003Cli>\u003Cstrong>De l’alignement\u003C/strong> : Toutes les équipes comprenaient où nous allions\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"lobjectif\">L’objectif\u003C/h2>\n\u003Cp>Talend UI doit devenir la fondation de tous les produits Talend.\u003C/p>\n\u003Cp>Le projet doit pour ça rester ouvert, porté par une communauté active de développeurs internes. Chaque composant ajouté, chaque amélioration apportée renforce cette vision d’unification que nous avons.\u003C/p>\n\u003Ch2 id=\"leçons-apprises\">Leçons apprises\u003C/h2>\n\u003Cp>Cette expérience m’a appris plusieurs choses importantes :\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>L’importance de la vision\u003C/strong> : Un projet technique sans vision claire risque de partir dans tous les sens\u003C/li>\n\u003Cli>\u003Cstrong>Le timing\u003C/strong> : Parfois, tout s’aligne au bon moment\u003C/li>\n\u003Cli>\u003Cstrong>La communication\u003C/strong> : Entendre directement la vision du management crée un lien fort\u003C/li>\n\u003Cli>\u003Cstrong>L’open source\u003C/strong> : Partager son code force à maintenir un niveau de qualité élevé\u003C/li>\n\u003Cli>\u003Cstrong>La persévérance\u003C/strong> : Les débuts sont toujours difficiles, mais la vision guide le chemin\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>Si vous avez la chance d’être dans une situation où vision stratégique et exécution technique s’alignent, saisissez-la. Ces moments sont rares et précieux. Ils permettent de créer quelque chose qui dépasse la simple somme des lignes de code.\u003C/p>\n\u003Cp>Talend UI est l’exemple parfait de ce qui peut naître quand une équipe technique travaille main dans la main avec une vision d’entreprise claire. Et c’est ce genre de projets qui rend notre métier de développeur si passionnant.\u003C/p>\n\u003Cp>Vous pouvez découvrir le projet sur \u003Ca href=\"https://github.com/Talend/ui/\">GitHub\u003C/a> et voir comment cette vision initiale continue de vivre et d’évoluer.\u003C/p>",{"headings":1068,"localImagePaths":1089,"remoteImagePaths":1090,"frontmatter":1091,"imagePaths":1095},[1069,1072,1075,1076,1079,1082,1085,1088],{"depth":449,"slug":1070,"text":1071},"la-vision","La vision",{"depth":449,"slug":1073,"text":1074},"le-projet--talend-ui","Le projet : Talend UI",{"depth":1018,"slug":1022,"text":1023},{"depth":1018,"slug":1077,"text":1078},"les-débuts","Les débuts",{"depth":449,"slug":1080,"text":1081},"la-résonance","La résonance",{"depth":449,"slug":1083,"text":1084},"lobjectif","L’objectif",{"depth":449,"slug":1086,"text":1087},"leçons-apprises","Leçons apprises",{"depth":449,"slug":459,"text":460},[],[],{"title":1056,"categories":1092,"tags":1093,"date":1094},[696],[975,1060,1061],["Date","2016-10-10T00:00:00.000Z"],[],"2016-10-10-talend-ui.md","2016-08-29-react-cmf",{"id":1097,"data":1099,"body":1106,"filePath":1107,"digest":1108,"rendered":1109,"legacyId":1185},{"title":1100,"date":1101,"categories":1102,"tags":1103,"lang":17},"React CMF : Un framework pour des applications React configurables",["Date","2016-08-29T00:00:00.000Z"],[696],[975,1060,1061,1104,1105],"Redux","Framework","Mon premier défi : comment construire des applications React complètes de manière cohérente et configurable ? Après pas mal de discussion autours des differentes idées c'est devenu très clair: L'inversion de control IOC est la solutions.\n\nC'est ainsi qu'est né **React CMF** (Content Management Framework), un framework pour créer des applications React configurables.\n\n## Le problème\n\nAvec Talend UI, nous avions résolu le problème des composants réutilisables. Mais construire une application complète nécessite bien plus que des composants :\n\n- Comment gérer le routing ?\n- Comment organiser le state management avec Redux ?\n- Comment permettre la configuration de l'interface ?\n- Comment réutiliser des patterns d'application entre différents produits ?\n\nChaque équipe réinventait sa propre architecture, avec ses propres conventions. Nous avions besoin d'un cadre commun, d'un framework qui dicte les bonnes pratiques tout en restant flexible.\n\n## Pourquoi \"CMF\" ?\n\nLe nom peut surprendre au premier abord. CMF pour Content Management Framework ? Mais nous ne construisons pas WordPress !\n\nEn réalité, la définition de Wikipedia d'un CMF colle parfaitement à notre besoin :\n\n> \"Un framework de gestion de contenu (CMF) est un système qui facilite l'utilisation de composants réutilisables ou de logiciels personnalisés pour gérer le contenu Web. Il partage des aspects d'un framework d'application Web et d'un système de gestion de contenu.\"\n\nC'est exactement ce que nous voulions : un framework qui facilite la construction d'applications Web avec des composants réutilisables et configurables.\n\n## Le paradigme\n\nAvant de plonger dans les détails techniques, nous avons défini le paradigme fondamental de CMF :\n\n**Un utilisateur interagit avec une vue** en utilisant sa souris et/ou son clavier, ce qui envoie des événements depuis un contenu. Cette interaction **dispatch une action**. Cette action peut changer la vue actuelle ou le contenu affiché.\n\nCe paradigme peut paraître simple, mais il structure toute l'architecture du framework.\n\n## Les concepts fondamentaux\n\nCMF repose sur trois concepts principaux :\n\n### 1. Les Views (Vues)\n\nLes vues sont des composants React spéciaux. Ce sont des composants de haut niveau avec une responsabilité claire : **distribuer les props aux composants configurables**.\n\nLes vues sont appelées par la bibliothèque d'abstraction UI depuis le routeur et connectées au store via les settings. Une vue peut être un composant pur (pure component).\n\nUne vue est composée de composants React qui peuvent récupérer leurs props de manière configurable.\n\n### 2. Les Actions\n\nLes actions sont simplement des actions Redux. Rien de révolutionnaire ici, mais leur intégration dans le système de configuration est la clé.\n\nCMF fournit un registre d'action creators qui peuvent être référencés par configuration. Cela permet de changer le comportement de l'application sans toucher au code.\n\n### 3. Les Content Types (Types de contenu)\n\nUn content type définit des métadonnées sur un contenu. Par exemple, quand vous affichez une liste d'articles, vous dites que chaque élément de cette liste est un \"article\", qui est un content type.\n\nCMF ajoute des métadonnées sur les content types :\n\n- **title** : Le titre du type de contenu\n- **icon id** : L'identifiant de l'icône à afficher\n- **actions** : Les actions disponibles (organisées par catégorie)\n\nCette approche permet de configurer l'interface en fonction du type de contenu affiché.\n\n## Le Registry : Le cœur du système\n\nAu centre de CMF se trouve le **Registry** (registre). C'est une pièce maîtresse simple mais puissante : un système clé/objet avec préfixes pour stocker :\n\n- Les **action creators** (fonctions)\n- Les **views** (composants React)\n- Les **configurations** de composants\n\nLe Registry permet de référencer des éléments par leur nom plutôt que par import direct. Cela ouvre la porte à la configuration :\n\n```javascript\n// Au lieu de\nimport MyView from './MyView';\n\n// On fait\nconst MyView = registry.getView('MyView');\n```\n\nCette indirection permet de changer les vues, les actions et les comportements via configuration, sans recompiler l'application.\n\n## L'architecture en pratique\n\nVoici comment tout s'articule :\n\n1. **Le routeur** appelle une vue basée sur l'URL\n2. **La vue** récupère sa configuration depuis le Registry\n3. **Les composants** de la vue reçoivent leurs props via cette configuration\n4. **Les actions** sont dispatchées quand l'utilisateur interagit\n5. **Le state Redux** est mis à jour\n6. **Les composants** se re-rendent avec les nouvelles données\n\nTout est configurable, tout est prévisible, tout est testable.\n\n## Les avantages\n\nCette architecture apporte plusieurs avantages majeurs :\n\n### Configurabilité\nLes applications peuvent être configurées sans recompilation. Changez la configuration, rechargez la page, et voilà !\n\n### Réutilisabilité\nLes patterns d'application sont réutilisables entre produits. Une fois qu'une vue est créée, elle peut être utilisée partout.\n\n### Testabilité\nLes composants purs, les actions Redux et la configuration séparée rendent le testing beaucoup plus simple.\n\n### Maintenabilité\nL'architecture claire et les conventions fortes facilitent la maintenance et l'onboarding de nouveaux développeurs.\n\n### Extensibilité\nAjouter de nouvelles fonctionnalités est simplifié grâce au système de registry.\n\n## Les défis\n\nCréer un tel framework n'a pas été sans défis :\n\n### La courbe d'apprentissage\nCMF introduit des concepts supplémentaires. Les développeurs doivent comprendre le Registry, la configuration, et les conventions.\n\n### L'équilibre flexibilité/contraintes\nTrop de contraintes et le framework devient limitant. Pas assez, et on perd les bénéfices de standardisation.\n\n### La documentation\nUn framework sans documentation est inutile. Nous avons dû investir énormément dans la documentation et les exemples.\n\n### Les performances\nL'indirection du Registry a un coût. Nous avons dû optimiser pour que ce coût reste négligeable.\n\n## L'évolution\n\nCMF a évolué avec le temps :\n\n- Support de React Router\n- Intégration avec Redux Saga\n- Amélioration du système de configuration\n- Ajout de helpers et d'utilitaires\n- Optimisation des performances\n\nChaque itération nous a rapprochés d'un framework mature et stable.\n\n## Leçons apprises\n\nCette aventure nous a appris plusieurs choses :\n\n1. **L'abstraction a un prix** : Chaque couche d'abstraction ajoute de la complexité. Il faut que les bénéfices justifient ce coût.\n\n2. **La configuration est puissante** : Pouvoir changer le comportement sans recompiler ouvre de nombreuses possibilités.\n\n3. **Les conventions libèrent** : Avoir des conventions fortes réduit la charge cognitive et accélère le développement.\n\n4. **La documentation est critique** : Un framework sans documentation est un framework mort.\n\n5. **L'itération est essentielle** : Nous n'avons pas créé le framework parfait du premier coup. Chaque retour utilisateur nous a aidés à l'améliorer.\n\n## Conclusion\n\nReact CMF est le chaînon manquant entre une bibliothèque de composants (Talend UI) et des applications complètes. Il fournit l'architecture, les patterns et les conventions nécessaires pour construire des applications React configurables et maintenables.\n\nAvec Talend UI pour les composants et React CMF pour l'architecture, nous avons créé un écosystème complet pour le développement d'applications React chez Talend.\n\nLe framework continue d'évoluer, porté par les besoins réels des équipes de développement et les retours d'expérience de son utilisation en production.\n\nSi vous construisez plusieurs applications React avec des patterns similaires, je vous encourage à explorer cette approche. La configurabilité et la réutilisabilité qu'elle apporte peuvent transformer votre façon de développer.\n\n---\n\n**Liens utiles :**\n\n- [Talend UI sur GitHub](https://github.com/Talend/ui/)\n- [React CMF Documentation](https://github.com/Talend/ui/tree/master/packages/cmf)\n- [Redux](https://redux.js.org/)\n- [React Router](https://reactrouter.com/)","src/content/posts/2016-08-29-react-cmf.md","04a5ceff5131f238",{"html":1110,"metadata":1111},"\u003Cp>Mon premier défi : comment construire des applications React complètes de manière cohérente et configurable ? Après pas mal de discussion autours des differentes idées c’est devenu très clair: L’inversion de control IOC est la solutions.\u003C/p>\n\u003Cp>C’est ainsi qu’est né \u003Cstrong>React CMF\u003C/strong> (Content Management Framework), un framework pour créer des applications React configurables.\u003C/p>\n\u003Ch2 id=\"le-problème\">Le problème\u003C/h2>\n\u003Cp>Avec Talend UI, nous avions résolu le problème des composants réutilisables. Mais construire une application complète nécessite bien plus que des composants :\u003C/p>\n\u003Cul>\n\u003Cli>Comment gérer le routing ?\u003C/li>\n\u003Cli>Comment organiser le state management avec Redux ?\u003C/li>\n\u003Cli>Comment permettre la configuration de l’interface ?\u003C/li>\n\u003Cli>Comment réutiliser des patterns d’application entre différents produits ?\u003C/li>\n\u003C/ul>\n\u003Cp>Chaque équipe réinventait sa propre architecture, avec ses propres conventions. Nous avions besoin d’un cadre commun, d’un framework qui dicte les bonnes pratiques tout en restant flexible.\u003C/p>\n\u003Ch2 id=\"pourquoi-cmf\">Pourquoi “CMF” ?\u003C/h2>\n\u003Cp>Le nom peut surprendre au premier abord. CMF pour Content Management Framework ? Mais nous ne construisons pas WordPress !\u003C/p>\n\u003Cp>En réalité, la définition de Wikipedia d’un CMF colle parfaitement à notre besoin :\u003C/p>\n\u003Cblockquote>\n\u003Cp>“Un framework de gestion de contenu (CMF) est un système qui facilite l’utilisation de composants réutilisables ou de logiciels personnalisés pour gérer le contenu Web. Il partage des aspects d’un framework d’application Web et d’un système de gestion de contenu.”\u003C/p>\n\u003C/blockquote>\n\u003Cp>C’est exactement ce que nous voulions : un framework qui facilite la construction d’applications Web avec des composants réutilisables et configurables.\u003C/p>\n\u003Ch2 id=\"le-paradigme\">Le paradigme\u003C/h2>\n\u003Cp>Avant de plonger dans les détails techniques, nous avons défini le paradigme fondamental de CMF :\u003C/p>\n\u003Cp>\u003Cstrong>Un utilisateur interagit avec une vue\u003C/strong> en utilisant sa souris et/ou son clavier, ce qui envoie des événements depuis un contenu. Cette interaction \u003Cstrong>dispatch une action\u003C/strong>. Cette action peut changer la vue actuelle ou le contenu affiché.\u003C/p>\n\u003Cp>Ce paradigme peut paraître simple, mais il structure toute l’architecture du framework.\u003C/p>\n\u003Ch2 id=\"les-concepts-fondamentaux\">Les concepts fondamentaux\u003C/h2>\n\u003Cp>CMF repose sur trois concepts principaux :\u003C/p>\n\u003Ch3 id=\"1-les-views-vues\">1. Les Views (Vues)\u003C/h3>\n\u003Cp>Les vues sont des composants React spéciaux. Ce sont des composants de haut niveau avec une responsabilité claire : \u003Cstrong>distribuer les props aux composants configurables\u003C/strong>.\u003C/p>\n\u003Cp>Les vues sont appelées par la bibliothèque d’abstraction UI depuis le routeur et connectées au store via les settings. Une vue peut être un composant pur (pure component).\u003C/p>\n\u003Cp>Une vue est composée de composants React qui peuvent récupérer leurs props de manière configurable.\u003C/p>\n\u003Ch3 id=\"2-les-actions\">2. Les Actions\u003C/h3>\n\u003Cp>Les actions sont simplement des actions Redux. Rien de révolutionnaire ici, mais leur intégration dans le système de configuration est la clé.\u003C/p>\n\u003Cp>CMF fournit un registre d’action creators qui peuvent être référencés par configuration. Cela permet de changer le comportement de l’application sans toucher au code.\u003C/p>\n\u003Ch3 id=\"3-les-content-types-types-de-contenu\">3. Les Content Types (Types de contenu)\u003C/h3>\n\u003Cp>Un content type définit des métadonnées sur un contenu. Par exemple, quand vous affichez une liste d’articles, vous dites que chaque élément de cette liste est un “article”, qui est un content type.\u003C/p>\n\u003Cp>CMF ajoute des métadonnées sur les content types :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>title\u003C/strong> : Le titre du type de contenu\u003C/li>\n\u003Cli>\u003Cstrong>icon id\u003C/strong> : L’identifiant de l’icône à afficher\u003C/li>\n\u003Cli>\u003Cstrong>actions\u003C/strong> : Les actions disponibles (organisées par catégorie)\u003C/li>\n\u003C/ul>\n\u003Cp>Cette approche permet de configurer l’interface en fonction du type de contenu affiché.\u003C/p>\n\u003Ch2 id=\"le-registry--le-cœur-du-système\">Le Registry : Le cœur du système\u003C/h2>\n\u003Cp>Au centre de CMF se trouve le \u003Cstrong>Registry\u003C/strong> (registre). C’est une pièce maîtresse simple mais puissante : un système clé/objet avec préfixes pour stocker :\u003C/p>\n\u003Cul>\n\u003Cli>Les \u003Cstrong>action creators\u003C/strong> (fonctions)\u003C/li>\n\u003Cli>Les \u003Cstrong>views\u003C/strong> (composants React)\u003C/li>\n\u003Cli>Les \u003Cstrong>configurations\u003C/strong> de composants\u003C/li>\n\u003C/ul>\n\u003Cp>Le Registry permet de référencer des éléments par leur nom plutôt que par import direct. Cela ouvre la porte à la configuration :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Au lieu de\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> MyView \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> './MyView'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// On fait\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> MyView \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> registry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">getView\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'MyView'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Cette indirection permet de changer les vues, les actions et les comportements via configuration, sans recompiler l’application.\u003C/p>\n\u003Ch2 id=\"larchitecture-en-pratique\">L’architecture en pratique\u003C/h2>\n\u003Cp>Voici comment tout s’articule :\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Le routeur\u003C/strong> appelle une vue basée sur l’URL\u003C/li>\n\u003Cli>\u003Cstrong>La vue\u003C/strong> récupère sa configuration depuis le Registry\u003C/li>\n\u003Cli>\u003Cstrong>Les composants\u003C/strong> de la vue reçoivent leurs props via cette configuration\u003C/li>\n\u003Cli>\u003Cstrong>Les actions\u003C/strong> sont dispatchées quand l’utilisateur interagit\u003C/li>\n\u003Cli>\u003Cstrong>Le state Redux\u003C/strong> est mis à jour\u003C/li>\n\u003Cli>\u003Cstrong>Les composants\u003C/strong> se re-rendent avec les nouvelles données\u003C/li>\n\u003C/ol>\n\u003Cp>Tout est configurable, tout est prévisible, tout est testable.\u003C/p>\n\u003Ch2 id=\"les-avantages\">Les avantages\u003C/h2>\n\u003Cp>Cette architecture apporte plusieurs avantages majeurs :\u003C/p>\n\u003Ch3 id=\"configurabilité\">Configurabilité\u003C/h3>\n\u003Cp>Les applications peuvent être configurées sans recompilation. Changez la configuration, rechargez la page, et voilà !\u003C/p>\n\u003Ch3 id=\"réutilisabilité\">Réutilisabilité\u003C/h3>\n\u003Cp>Les patterns d’application sont réutilisables entre produits. Une fois qu’une vue est créée, elle peut être utilisée partout.\u003C/p>\n\u003Ch3 id=\"testabilité\">Testabilité\u003C/h3>\n\u003Cp>Les composants purs, les actions Redux et la configuration séparée rendent le testing beaucoup plus simple.\u003C/p>\n\u003Ch3 id=\"maintenabilité\">Maintenabilité\u003C/h3>\n\u003Cp>L’architecture claire et les conventions fortes facilitent la maintenance et l’onboarding de nouveaux développeurs.\u003C/p>\n\u003Ch3 id=\"extensibilité\">Extensibilité\u003C/h3>\n\u003Cp>Ajouter de nouvelles fonctionnalités est simplifié grâce au système de registry.\u003C/p>\n\u003Ch2 id=\"les-défis\">Les défis\u003C/h2>\n\u003Cp>Créer un tel framework n’a pas été sans défis :\u003C/p>\n\u003Ch3 id=\"la-courbe-dapprentissage\">La courbe d’apprentissage\u003C/h3>\n\u003Cp>CMF introduit des concepts supplémentaires. Les développeurs doivent comprendre le Registry, la configuration, et les conventions.\u003C/p>\n\u003Ch3 id=\"léquilibre-flexibilitécontraintes\">L’équilibre flexibilité/contraintes\u003C/h3>\n\u003Cp>Trop de contraintes et le framework devient limitant. Pas assez, et on perd les bénéfices de standardisation.\u003C/p>\n\u003Ch3 id=\"la-documentation\">La documentation\u003C/h3>\n\u003Cp>Un framework sans documentation est inutile. Nous avons dû investir énormément dans la documentation et les exemples.\u003C/p>\n\u003Ch3 id=\"les-performances\">Les performances\u003C/h3>\n\u003Cp>L’indirection du Registry a un coût. Nous avons dû optimiser pour que ce coût reste négligeable.\u003C/p>\n\u003Ch2 id=\"lévolution\">L’évolution\u003C/h2>\n\u003Cp>CMF a évolué avec le temps :\u003C/p>\n\u003Cul>\n\u003Cli>Support de React Router\u003C/li>\n\u003Cli>Intégration avec Redux Saga\u003C/li>\n\u003Cli>Amélioration du système de configuration\u003C/li>\n\u003Cli>Ajout de helpers et d’utilitaires\u003C/li>\n\u003Cli>Optimisation des performances\u003C/li>\n\u003C/ul>\n\u003Cp>Chaque itération nous a rapprochés d’un framework mature et stable.\u003C/p>\n\u003Ch2 id=\"leçons-apprises\">Leçons apprises\u003C/h2>\n\u003Cp>Cette aventure nous a appris plusieurs choses :\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>L’abstraction a un prix\u003C/strong> : Chaque couche d’abstraction ajoute de la complexité. Il faut que les bénéfices justifient ce coût.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>La configuration est puissante\u003C/strong> : Pouvoir changer le comportement sans recompiler ouvre de nombreuses possibilités.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Les conventions libèrent\u003C/strong> : Avoir des conventions fortes réduit la charge cognitive et accélère le développement.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>La documentation est critique\u003C/strong> : Un framework sans documentation est un framework mort.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>L’itération est essentielle\u003C/strong> : Nous n’avons pas créé le framework parfait du premier coup. Chaque retour utilisateur nous a aidés à l’améliorer.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>React CMF est le chaînon manquant entre une bibliothèque de composants (Talend UI) et des applications complètes. Il fournit l’architecture, les patterns et les conventions nécessaires pour construire des applications React configurables et maintenables.\u003C/p>\n\u003Cp>Avec Talend UI pour les composants et React CMF pour l’architecture, nous avons créé un écosystème complet pour le développement d’applications React chez Talend.\u003C/p>\n\u003Cp>Le framework continue d’évoluer, porté par les besoins réels des équipes de développement et les retours d’expérience de son utilisation en production.\u003C/p>\n\u003Cp>Si vous construisez plusieurs applications React avec des patterns similaires, je vous encourage à explorer cette approche. La configurabilité et la réutilisabilité qu’elle apporte peuvent transformer votre façon de développer.\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Liens utiles :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/Talend/ui/\">Talend UI sur GitHub\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/Talend/ui/tree/master/packages/cmf\">React CMF Documentation\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://redux.js.org/\">Redux\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://reactrouter.com/\">React Router\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1112,"localImagePaths":1178,"remoteImagePaths":1179,"frontmatter":1180,"imagePaths":1184},[1113,1116,1119,1122,1125,1128,1131,1134,1137,1140,1143,1146,1149,1152,1155,1158,1161,1164,1167,1170,1173,1176,1177],{"depth":449,"slug":1114,"text":1115},"le-problème","Le problème",{"depth":449,"slug":1117,"text":1118},"pourquoi-cmf","Pourquoi “CMF” ?",{"depth":449,"slug":1120,"text":1121},"le-paradigme","Le paradigme",{"depth":449,"slug":1123,"text":1124},"les-concepts-fondamentaux","Les concepts fondamentaux",{"depth":1018,"slug":1126,"text":1127},"1-les-views-vues","1. Les Views (Vues)",{"depth":1018,"slug":1129,"text":1130},"2-les-actions","2. Les Actions",{"depth":1018,"slug":1132,"text":1133},"3-les-content-types-types-de-contenu","3. Les Content Types (Types de contenu)",{"depth":449,"slug":1135,"text":1136},"le-registry--le-cœur-du-système","Le Registry : Le cœur du système",{"depth":449,"slug":1138,"text":1139},"larchitecture-en-pratique","L’architecture en pratique",{"depth":449,"slug":1141,"text":1142},"les-avantages","Les avantages",{"depth":1018,"slug":1144,"text":1145},"configurabilité","Configurabilité",{"depth":1018,"slug":1147,"text":1148},"réutilisabilité","Réutilisabilité",{"depth":1018,"slug":1150,"text":1151},"testabilité","Testabilité",{"depth":1018,"slug":1153,"text":1154},"maintenabilité","Maintenabilité",{"depth":1018,"slug":1156,"text":1157},"extensibilité","Extensibilité",{"depth":449,"slug":1159,"text":1160},"les-défis","Les défis",{"depth":1018,"slug":1162,"text":1163},"la-courbe-dapprentissage","La courbe d’apprentissage",{"depth":1018,"slug":1165,"text":1166},"léquilibre-flexibilitécontraintes","L’équilibre flexibilité/contraintes",{"depth":1018,"slug":1168,"text":1169},"la-documentation","La documentation",{"depth":1018,"slug":1171,"text":1172},"les-performances","Les performances",{"depth":449,"slug":1174,"text":1175},"lévolution","L’évolution",{"depth":449,"slug":1086,"text":1087},{"depth":449,"slug":459,"text":460},[],[],{"title":1100,"categories":1181,"tags":1182,"date":1183},[696],[975,1060,1061,1104,1105],["Date","2016-08-29T00:00:00.000Z"],[],"2016-08-29-react-cmf.md","2017-01-10-yarn-and-dependencies-copy",{"id":1186,"data":1188,"body":1195,"filePath":1196,"digest":1197,"rendered":1198,"legacyId":1258},{"title":1189,"date":1190,"categories":1191,"tags":1192,"lang":17},"Yarn et les dépendances : Une révolution dans la gestion des packages JavaScript",["Date","2017-06-10T00:00:00.000Z"],[696],[975,1193,1061,1194],"Yarn","MonoRepo","Dans le monde JavaScript, la gestion des dépendances a toujours été un défi. Puis est arrivé Yarn, qui a changé la donne. Retour sur cette révolution et ses avantages, particulièrement dans le contexte des mono-repositories.\n\n## L'histoire de Yarn\n\nEn octobre 2016, **Facebook**, en collaboration avec **Exponent** (aujourd'hui Expo), **Google** et **Tilde**, annonce la sortie de Yarn. Le projet est principalement mené par **Sebastian McKenzie**, ingénieur chez Facebook et créateur de Babel.\n\nÀ cette époque, npm (le gestionnaire de packages par défaut de Node.js) souffrait de plusieurs problèmes :\n- **Lenteur** : Les installations prenaient un temps considérable\n- **Non-déterminisme** : Deux installations successives pouvaient donner des résultats différents\n- **Manque de fiabilité** : Les installations échouaient parfois sans raison apparente\n- **Problèmes de sécurité** : Peu de vérifications sur l'intégrité des packages\n\nYarn est né de la frustration de grandes entreprises qui géraient des bases de code massives avec des milliers de dépendances. Facebook, en particulier, avait besoin d'une solution plus robuste pour gérer React, React Native et ses nombreux autres projets open source.\n\n## L'adoption fulgurante\n\nL'adoption de Yarn a été remarquablement rapide :\n\n- **Octobre 2016** : Sortie de Yarn 0.15.1\n- **Fin 2016** : Adoption par de nombreux projets majeurs (React, Angular, Ember...)\n\nChez **Talend**, nous avons adopté Yarn dès janvier car nous souffrions terriblement du manque de stabilite des installations avec NPM et le besoin de faire un monorepo c est fait sentir tres vite pour eviter le lag des releases entre les differents repository.\n\n## Le fichier yarn.lock : Le héros méconnu\n\nLe véritable génie de Yarn réside dans son fichier `yarn.lock`. C'est ce fichier qui garantit le **déterminisme** des installations.\n\n### Comment ça marche ?\n\nQuand vous installez un package avec Yarn, il crée (ou met à jour) un fichier `yarn.lock` qui contient :\n- Les versions **exactes** de tous les packages installés\n- Les versions de toutes les dépendances transitives\n- Les checksums pour vérifier l'intégrité\n\n```yaml\n\"@babel/core@^7.0.0\":\n  version \"7.12.10\"\n  resolved \"https://registry.yarnpkg.com/@babel/core/-/core-7.12.10.tgz#...\"\n  integrity sha512-eTAlQKq65zHfkHZV0sIVODCPGVgoo1HdBlbSLi9CqOzuZanMv2ihzY+4paiKr1mH+XmYESMAmJ/dpZ68eN6d8w==\n  dependencies:\n    \"@babel/code-frame\" \"^7.10.4\"\n    \"@babel/generator\" \"^7.12.10\"\n    ...\n```\n\n### Pourquoi c'est crucial ?\n\nImaginez ce scénario classique avec npm (avant npm 5) :\n\n1. Développeur A installe les dépendances : `package.json` spécifie `\"lodash\": \"^4.0.0\"`\n2. Lodash 4.17.10 est installé\n3. Deux mois plus tard, Lodash 4.17.20 sort avec un bug\n4. Développeur B clone le projet et installe : il obtient la version 4.17.20\n5. L'application ne fonctionne plus chez B mais fonctionne chez A\n6. Début d'un long debugging...\n\nAvec `yarn.lock`, ce problème n'existe plus. Les deux développeurs obtiennent **exactement** la même version de chaque package.\n\n## Yarn et les Mono-repositories\n\nC'est dans le contexte des **mono-repositories** que Yarn brille particulièrement. Un monorepo, c'est un repository unique contenant plusieurs projets (souvent appelés \"packages\" ou \"workspaces\").\n\n### Le problème avant Yarn Workspaces\n\nPrenons un exemple concret chez Talend. Nous avions :\n- Un package de composants UI (`@talend/components`)\n- Un package de redux actions (`@talend/actions`)\n- Une application consommant les deux\n\nAvant Yarn Workspaces, chaque package avait son propre `node_modules` :\n\n```\nmonorepo/\n├── packages/\n│   ├── components/\n│   │   └── node_modules/    (React 16.8.0, lodash 4.17.10...)\n│   ├── actions/\n│   │   └── node_modules/    (React 16.8.0, lodash 4.17.15...)\n│   └── app/\n│       └── node_modules/     (React 16.8.0, lodash 4.17.20...)\n```\n\nProblèmes :\n- **Duplication massive** : React installé 3 fois !\n- **Versions différentes** : Lodash en 3 versions différentes\n- **Espace disque** : Des gigaoctets gaspillés\n- **Temps d'installation** : Multiplié par le nombre de packages\n- **Conflits de versions** : Difficiles à détecter\n\n### La solution : Yarn Workspaces\n\nYarn Workspaces (introduit en Yarn 1.0, septembre 2017) résout ces problèmes élégamment.\n\nConfiguration dans le `package.json` racine :\n\n```json\n{\n  \"private\": true,\n  \"workspaces\": [\n    \"packages/*\"\n  ]\n}\n```\n\nRésultat :\n\n```\nmonorepo/\n├── node_modules/         (UN SEUL node_modules à la racine)\n│   ├── react/           (Version unique : 16.8.0)\n│   ├── lodash/          (Version unique : 4.17.20)\n│   ├── @talend/\n│   │   ├── components/  (symlink vers packages/components)\n│   │   └── actions/     (symlink vers packages/actions)\n├── packages/\n│   ├── components/\n│   ├── actions/\n│   └── app/\n└── yarn.lock            (UN SEUL fichier de lock)\n```\n\n### Les avantages en pratique\n\nChez Talend, la migration vers Yarn Workspaces nous a apporté :\n\n1. **Réduction de 70% de l'espace disque** utilisé par node_modules\n2. **Installation 3x plus rapide** : Une seule installation au lieu de N\n3. **Cohérence garantie** : Impossible d'avoir des versions différentes d'une machine a l'autre\n4. **Développement simplifié** : Les changements dans un package sont immédiatement visibles dans les autres\n5. **CI/CD optimisé** : Un seul `yarn install` pour tout le monorepo\n\n### Exemple concret\n\nAvant, pour travailler sur `@talend/components` et voir les changements dans l'app :\n\n```bash\ncd packages/components\n# faire des changements\nyarn build\nyarn pack\ncd ../app\nyarn add ../components/talend-components-v1.0.0.tgz\nyarn start\n```\n\nAvec Yarn Workspaces :\n\n```bash\ncd packages/components\n# faire des changements\ncd ../app\nyarn start\n# Les changements sont immédiatement visibles ! 🎉\n```\n\n## Les autres avantages de Yarn\n\nAu-delà des workspaces, Yarn offre de nombreux autres avantages :\n\n### 1. Performance\n\n- **Installation parallèle** : Yarn télécharge et installe plusieurs packages en parallèle\n- **Cache offline** : Une fois un package téléchargé, il est mis en cache\n- **Installation déterministe** : Même ordre d'installation = performances prévisibles\n\nSur notre CI, nous sommes passés de **8 minutes** d'installation (npm) à **2 minutes** (Yarn) !\n\n### 2. Sécurité\n\nYarn vérifie l'intégrité de chaque package installé grâce aux checksums dans le yarn.lock :\n\n```bash\n$ yarn install\n[1/4] 🔍  Resolving packages...\n[2/4] 🚚  Fetching packages...\n[3/4] 🔗  Linking dependencies...\n[4/4] 🔨  Building fresh packages...\n✨ Done in 2.45s.\n```\n\nSi un package a été modifié ou corrompu, Yarn le détecte immédiatement.\n\n### 3. Commandes utiles\n\nYarn ajoute des commandes pratiques :\n\n```bash\n# Voir pourquoi un package est installé\nyarn why lodash\n\n# Mettre à jour interactivement\nyarn upgrade-interactive\n\n# Lister les packages obsolètes\nyarn outdated\n\n# Vérifier les licences\nyarn licenses list\n```\n\n### 4. Résolution des conflits\n\nLe fichier `yarn.lock` est conçu pour éviter les conflits git :\n\n```yaml\n# Structure claire et lisible\n\"package@version\":\n  version \"exact-version\"\n  resolved \"url\"\n  integrity \"checksum\"\n  dependencies:\n    dep \"version\"\n```\n\nLes conflits de merge sont faciles à résoudre.\n\n## Notre expérience chez Talend\n\nLa migration vers Yarn a été un des meilleurs choix techniques que nous ayons faits. Voici quelques chiffres concrets :\n\n- **~15 packages** dans notre monorepo\n- **~2000 dépendances** au total\n- **Avant Yarn** : 8 minutes d'installation, 4 GB de node_modules\n- **Après Yarn** : 2 minutes d'installation, 1.2 GB de node_modules\n- **Gain de productivité** : Immédiat et mesurable\n\n## Conclusion\n\nYarn a apporté une véritable révolution dans l'écosystème JavaScript :\n- **Déterminisme** grâce au yarn.lock\n- **Performance** avec l'installation parallèle et le cache\n- **Workspaces** pour les monorepos\n- **Sécurité** avec la vérification d'intégrité\n\nAujourd'hui, npm a rattrapé une partie de son retard (notamment avec npm 7+ qui supporte les workspaces), mais Yarn reste un choix solide, particulièrement pour les projets complexes et les monorepos.\n\nSi vous n'utilisez pas encore Yarn dans votre projet, je vous encourage vivement à l'essayer. Le gain en fiabilité et en productivité est réel et immédiat.\n\nEt vous, quelle est votre expérience avec Yarn ? Utilisez-vous les workspaces ? N'hésitez pas à partager en commentaire !\n\n---\n\n**Pour aller plus loin :**\n- [Documentation officielle Yarn](https://yarnpkg.com/)\n- [Yarn Workspaces](https://yarnpkg.com/features/workspaces)\n- [Migrating from npm to Yarn](https://yarnpkg.com/getting-started/migration)","src/content/posts/2017-01-10-yarn-and-dependencies copy.md","2a0410aba4d7b5e6",{"html":1199,"metadata":1200},"\u003Cp>Dans le monde JavaScript, la gestion des dépendances a toujours été un défi. Puis est arrivé Yarn, qui a changé la donne. Retour sur cette révolution et ses avantages, particulièrement dans le contexte des mono-repositories.\u003C/p>\n\u003Ch2 id=\"lhistoire-de-yarn\">L’histoire de Yarn\u003C/h2>\n\u003Cp>En octobre 2016, \u003Cstrong>Facebook\u003C/strong>, en collaboration avec \u003Cstrong>Exponent\u003C/strong> (aujourd’hui Expo), \u003Cstrong>Google\u003C/strong> et \u003Cstrong>Tilde\u003C/strong>, annonce la sortie de Yarn. Le projet est principalement mené par \u003Cstrong>Sebastian McKenzie\u003C/strong>, ingénieur chez Facebook et créateur de Babel.\u003C/p>\n\u003Cp>À cette époque, npm (le gestionnaire de packages par défaut de Node.js) souffrait de plusieurs problèmes :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Lenteur\u003C/strong> : Les installations prenaient un temps considérable\u003C/li>\n\u003Cli>\u003Cstrong>Non-déterminisme\u003C/strong> : Deux installations successives pouvaient donner des résultats différents\u003C/li>\n\u003Cli>\u003Cstrong>Manque de fiabilité\u003C/strong> : Les installations échouaient parfois sans raison apparente\u003C/li>\n\u003Cli>\u003Cstrong>Problèmes de sécurité\u003C/strong> : Peu de vérifications sur l’intégrité des packages\u003C/li>\n\u003C/ul>\n\u003Cp>Yarn est né de la frustration de grandes entreprises qui géraient des bases de code massives avec des milliers de dépendances. Facebook, en particulier, avait besoin d’une solution plus robuste pour gérer React, React Native et ses nombreux autres projets open source.\u003C/p>\n\u003Ch2 id=\"ladoption-fulgurante\">L’adoption fulgurante\u003C/h2>\n\u003Cp>L’adoption de Yarn a été remarquablement rapide :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Octobre 2016\u003C/strong> : Sortie de Yarn 0.15.1\u003C/li>\n\u003Cli>\u003Cstrong>Fin 2016\u003C/strong> : Adoption par de nombreux projets majeurs (React, Angular, Ember…)\u003C/li>\n\u003C/ul>\n\u003Cp>Chez \u003Cstrong>Talend\u003C/strong>, nous avons adopté Yarn dès janvier car nous souffrions terriblement du manque de stabilite des installations avec NPM et le besoin de faire un monorepo c est fait sentir tres vite pour eviter le lag des releases entre les differents repository.\u003C/p>\n\u003Ch2 id=\"le-fichier-yarnlock--le-héros-méconnu\">Le fichier yarn.lock : Le héros méconnu\u003C/h2>\n\u003Cp>Le véritable génie de Yarn réside dans son fichier \u003Ccode>yarn.lock\u003C/code>. C’est ce fichier qui garantit le \u003Cstrong>déterminisme\u003C/strong> des installations.\u003C/p>\n\u003Ch3 id=\"comment-ça-marche\">Comment ça marche ?\u003C/h3>\n\u003Cp>Quand vous installez un package avec Yarn, il crée (ou met à jour) un fichier \u003Ccode>yarn.lock\u003C/code> qui contient :\u003C/p>\n\u003Cul>\n\u003Cli>Les versions \u003Cstrong>exactes\u003C/strong> de tous les packages installés\u003C/li>\n\u003Cli>Les versions de toutes les dépendances transitives\u003C/li>\n\u003Cli>Les checksums pour vérifier l’intégrité\u003C/li>\n\u003C/ul>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">\"@babel/core@^7.0.0\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  version \"7.12.10\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  resolved \"https://registry.yarnpkg.com/@babel/core/-/core-7.12.10.tgz#...\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  integrity sha512-eTAlQKq65zHfkHZV0sIVODCPGVgoo1HdBlbSLi9CqOzuZanMv2ihzY+4paiKr1mH+XmYESMAmJ/dpZ68eN6d8w==\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  dependencies\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"@babel/code-frame\"\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"^7.10.4\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    \"@babel/generator\"\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"^7.12.10\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">    ...\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"pourquoi-cest-crucial\">Pourquoi c’est crucial ?\u003C/h3>\n\u003Cp>Imaginez ce scénario classique avec npm (avant npm 5) :\u003C/p>\n\u003Col>\n\u003Cli>Développeur A installe les dépendances : \u003Ccode>package.json\u003C/code> spécifie \u003Ccode>\"lodash\": \"^4.0.0\"\u003C/code>\u003C/li>\n\u003Cli>Lodash 4.17.10 est installé\u003C/li>\n\u003Cli>Deux mois plus tard, Lodash 4.17.20 sort avec un bug\u003C/li>\n\u003Cli>Développeur B clone le projet et installe : il obtient la version 4.17.20\u003C/li>\n\u003Cli>L’application ne fonctionne plus chez B mais fonctionne chez A\u003C/li>\n\u003Cli>Début d’un long debugging…\u003C/li>\n\u003C/ol>\n\u003Cp>Avec \u003Ccode>yarn.lock\u003C/code>, ce problème n’existe plus. Les deux développeurs obtiennent \u003Cstrong>exactement\u003C/strong> la même version de chaque package.\u003C/p>\n\u003Ch2 id=\"yarn-et-les-mono-repositories\">Yarn et les Mono-repositories\u003C/h2>\n\u003Cp>C’est dans le contexte des \u003Cstrong>mono-repositories\u003C/strong> que Yarn brille particulièrement. Un monorepo, c’est un repository unique contenant plusieurs projets (souvent appelés “packages” ou “workspaces”).\u003C/p>\n\u003Ch3 id=\"le-problème-avant-yarn-workspaces\">Le problème avant Yarn Workspaces\u003C/h3>\n\u003Cp>Prenons un exemple concret chez Talend. Nous avions :\u003C/p>\n\u003Cul>\n\u003Cli>Un package de composants UI (\u003Ccode>@talend/components\u003C/code>)\u003C/li>\n\u003Cli>Un package de redux actions (\u003Ccode>@talend/actions\u003C/code>)\u003C/li>\n\u003Cli>Une application consommant les deux\u003C/li>\n\u003C/ul>\n\u003Cp>Avant Yarn Workspaces, chaque package avait son propre \u003Ccode>node_modules\u003C/code> :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>monorepo/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── packages/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── components/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   │   └── node_modules/    (React 16.8.0, lodash 4.17.10...)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── actions/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   │   └── node_modules/    (React 16.8.0, lodash 4.17.15...)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   └── app/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│       └── node_modules/     (React 16.8.0, lodash 4.17.20...)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Problèmes :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Duplication massive\u003C/strong> : React installé 3 fois !\u003C/li>\n\u003Cli>\u003Cstrong>Versions différentes\u003C/strong> : Lodash en 3 versions différentes\u003C/li>\n\u003Cli>\u003Cstrong>Espace disque\u003C/strong> : Des gigaoctets gaspillés\u003C/li>\n\u003Cli>\u003Cstrong>Temps d’installation\u003C/strong> : Multiplié par le nombre de packages\u003C/li>\n\u003Cli>\u003Cstrong>Conflits de versions\u003C/strong> : Difficiles à détecter\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"la-solution--yarn-workspaces\">La solution : Yarn Workspaces\u003C/h3>\n\u003Cp>Yarn Workspaces (introduit en Yarn 1.0, septembre 2017) résout ces problèmes élégamment.\u003C/p>\n\u003Cp>Configuration dans le \u003Ccode>package.json\u003C/code> racine :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"private\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"workspaces\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#CFCFC2\">    \"packages/*\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Résultat :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>monorepo/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── node_modules/         (UN SEUL node_modules à la racine)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── react/           (Version unique : 16.8.0)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── lodash/          (Version unique : 4.17.20)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── @talend/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   │   ├── components/  (symlink vers packages/components)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   │   └── actions/     (symlink vers packages/actions)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── packages/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── components/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── actions/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   └── app/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── yarn.lock            (UN SEUL fichier de lock)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"les-avantages-en-pratique\">Les avantages en pratique\u003C/h3>\n\u003Cp>Chez Talend, la migration vers Yarn Workspaces nous a apporté :\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Réduction de 70% de l’espace disque\u003C/strong> utilisé par node_modules\u003C/li>\n\u003Cli>\u003Cstrong>Installation 3x plus rapide\u003C/strong> : Une seule installation au lieu de N\u003C/li>\n\u003Cli>\u003Cstrong>Cohérence garantie\u003C/strong> : Impossible d’avoir des versions différentes d’une machine a l’autre\u003C/li>\n\u003Cli>\u003Cstrong>Développement simplifié\u003C/strong> : Les changements dans un package sont immédiatement visibles dans les autres\u003C/li>\n\u003Cli>\u003Cstrong>CI/CD optimisé\u003C/strong> : Un seul \u003Ccode>yarn install\u003C/code> pour tout le monorepo\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"exemple-concret\">Exemple concret\u003C/h3>\n\u003Cp>Avant, pour travailler sur \u003Ccode>@talend/components\u003C/code> et voir les changements dans l’app :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">cd\u003C/span>\u003Cspan style=\"color:#E6DB74\"> packages/components\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># faire des changements\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> pack\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">cd\u003C/span>\u003Cspan style=\"color:#E6DB74\"> ../app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> add\u003C/span>\u003Cspan style=\"color:#E6DB74\"> ../components/talend-components-v1.0.0.tgz\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> start\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Avec Yarn Workspaces :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">cd\u003C/span>\u003Cspan style=\"color:#E6DB74\"> packages/components\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># faire des changements\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF\">cd\u003C/span>\u003Cspan style=\"color:#E6DB74\"> ../app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> start\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Les changements sont immédiatement visibles ! 🎉\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"les-autres-avantages-de-yarn\">Les autres avantages de Yarn\u003C/h2>\n\u003Cp>Au-delà des workspaces, Yarn offre de nombreux autres avantages :\u003C/p>\n\u003Ch3 id=\"1-performance\">1. Performance\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Installation parallèle\u003C/strong> : Yarn télécharge et installe plusieurs packages en parallèle\u003C/li>\n\u003Cli>\u003Cstrong>Cache offline\u003C/strong> : Une fois un package téléchargé, il est mis en cache\u003C/li>\n\u003Cli>\u003Cstrong>Installation déterministe\u003C/strong> : Même ordre d’installation = performances prévisibles\u003C/li>\n\u003C/ul>\n\u003Cp>Sur notre CI, nous sommes passés de \u003Cstrong>8 minutes\u003C/strong> d’installation (npm) à \u003Cstrong>2 minutes\u003C/strong> (Yarn) !\u003C/p>\n\u003Ch3 id=\"2-sécurité\">2. Sécurité\u003C/h3>\n\u003Cp>Yarn vérifie l’intégrité de chaque package installé grâce aux checksums dans le yarn.lock :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">$\u003C/span>\u003Cspan style=\"color:#E6DB74\"> yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> install\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">[1/4] 🔍  Resolving packages...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">[2/4] 🚚  Fetching packages...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">[3/4] 🔗  Linking dependencies...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">[4/4] 🔨  Building fresh packages...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">✨\u003C/span>\u003Cspan style=\"color:#E6DB74\"> Done\u003C/span>\u003Cspan style=\"color:#E6DB74\"> in\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 2.45s.\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Si un package a été modifié ou corrompu, Yarn le détecte immédiatement.\u003C/p>\n\u003Ch3 id=\"3-commandes-utiles\">3. Commandes utiles\u003C/h3>\n\u003Cp>Yarn ajoute des commandes pratiques :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Voir pourquoi un package est installé\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> why\u003C/span>\u003Cspan style=\"color:#E6DB74\"> lodash\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Mettre à jour interactivement\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> upgrade-interactive\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Lister les packages obsolètes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> outdated\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Vérifier les licences\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> licenses\u003C/span>\u003Cspan style=\"color:#E6DB74\"> list\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"4-résolution-des-conflits\">4. Résolution des conflits\u003C/h3>\n\u003Cp>Le fichier \u003Ccode>yarn.lock\u003C/code> est conçu pour éviter les conflits git :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Structure claire et lisible\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">\"package@version\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  version \"exact-version\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  resolved \"url\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  integrity \"checksum\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  dependencies\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    dep \"version\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Les conflits de merge sont faciles à résoudre.\u003C/p>\n\u003Ch2 id=\"notre-expérience-chez-talend\">Notre expérience chez Talend\u003C/h2>\n\u003Cp>La migration vers Yarn a été un des meilleurs choix techniques que nous ayons faits. Voici quelques chiffres concrets :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>~15 packages\u003C/strong> dans notre monorepo\u003C/li>\n\u003Cli>\u003Cstrong>~2000 dépendances\u003C/strong> au total\u003C/li>\n\u003Cli>\u003Cstrong>Avant Yarn\u003C/strong> : 8 minutes d’installation, 4 GB de node_modules\u003C/li>\n\u003Cli>\u003Cstrong>Après Yarn\u003C/strong> : 2 minutes d’installation, 1.2 GB de node_modules\u003C/li>\n\u003Cli>\u003Cstrong>Gain de productivité\u003C/strong> : Immédiat et mesurable\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>Yarn a apporté une véritable révolution dans l’écosystème JavaScript :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Déterminisme\u003C/strong> grâce au yarn.lock\u003C/li>\n\u003Cli>\u003Cstrong>Performance\u003C/strong> avec l’installation parallèle et le cache\u003C/li>\n\u003Cli>\u003Cstrong>Workspaces\u003C/strong> pour les monorepos\u003C/li>\n\u003Cli>\u003Cstrong>Sécurité\u003C/strong> avec la vérification d’intégrité\u003C/li>\n\u003C/ul>\n\u003Cp>Aujourd’hui, npm a rattrapé une partie de son retard (notamment avec npm 7+ qui supporte les workspaces), mais Yarn reste un choix solide, particulièrement pour les projets complexes et les monorepos.\u003C/p>\n\u003Cp>Si vous n’utilisez pas encore Yarn dans votre projet, je vous encourage vivement à l’essayer. Le gain en fiabilité et en productivité est réel et immédiat.\u003C/p>\n\u003Cp>Et vous, quelle est votre expérience avec Yarn ? Utilisez-vous les workspaces ? N’hésitez pas à partager en commentaire !\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Pour aller plus loin :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://yarnpkg.com/\">Documentation officielle Yarn\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://yarnpkg.com/features/workspaces\">Yarn Workspaces\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://yarnpkg.com/getting-started/migration\">Migrating from npm to Yarn\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1201,"localImagePaths":1251,"remoteImagePaths":1252,"frontmatter":1253,"imagePaths":1257},[1202,1205,1208,1211,1214,1217,1220,1223,1226,1229,1232,1235,1238,1241,1244,1247,1250],{"depth":449,"slug":1203,"text":1204},"lhistoire-de-yarn","L’histoire de Yarn",{"depth":449,"slug":1206,"text":1207},"ladoption-fulgurante","L’adoption fulgurante",{"depth":449,"slug":1209,"text":1210},"le-fichier-yarnlock--le-héros-méconnu","Le fichier yarn.lock : Le héros méconnu",{"depth":1018,"slug":1212,"text":1213},"comment-ça-marche","Comment ça marche ?",{"depth":1018,"slug":1215,"text":1216},"pourquoi-cest-crucial","Pourquoi c’est crucial ?",{"depth":449,"slug":1218,"text":1219},"yarn-et-les-mono-repositories","Yarn et les Mono-repositories",{"depth":1018,"slug":1221,"text":1222},"le-problème-avant-yarn-workspaces","Le problème avant Yarn Workspaces",{"depth":1018,"slug":1224,"text":1225},"la-solution--yarn-workspaces","La solution : Yarn Workspaces",{"depth":1018,"slug":1227,"text":1228},"les-avantages-en-pratique","Les avantages en pratique",{"depth":1018,"slug":1230,"text":1231},"exemple-concret","Exemple concret",{"depth":449,"slug":1233,"text":1234},"les-autres-avantages-de-yarn","Les autres avantages de Yarn",{"depth":1018,"slug":1236,"text":1237},"1-performance","1. Performance",{"depth":1018,"slug":1239,"text":1240},"2-sécurité","2. Sécurité",{"depth":1018,"slug":1242,"text":1243},"3-commandes-utiles","3. Commandes utiles",{"depth":1018,"slug":1245,"text":1246},"4-résolution-des-conflits","4. Résolution des conflits",{"depth":449,"slug":1248,"text":1249},"notre-expérience-chez-talend","Notre expérience chez Talend",{"depth":449,"slug":459,"text":460},[],[],{"title":1189,"categories":1254,"tags":1255,"date":1256},[696],[975,1193,1061,1194],["Date","2017-06-10T00:00:00.000Z"],[],"2017-01-10-yarn-and-dependencies copy.md","2020-11-13-modules-to-cdn",{"id":1259,"data":1261,"body":1269,"filePath":1270,"digest":1271,"rendered":1272,"legacyId":1354},{"title":1262,"date":1263,"categories":1264,"tags":1265,"lang":17},"Du fork à la production : Comment module-to-cdn a révolutionné notre build time",["Date","2020-11-13T00:00:00.000Z"],[696],[975,1061,1266,1267,1268],"CDN","UMD","Webpack","La compilation de notre stack Talend/UI prenait des temps énormes et posait des défis majeurs. Découvrez comment le fork de `module-to-cdn` nous a permis de réduire le temps de build de 2 minutes à 10 secondes.\n\n## Le problème : Une stack qui n'échelle pas\n\nChez Talend, nous avons investi massivement dans Talend/UI, notre design system et nos composants React réutilisables. Avec plus de 15 packages interconnectés, l'architecture est complexe et puissante, mais elle pose un problème majeur : **la compilation de la stack complète prend un temps considérable**.\n\n### Les défis spécifiques\n\n**1. Compilation lente et complexe**\n\nCompiler l'intégralité de la stack Talend/UI requiert des connaissances approfondies en tooling et webpack. Cela demande du temps, des ressources, et crée des goulots d'étranglement dans nos pipelines CI/CD.\n\n**2. Sass dans node_modules**\n\nNos librairies contiennent du Sass qui se retrouve directement dans le `node_modules` des projets consommateurs. Cela signifie que chaque projet doit avoir sa propre copy et son propre processus de compilation pour le Sass.\n\n**3. Chaque changement est un breaking change**\n\nQuand nous mettions à jour une librairie, les projets consommateurs devaient recompiler entièrement. Pas de compilation incrémentale possible, pas de déploiement indépendant. Chaque fix dans `@talend/components` requérait une recompilation totale dans tous les projets consommateurs.\n\n**4. Évolution du design system et CI/CD**\n\nNotre design system progresse rapidement. L'équipe souhaitait pouvoir déployer des mises à jour en production **via le CDN** sans avoir besoin de recompiler les projets clients. Une véritable approche micro-frontend.\n\n## La recherche de solution\n\nC'est dans ce contexte que nous avons découvert **module-to-cdn**, un package brillant créé par l'équipe de POS Tai.\n\n### Qu'est-ce que module-to-cdn ?\n\n`module-to-cdn` est un utilitaire qui maintient un mapping entre des packages npm et leurs URLs CDN. Par exemple :\n\n```javascript\n// Avant\nimport React from 'react';  // Bundle include dans le build\nimport ReactDOM from 'react-dom';\nimport { Button } from '@talend/components';  // 150KB\n\n// Après avec module-to-cdn\n// React, ReactDOM, @talend/components pointent sur le CDN\n// Taille du bundle : 10KB\n```\n\n### Tentatives de contact et décision de forker\n\nJ'ai essayé plusieurs fois de contacter l'auteur original pour discuter de nos besoins spécifiques pendant notre POC. Malheureusement, sans réponse. Après plusieurs essais, nous avons pris la décision pragmatique : **forker le package pour l'adapter à nos besoins**.\n\nNous avons créé un fork officiel dans [Talend/ui-scripts/pull/123](https://github.com/Talend/ui-scripts/pull/123) avec les améliorations nécessaires pour supporter l'architecture complexe de Talend/UI.\n\n## Notre architecture : UMD + Dynamic CDN Webpack Plugin\n\nL'architecture que nous avons mise en place repose sur deux piliers :\n\n### 1. Format UMD pour les librairies\n\nNos librairies Talend/UI sont compilées en **UMD (Universal Module Definition)** :\n\n```bash\n# Compilation de @talend/components en UMD\nyarn build:umd\n# Produit: talend-components.umd.js (distributables via CDN)\n```\n\nPourquoi UMD ?\n- Compatible avec tous les systèmes de module (AMD, CommonJS, ESM)\n- Peut être inclus directement dans le HTML via `\u003Cscript>`\n- Peut être utilisé par webpack avec `externals`\n\n### 2. dynamic-cdn-webpack-plugin\n\nPour intégrer automatiquement le CDN dans le processus webpack, nous utilisons `dynamic-cdn-webpack-plugin` combiné à notre fork de `module-to-cdn`.\n\nConfiguration webpack :\n\n```javascript\nconst DynamicCdnWebpackPlugin = require('dynamic-cdn-webpack-plugin');\nconst moduleTocdn = require('@talend/module-to-cdn');\n\nmodule.exports = {\n  // ...\n  plugins: [\n    new DynamicCdnWebpackPlugin({\n      modules: moduleTocdn,\n      env: 'production'\n    })\n  ],\n  externals: {\n    'react': 'React',\n    'react-dom': 'ReactDOM',\n    '@talend/components': 'TalendComponents',\n    '@talend/store': 'TalendStore',\n    // ... toutes nos libs Talend\n  }\n};\n```\n\nCela dit à webpack : \"Ces packages ne sont pas à bundler, ils viennent du CDN\".\n\n## Le travail d'intégration\n\nPas mal de travail était nécessaire pour que tout fonctionne :\n\n### 1. Créer le mapping CDN\n\nIl fallait maintenir à jour un mapping complet de toutes nos librairies avec leurs URLs CDN :\n\n```javascript\nmodule.exports = {\n  React: {\n    name: 'react',\n    var: 'React',\n    url: 'https://cdn.talend.com/react/16.13.1/react.umd.production.min.js',\n    version: '16.13.1'\n  },\n  'react-dom': {\n    name: 'react-dom',\n    var: 'ReactDOM',\n    url: 'https://cdn.talend.com/react-dom/16.13.1/react-dom.umd.production.min.js',\n    version: '16.13.1'\n  },\n  '@talend/components': {\n    name: '@talend/components',\n    var: 'TalendComponents',\n    url: 'https://cdn.talend.com/talend-components/2.15.0/talend-components.umd.min.js',\n    version: '2.15.0'\n  },\n  // ... et toutes les autres libs\n};\n```\n\n### 2. Gérer les dépendances circulaires\n\nNos librairies Talend ont des dépendances complexes. `@talend/components` dépend de `@talend/store`, qui dépend de Redux, etc.\n\nIl fallait s'assurer que dans le HTML, les scripts étaient chargés dans le bon ordre :\n\n```html\n\u003Cscript src=\"https://cdn.talend.com/react/16.13.1/react.umd.production.min.js\">\u003C/script>\n\u003Cscript src=\"https://cdn.talend.com/redux/4.0.5/redux.umd.js\">\u003C/script>\n\u003Cscript src=\"https://cdn.talend.com/react-redux/7.2.1/react-redux.umd.js\">\u003C/script>\n\u003Cscript src=\"https://cdn.talend.com/talend-store/1.5.0/talend-store.umd.min.js\">\u003C/script>\n\u003Cscript src=\"https://cdn.talend.com/talend-components/2.15.0/talend-components.umd.min.js\">\u003C/script>\n```\n\n### 3. Gestion des versions et compatibility\n\nAvec la stack externalisée, chaque version du CDN doit être compatible avec les versions d'autres packages. Nous avons mis en place une stratégie de versioning stricte.\n\n### 4. Tests et validation\n\nAvant de déployer, nous avons dû tester :\n- Que les bundles UMD fonctionnent correctement\n- Que webpack externalise vraiment les packages\n- Que les dépendances sont chargées dans le bon ordre\n- Que le fallback marche si le CDN n'est pas disponible\n\n## Les résultats : Gains spectaculaires\n\nAprès des semaines de travail, nous avons déployé cette infrastructure en production. Les résultats ont dépassé nos attentes.\n\n### 1. Temps de compilation divisé par 12\n\n**Avant :**\n```\n$ yarn build\n// ... webpack build de toute la stack...\nChunk {0} main.js: 2.4 MB\nCompilation time: 2 minutes 15 seconds\n```\n\n**Après :**\n```\n$ yarn build\n// ... webpack build sans les packages externes...\nChunk {0} main.js: 180 KB\nCompilation time: 10 seconds\n```\n\n### 2. Plus de heap stack memory failures\n\nWebpack compilait tellement de code que nous recevions régulièrement des `JavaScript heap out of memory` errors. Avec la stack externalisée, ce problème a complètement disparu.\n\nAvant, nous devions augmenter la limite de heap :\n```bash\nNODE_OPTIONS=\"--max-old-space-size=4096\" yarn build\n```\n\nMaintenant, le build marche sans configuration spéciale.\n\n### 3. Temps d'affichage initial\n\nPour les utilisateurs, le gain est également spectaculaire :\n\n**Avant (avec tout bundlé) :**\n- Download du bundle : 2.4 MB → ~30 secondes\n- Parse et compile : ~1 minute 30 secondes\n- Total : ~2 minutes\n\n**Après (avec CDN) :**\n- Download du bundle principal : 180 KB → ~0.5 secondes\n- Download des librairies du CDN (en parallèle) : ~2 secondes (cached après première visite)\n- Parse et compile : ~7 secondes\n- Total : ~10 secondes\n\nUn gain d'un **facteur 12** !\n\n### 4. Déploiement indépendant du design system\n\nNotre équipe design system peut maintenant déployer des mises à jour vers le CDN sans que les projets consommateurs aient besoin de recompiler.\n\nUn simple changement de version dans le HTML et on bénéficie des nouvelles composants :\n\n```html\n\u003C!-- Avant : il fallait recompiler tout le projet -->\n\n\u003C!-- Après : juste changer la version du CDN -->\n\u003Cscript src=\"https://cdn.talend.com/talend-components/2.16.0/talend-components.umd.min.js\">\u003C/script>\n```\n\n## Architecture finale\n\n```\n┌─────────────────────────────────────────────────────────┐\n│                     Projects                             │\n│  (React apps consommant Talend/UI)                      │\n└─────────────────┬───────────────────────────────────────┘\n                  │\n                  │ (via dynamic-cdn-webpack-plugin)\n                  │\n┌─────────────────▼───────────────────────────────────────┐\n│            Talend CDN                                    │\n│  ├── /react/16.13.1/react.umd.min.js                   │\n│  ├── /react-dom/16.13.1/react-dom.umd.min.js           │\n│  ├── /talend-components/2.16.0/talend-components.js    │\n│  ├── /talend-store/1.5.0/talend-store.umd.min.js       │\n│  └── ... (toutes les autres libs)                       │\n└─────────────────────────────────────────────────────────┘\n                  ▲\n                  │\n┌─────────────────┴───────────────────────────────────────┐\n│        Talend/UI Design System                          │\n│  Publie les UMD builds vers le CDN                      │\n│  Maintient module-to-cdn à jour                         │\n└─────────────────────────────────────────────────────────┘\n```\n\n## Leçons apprises\n\n### 1. L'importance du fork\nParfois, forker un package est la bonne décision quand vous avez des besoins spécifiques. Ce n'est pas \"mal\" si vous le faites pour les bonnes raisons.\n\n### 2. UMD est vivant\nMalgré les prédictions pessimistes, UMD reste extrêmement pertinent pour les CDN et les micro-frontends.\n\n### 3. La composition plutôt que le bundling\nAvec une architecture bien pensée, on peut construire des systèmes complexes en composant des modules plutôt qu'en les bundlant ensemble.\n\n### 4. Le coût de la complexité\nPlus vos projets ont de dépendances, plus vous gagnez avec cette approche. Pour un petit projet, ça ne vaut pas le coup. Pour une entreprise avec des dizaines de projets, c'est transformationnel.\n\n## Conclusion\n\nLa décision de forker `module-to-cdn` et d'implémenter une architecture CDN basée sur UMD a été l'une de nos meilleures décisions techniques.\n\nLes chiffres parlent d'eux-mêmes :\n- **12x plus rapide** pour la compilation\n- **Zéro heap memory errors**\n- **Déploiement indépendant** du design system\n- **Meilleure expérience utilisateur**\n\nSi vous travaillez dans une architecture monorepo complexe avec plusieurs applications consommant une suite de librairies communes, je vous encourage vivement à explorer cette approche.\n\nEt vous, comment gérez-vous vos dépendances partagées ? Avez-vous des expériences avec les micro-frontends à partager ?\n\n---\n\n**Ressources utiles :**\n- [module-to-cdn (original)](https://github.com/Parimala-R/module-to-cdn)\n- [Notre fork : Talend/ui-scripts/pull/123](https://github.com/Talend/ui-scripts/pull/123)\n- [dynamic-cdn-webpack-plugin](https://github.com/mosesman/dynamic-cdn-webpack-plugin)\n- [UMD (Universal Module Definition)](https://github.com/umdjs/umd)","src/content/posts/2020-11-13-modules-to-cdn.md","4a8d70b4ccf27cf8",{"html":1273,"metadata":1274},"\u003Cp>La compilation de notre stack Talend/UI prenait des temps énormes et posait des défis majeurs. Découvrez comment le fork de \u003Ccode>module-to-cdn\u003C/code> nous a permis de réduire le temps de build de 2 minutes à 10 secondes.\u003C/p>\n\u003Ch2 id=\"le-problème--une-stack-qui-néchelle-pas\">Le problème : Une stack qui n’échelle pas\u003C/h2>\n\u003Cp>Chez Talend, nous avons investi massivement dans Talend/UI, notre design system et nos composants React réutilisables. Avec plus de 15 packages interconnectés, l’architecture est complexe et puissante, mais elle pose un problème majeur : \u003Cstrong>la compilation de la stack complète prend un temps considérable\u003C/strong>.\u003C/p>\n\u003Ch3 id=\"les-défis-spécifiques\">Les défis spécifiques\u003C/h3>\n\u003Cp>\u003Cstrong>1. Compilation lente et complexe\u003C/strong>\u003C/p>\n\u003Cp>Compiler l’intégralité de la stack Talend/UI requiert des connaissances approfondies en tooling et webpack. Cela demande du temps, des ressources, et crée des goulots d’étranglement dans nos pipelines CI/CD.\u003C/p>\n\u003Cp>\u003Cstrong>2. Sass dans node_modules\u003C/strong>\u003C/p>\n\u003Cp>Nos librairies contiennent du Sass qui se retrouve directement dans le \u003Ccode>node_modules\u003C/code> des projets consommateurs. Cela signifie que chaque projet doit avoir sa propre copy et son propre processus de compilation pour le Sass.\u003C/p>\n\u003Cp>\u003Cstrong>3. Chaque changement est un breaking change\u003C/strong>\u003C/p>\n\u003Cp>Quand nous mettions à jour une librairie, les projets consommateurs devaient recompiler entièrement. Pas de compilation incrémentale possible, pas de déploiement indépendant. Chaque fix dans \u003Ccode>@talend/components\u003C/code> requérait une recompilation totale dans tous les projets consommateurs.\u003C/p>\n\u003Cp>\u003Cstrong>4. Évolution du design system et CI/CD\u003C/strong>\u003C/p>\n\u003Cp>Notre design system progresse rapidement. L’équipe souhaitait pouvoir déployer des mises à jour en production \u003Cstrong>via le CDN\u003C/strong> sans avoir besoin de recompiler les projets clients. Une véritable approche micro-frontend.\u003C/p>\n\u003Ch2 id=\"la-recherche-de-solution\">La recherche de solution\u003C/h2>\n\u003Cp>C’est dans ce contexte que nous avons découvert \u003Cstrong>module-to-cdn\u003C/strong>, un package brillant créé par l’équipe de POS Tai.\u003C/p>\n\u003Ch3 id=\"quest-ce-que-module-to-cdn\">Qu’est-ce que module-to-cdn ?\u003C/h3>\n\u003Cp>\u003Ccode>module-to-cdn\u003C/code> est un utilitaire qui maintient un mapping entre des packages npm et leurs URLs CDN. Par exemple :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Avant\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> React \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'react'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;  \u003C/span>\u003Cspan style=\"color:#88846F\">// Bundle include dans le build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> ReactDOM \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'react-dom'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { Button } \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;  \u003C/span>\u003Cspan style=\"color:#88846F\">// 150KB\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Après avec module-to-cdn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// React, ReactDOM, @talend/components pointent sur le CDN\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Taille du bundle : 10KB\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"tentatives-de-contact-et-décision-de-forker\">Tentatives de contact et décision de forker\u003C/h3>\n\u003Cp>J’ai essayé plusieurs fois de contacter l’auteur original pour discuter de nos besoins spécifiques pendant notre POC. Malheureusement, sans réponse. Après plusieurs essais, nous avons pris la décision pragmatique : \u003Cstrong>forker le package pour l’adapter à nos besoins\u003C/strong>.\u003C/p>\n\u003Cp>Nous avons créé un fork officiel dans \u003Ca href=\"https://github.com/Talend/ui-scripts/pull/123\">Talend/ui-scripts/pull/123\u003C/a> avec les améliorations nécessaires pour supporter l’architecture complexe de Talend/UI.\u003C/p>\n\u003Ch2 id=\"notre-architecture--umd--dynamic-cdn-webpack-plugin\">Notre architecture : UMD + Dynamic CDN Webpack Plugin\u003C/h2>\n\u003Cp>L’architecture que nous avons mise en place repose sur deux piliers :\u003C/p>\n\u003Ch3 id=\"1-format-umd-pour-les-librairies\">1. Format UMD pour les librairies\u003C/h3>\n\u003Cp>Nos librairies Talend/UI sont compilées en \u003Cstrong>UMD (Universal Module Definition)\u003C/strong> :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Compilation de @talend/components en UMD\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> build:umd\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Produit: talend-components.umd.js (distributables via CDN)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Pourquoi UMD ?\u003C/p>\n\u003Cul>\n\u003Cli>Compatible avec tous les systèmes de module (AMD, CommonJS, ESM)\u003C/li>\n\u003Cli>Peut être inclus directement dans le HTML via \u003Ccode>&#x3C;script>\u003C/code>\u003C/li>\n\u003Cli>Peut être utilisé par webpack avec \u003Ccode>externals\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"2-dynamic-cdn-webpack-plugin\">2. dynamic-cdn-webpack-plugin\u003C/h3>\n\u003Cp>Pour intégrer automatiquement le CDN dans le processus webpack, nous utilisons \u003Ccode>dynamic-cdn-webpack-plugin\u003C/code> combiné à notre fork de \u003Ccode>module-to-cdn\u003C/code>.\u003C/p>\n\u003Cp>Configuration webpack :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> DynamicCdnWebpackPlugin \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#A6E22E\"> require\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'dynamic-cdn-webpack-plugin'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> moduleTocdn \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#A6E22E\"> require\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'@talend/module-to-cdn'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">module\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">exports\u003C/span>\u003Cspan style=\"color:#F92672\"> =\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">  // ...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  plugins: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    new\u003C/span>\u003Cspan style=\"color:#A6E22E\"> DynamicCdnWebpackPlugin\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      modules: moduleTocdn,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      env: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'production'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  ],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  externals: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'react'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'React'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'react-dom'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'ReactDOM'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    '@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'TalendComponents'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    '@talend/store'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'TalendStore'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">    // ... toutes nos libs Talend\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Cela dit à webpack : “Ces packages ne sont pas à bundler, ils viennent du CDN”.\u003C/p>\n\u003Ch2 id=\"le-travail-dintégration\">Le travail d’intégration\u003C/h2>\n\u003Cp>Pas mal de travail était nécessaire pour que tout fonctionne :\u003C/p>\n\u003Ch3 id=\"1-créer-le-mapping-cdn\">1. Créer le mapping CDN\u003C/h3>\n\u003Cp>Il fallait maintenir à jour un mapping complet de toutes nos librairies avec leurs URLs CDN :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">module\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">exports\u003C/span>\u003Cspan style=\"color:#F92672\"> =\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  React: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    name: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'react'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    var: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'React'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    url: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'https://cdn.talend.com/react/16.13.1/react.umd.production.min.js'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    version: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'16.13.1'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  'react-dom'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    name: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'react-dom'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    var: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'ReactDOM'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    url: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'https://cdn.talend.com/react-dom/16.13.1/react-dom.umd.production.min.js'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    version: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'16.13.1'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  '@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    name: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    var: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'TalendComponents'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    url: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'https://cdn.talend.com/talend-components/2.15.0/talend-components.umd.min.js'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    version: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'2.15.0'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">  // ... et toutes les autres libs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"2-gérer-les-dépendances-circulaires\">2. Gérer les dépendances circulaires\u003C/h3>\n\u003Cp>Nos librairies Talend ont des dépendances complexes. \u003Ccode>@talend/components\u003C/code> dépend de \u003Ccode>@talend/store\u003C/code>, qui dépend de Redux, etc.\u003C/p>\n\u003Cp>Il fallait s’assurer que dans le HTML, les scripts étaient chargés dans le bon ordre :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"html\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/react/16.13.1/react.umd.production.min.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/redux/4.0.5/redux.umd.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/react-redux/7.2.1/react-redux.umd.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/talend-store/1.5.0/talend-store.umd.min.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/talend-components/2.15.0/talend-components.umd.min.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"3-gestion-des-versions-et-compatibility\">3. Gestion des versions et compatibility\u003C/h3>\n\u003Cp>Avec la stack externalisée, chaque version du CDN doit être compatible avec les versions d’autres packages. Nous avons mis en place une stratégie de versioning stricte.\u003C/p>\n\u003Ch3 id=\"4-tests-et-validation\">4. Tests et validation\u003C/h3>\n\u003Cp>Avant de déployer, nous avons dû tester :\u003C/p>\n\u003Cul>\n\u003Cli>Que les bundles UMD fonctionnent correctement\u003C/li>\n\u003Cli>Que webpack externalise vraiment les packages\u003C/li>\n\u003Cli>Que les dépendances sont chargées dans le bon ordre\u003C/li>\n\u003Cli>Que le fallback marche si le CDN n’est pas disponible\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"les-résultats--gains-spectaculaires\">Les résultats : Gains spectaculaires\u003C/h2>\n\u003Cp>Après des semaines de travail, nous avons déployé cette infrastructure en production. Les résultats ont dépassé nos attentes.\u003C/p>\n\u003Ch3 id=\"1-temps-de-compilation-divisé-par-12\">1. Temps de compilation divisé par 12\u003C/h3>\n\u003Cp>\u003Cstrong>Avant :\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>$ yarn build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>// ... webpack build de toute la stack...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Chunk {0} main.js: 2.4 MB\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Compilation time: 2 minutes 15 seconds\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>Après :\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>$ yarn build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>// ... webpack build sans les packages externes...\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Chunk {0} main.js: 180 KB\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Compilation time: 10 seconds\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"2-plus-de-heap-stack-memory-failures\">2. Plus de heap stack memory failures\u003C/h3>\n\u003Cp>Webpack compilait tellement de code que nous recevions régulièrement des \u003Ccode>JavaScript heap out of memory\u003C/code> errors. Avec la stack externalisée, ce problème a complètement disparu.\u003C/p>\n\u003Cp>Avant, nous devions augmenter la limite de heap :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">NODE_OPTIONS\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"--max-old-space-size=4096\"\u003C/span>\u003Cspan style=\"color:#A6E22E\"> yarn\u003C/span>\u003Cspan style=\"color:#E6DB74\"> build\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Maintenant, le build marche sans configuration spéciale.\u003C/p>\n\u003Ch3 id=\"3-temps-daffichage-initial\">3. Temps d’affichage initial\u003C/h3>\n\u003Cp>Pour les utilisateurs, le gain est également spectaculaire :\u003C/p>\n\u003Cp>\u003Cstrong>Avant (avec tout bundlé) :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>Download du bundle : 2.4 MB → ~30 secondes\u003C/li>\n\u003Cli>Parse et compile : ~1 minute 30 secondes\u003C/li>\n\u003Cli>Total : ~2 minutes\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>Après (avec CDN) :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>Download du bundle principal : 180 KB → ~0.5 secondes\u003C/li>\n\u003Cli>Download des librairies du CDN (en parallèle) : ~2 secondes (cached après première visite)\u003C/li>\n\u003Cli>Parse et compile : ~7 secondes\u003C/li>\n\u003Cli>Total : ~10 secondes\u003C/li>\n\u003C/ul>\n\u003Cp>Un gain d’un \u003Cstrong>facteur 12\u003C/strong> !\u003C/p>\n\u003Ch3 id=\"4-déploiement-indépendant-du-design-system\">4. Déploiement indépendant du design system\u003C/h3>\n\u003Cp>Notre équipe design system peut maintenant déployer des mises à jour vers le CDN sans que les projets consommateurs aient besoin de recompiler.\u003C/p>\n\u003Cp>Un simple changement de version dans le HTML et on bénéficie des nouvelles composants :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"html\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">&#x3C;!-- Avant : il fallait recompiler tout le projet -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">&#x3C;!-- Après : juste changer la version du CDN -->\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#A6E22E\"> src\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://cdn.talend.com/talend-components/2.16.0/talend-components.umd.min.js\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">script\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"architecture-finale\">Architecture finale\u003C/h2>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>┌─────────────────────────────────────────────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│                     Projects                             │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  (React apps consommant Talend/UI)                      │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────────┬───────────────────────────────────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                  │ (via dynamic-cdn-webpack-plugin)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌─────────────────▼───────────────────────────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│            Talend CDN                                    │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  ├── /react/16.13.1/react.umd.min.js                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  ├── /react-dom/16.13.1/react-dom.umd.min.js           │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  ├── /talend-components/2.16.0/talend-components.js    │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  ├── /talend-store/1.5.0/talend-store.umd.min.js       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  └── ... (toutes les autres libs)                       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────────────────────────────────────────────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                  ▲\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌─────────────────┴───────────────────────────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│        Talend/UI Design System                          │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  Publie les UMD builds vers le CDN                      │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  Maintient module-to-cdn à jour                         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────────────────────────────────────────────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"leçons-apprises\">Leçons apprises\u003C/h2>\n\u003Ch3 id=\"1-limportance-du-fork\">1. L’importance du fork\u003C/h3>\n\u003Cp>Parfois, forker un package est la bonne décision quand vous avez des besoins spécifiques. Ce n’est pas “mal” si vous le faites pour les bonnes raisons.\u003C/p>\n\u003Ch3 id=\"2-umd-est-vivant\">2. UMD est vivant\u003C/h3>\n\u003Cp>Malgré les prédictions pessimistes, UMD reste extrêmement pertinent pour les CDN et les micro-frontends.\u003C/p>\n\u003Ch3 id=\"3-la-composition-plutôt-que-le-bundling\">3. La composition plutôt que le bundling\u003C/h3>\n\u003Cp>Avec une architecture bien pensée, on peut construire des systèmes complexes en composant des modules plutôt qu’en les bundlant ensemble.\u003C/p>\n\u003Ch3 id=\"4-le-coût-de-la-complexité\">4. Le coût de la complexité\u003C/h3>\n\u003Cp>Plus vos projets ont de dépendances, plus vous gagnez avec cette approche. Pour un petit projet, ça ne vaut pas le coup. Pour une entreprise avec des dizaines de projets, c’est transformationnel.\u003C/p>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>La décision de forker \u003Ccode>module-to-cdn\u003C/code> et d’implémenter une architecture CDN basée sur UMD a été l’une de nos meilleures décisions techniques.\u003C/p>\n\u003Cp>Les chiffres parlent d’eux-mêmes :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>12x plus rapide\u003C/strong> pour la compilation\u003C/li>\n\u003Cli>\u003Cstrong>Zéro heap memory errors\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>Déploiement indépendant\u003C/strong> du design system\u003C/li>\n\u003Cli>\u003Cstrong>Meilleure expérience utilisateur\u003C/strong>\u003C/li>\n\u003C/ul>\n\u003Cp>Si vous travaillez dans une architecture monorepo complexe avec plusieurs applications consommant une suite de librairies communes, je vous encourage vivement à explorer cette approche.\u003C/p>\n\u003Cp>Et vous, comment gérez-vous vos dépendances partagées ? Avez-vous des expériences avec les micro-frontends à partager ?\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Ressources utiles :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/Parimala-R/module-to-cdn\">module-to-cdn (original)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/Talend/ui-scripts/pull/123\">Notre fork : Talend/ui-scripts/pull/123\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/mosesman/dynamic-cdn-webpack-plugin\">dynamic-cdn-webpack-plugin\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/umdjs/umd\">UMD (Universal Module Definition)\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1275,"localImagePaths":1347,"remoteImagePaths":1348,"frontmatter":1349,"imagePaths":1353},[1276,1279,1282,1285,1288,1291,1294,1297,1300,1303,1306,1309,1312,1315,1318,1321,1324,1327,1330,1333,1334,1337,1340,1343,1346],{"depth":449,"slug":1277,"text":1278},"le-problème--une-stack-qui-néchelle-pas","Le problème : Une stack qui n’échelle pas",{"depth":1018,"slug":1280,"text":1281},"les-défis-spécifiques","Les défis spécifiques",{"depth":449,"slug":1283,"text":1284},"la-recherche-de-solution","La recherche de solution",{"depth":1018,"slug":1286,"text":1287},"quest-ce-que-module-to-cdn","Qu’est-ce que module-to-cdn ?",{"depth":1018,"slug":1289,"text":1290},"tentatives-de-contact-et-décision-de-forker","Tentatives de contact et décision de forker",{"depth":449,"slug":1292,"text":1293},"notre-architecture--umd--dynamic-cdn-webpack-plugin","Notre architecture : UMD + Dynamic CDN Webpack Plugin",{"depth":1018,"slug":1295,"text":1296},"1-format-umd-pour-les-librairies","1. Format UMD pour les librairies",{"depth":1018,"slug":1298,"text":1299},"2-dynamic-cdn-webpack-plugin","2. dynamic-cdn-webpack-plugin",{"depth":449,"slug":1301,"text":1302},"le-travail-dintégration","Le travail d’intégration",{"depth":1018,"slug":1304,"text":1305},"1-créer-le-mapping-cdn","1. Créer le mapping CDN",{"depth":1018,"slug":1307,"text":1308},"2-gérer-les-dépendances-circulaires","2. Gérer les dépendances circulaires",{"depth":1018,"slug":1310,"text":1311},"3-gestion-des-versions-et-compatibility","3. Gestion des versions et compatibility",{"depth":1018,"slug":1313,"text":1314},"4-tests-et-validation","4. Tests et validation",{"depth":449,"slug":1316,"text":1317},"les-résultats--gains-spectaculaires","Les résultats : Gains spectaculaires",{"depth":1018,"slug":1319,"text":1320},"1-temps-de-compilation-divisé-par-12","1. Temps de compilation divisé par 12",{"depth":1018,"slug":1322,"text":1323},"2-plus-de-heap-stack-memory-failures","2. Plus de heap stack memory failures",{"depth":1018,"slug":1325,"text":1326},"3-temps-daffichage-initial","3. Temps d’affichage initial",{"depth":1018,"slug":1328,"text":1329},"4-déploiement-indépendant-du-design-system","4. Déploiement indépendant du design system",{"depth":449,"slug":1331,"text":1332},"architecture-finale","Architecture finale",{"depth":449,"slug":1086,"text":1087},{"depth":1018,"slug":1335,"text":1336},"1-limportance-du-fork","1. L’importance du fork",{"depth":1018,"slug":1338,"text":1339},"2-umd-est-vivant","2. UMD est vivant",{"depth":1018,"slug":1341,"text":1342},"3-la-composition-plutôt-que-le-bundling","3. La composition plutôt que le bundling",{"depth":1018,"slug":1344,"text":1345},"4-le-coût-de-la-complexité","4. Le coût de la complexité",{"depth":449,"slug":459,"text":460},[],[],{"title":1262,"categories":1350,"tags":1351,"date":1352},[696],[975,1061,1266,1267,1268],["Date","2020-11-13T00:00:00.000Z"],[],"2020-11-13-modules-to-cdn.md","2020-03-24-webcomponent",{"id":1355,"data":1357,"body":1364,"filePath":1365,"digest":1366,"rendered":1367,"legacyId":1427},{"title":1358,"date":1359,"categories":1360,"tags":1361,"lang":17},"Web Components and React: A Pragmatic POC in the Enterprise",["Date","2020-03-24T00:00:00.000Z"],[17],[975,1061,1362,1060,1363],"Web Components","Architecture","Web Components are often presented as the future of frontend development. At Talend, we wondered: could we use Web Components alongside React? Could they help us build a more modular, framework-agnostic architecture? I conducted a POC to find out. What I discovered challenged some common assumptions about Web Components.\n\n## The Dream: Framework-Agnostic Components\n\nThe promise of Web Components is seductive:\n\n- **Framework-agnostic** : Write once, use anywhere (React, Vue, Angular, vanilla JS...)\n- **Encapsulation** : Shadow DOM ensures styles don't leak\n- **Reusability** : True components that work across teams and projects\n- **Future-proof** : Built on web standards, not tied to any framework\n\nAt Talend, we have multiple teams, mainly using react, and lots of duplicated component logic. Web Components hipe goes up and down.\n\nSo I've built a POC: a simple button component as a Web Component, wrapped for React, and compared it with a native React component.\n\n## The POC: Building a Simple Button\n\n### Web Component Implementation\n\nFirst, we created a pure Web Component button:\n\n```javascript\nclass ShadowButton extends HTMLElement {\n  constructor() {\n    super();\n  }\n  \n  connectedCallback() {\n    if (!this.shadowRoot) {\n      this.attachShadow({ mode: \"open\" });\n      const button = document.createElement('button');\n      button.textContent = this.getAttribute('label') || 'Click me';\n      button.addEventListener('click', () => {\n        this.dispatchEvent(new CustomEvent('click', { detail: 'button clicked' }));\n      });\n      \n      const style = document.createElement('style');\n      style.textContent = `\n        button {\n          background: #007bff;\n          color: white;\n          padding: 10px 20px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        button:hover {\n          background: #0056b3;\n        }\n      `;\n      \n      this.shadowRoot.appendChild(style);\n      this.shadowRoot.appendChild(button);\n    }\n  }\n}\n\ncustomElements.define('my-button', ShadowButton);\n```\n\n### Using Web Components in React\n\nThen we had to figure out how to use this Web Component in React. The straightforward approach doesn't work due to React's event system and how it handles custom elements:\n\n```javascript\n// ❌ This doesn't work well\nexport function MyButton({ label, onClick }) {\n  const ref = useRef(null);\n  \n  useEffect(() => {\n    if (ref.current) {\n      ref.current.addEventListener('click', onClick);\n    }\n  }, [onClick]);\n  \n  return \u003Cmy-button ref={ref} label={label} />;\n}\n```\n\nThe issue is that React treats Web Components like regular HTML elements and doesn't properly handle custom events or properties.\n\n### The React Wrapper Solution\n\nWe created a generic wrapper component to bridge the gap:\n\n```javascript\nimport React from 'react';\n\nexport default function WebComponent({ component, ...props }) {\n  const [myEl, setState] = React.useState(document.createElement(component));\n  const el = React.useRef(null);\n  \n  React.useEffect(() => {\n    if (myEl.tagName.toLowerCase() !== component.toLowerCase()) {\n      setState(document.createElement(component));\n    } else {\n      Object.keys(props).forEach(key => {\n        if (typeof props[key] === 'string') {\n          myEl.setAttribute(key, props[key]);\n        } else {\n          myEl[key] = props[key];\n        }\n      });\n    }\n    \n    if (el.current) {\n      el.current.appendChild(myEl);\n    }\n  }, [component, props]);\n  \n  return \u003Cdiv ref={(ref) => { el = ref; }}>\u003C/div>;\n}\n\n// Usage in React\nexport function MyButtonWrapper(props) {\n  return \u003CWebComponent component=\"my-button\" {...props} />;\n}\n```\n\nThis works, but it's clunky. You're essentially bypassing React's virtual DOM and directly manipulating the DOM.\n\n### The Shadow DOM + React Challenge\n\nWe also explored rendering React **inside** a Web Component's Shadow DOM. This required a workaround because React has issues with synthetic events in Shadow DOM:\n\n```javascript\n/**\n * IMPORTANT NOTE:\n * Because React uses synthetic events, we have to patch the shadowDOM.\n * The following patch must be applied just after attachShadow\n * and you must not use document.createElement. Use shadowRoot.createElement instead.\n * Source: https://github.com/facebook/react/issues/9242\n */\nfunction changeOwnerDocumentToShadowRoot(element, shadowRoot) {\n  Object.defineProperty(element, 'ownerDocument', { value: shadowRoot });\n}\n\nfunction augmentAppendChildWithOwnerDocument(elem, shadowRoot) {\n  const origAppChild = elem.appendChild;\n  const propDesc = Object.getOwnPropertyDescriptor(elem, 'appendChild');\n  \n  if (!propDesc || propDesc.writable) {\n    Object.defineProperty(elem, 'appendChild', {\n      value: function (child) {\n        changeOwnerDocumentToShadowRoot(child, shadowRoot);\n        origAppChild?.call(elem, child);\n      }\n    });\n  }\n}\n\nfunction augmentCreateElementWithOwnerDocument(shadowRoot, createFnName) {\n  const originalCreateFn = document[createFnName];\n  shadowRoot[createFnName] = (...args) => {\n    const element = originalCreateFn.call(document, ...args);\n    changeOwnerDocumentToShadowRoot(element, shadowRoot);\n    augmentAppendChildWithOwnerDocument(element, shadowRoot);\n    return element;\n  };\n}\n\nexport function patchShadowForReact(shadowRoot) {\n  augmentCreateElementWithOwnerDocument(shadowRoot, 'createElement');\n  augmentCreateElementWithOwnerDocument(shadowRoot, 'createElementNS');\n  augmentCreateElementWithOwnerDocument(shadowRoot, 'createTextNode');\n}\n\n// Usage in a Web Component\nclass ReactButton extends HTMLElement {\n  connectedCallback() {\n    if (!this.shadowRoot) {\n      this.attachShadow({ mode: \"open\" });\n      patchShadowForReact(this.shadowRoot);\n      \n      const root = this.shadowRoot.createElement('div');\n      this.shadowRoot.appendChild(root);\n      \n      ReactDOM.render(\u003CMyReactButton {...this.props} />, root);\n    }\n  }\n}\n```\n\nWe actually had to **monkey-patch React** to make it work with Shadow DOM. Let that sink in. That's not a good sign.\n\n## What We Learned\n\n### 1. Isolation is a Double-Edged Sword\n\n**The Problem:**\nShadow DOM isolates styles, which is great for preventing CSS conflicts. But it also makes sharing styles **really complicated**.\n\nLet's say you want a consistent design system where all buttons have the same font, spacing rules, theme colors. In React, you'd share CSS or CSS-in-JS libraries easily.\n\nWith Web Components and Shadow DOM:\n\n```javascript\n// ❌ Your global styles don't reach the Shadow DOM\nconst globalStyles = `\n  button {\n    font-family: Segoe UI, sans-serif;\n    color: var(--primary-color);\n  }\n`;\n\n// ✅ You have to pass styles through attributes/properties or use CSS variables\ncustomElements.define('my-button', class extends HTMLElement {\n  connectedCallback() {\n    const style = document.createElement('style');\n    // You have to manually include/inherit styles\n    style.textContent = `\n      :host {\n        --primary-color: #007bff;\n      }\n      button {\n        color: var(--primary-color);\n      }\n    `;\n    this.shadowRoot.appendChild(style);\n  }\n});\n```\n\nCSS variables **are** the solution, but they add complexity. You're essentially passing configuration through a CSS variable tunnel. At scale, this becomes painful:\n\n```html\n\u003Cmy-button \n  style=\"\n    --primary-color: #007bff;\n    --primary-hover: #0056b3;\n    --font-family: Segoe UI;\n    --padding: 10px 20px;\n    --border-radius: 4px;\n  \"\n>\u003C/my-button>\n```\n\nThis defeats one of the main reasons we love React: **declarative props**.\n\n### 2. The Implicit API Problem\n\nHere's the real insight: React succeeded because it made a fundamental shift in how we think about UIs:\n\n**Before React :**\n```javascript\n// Imperative - how to update the DOM\nbutton.textContent = label;\nbutton.style.color = color;\nbutton.className = active ? 'active' : 'inactive';\nbutton.onclick = handler;\n```\n\n**With React :**\n```javascript\n// Declarative - describe the desired state\n\u003CButton label={label} color={color} active={active} onClick={handler} />\n```\n\nReact made the mental model **explicit and simple**: state → render → UI.\n\nWeb Components have the **implicit API** problem. You have to know:\n- Which attributes exist? Which are properties?\n- What events does it dispatch?\n- What methods are available?\n- When does the component re-render?\n\n```javascript\n// With a Web Component, is this right?\n\u003Cmy-button \n  label=\"Click me\"          // attribute or property?\n  disabled={true}            // attribute or property?\n  onChange={handler}         // event listener or callback prop?\n  ref={ref}                  // how do I call methods?\n/>\n```\n\nCompare with React:\n\n```javascript\n\u003CButton \n  label=\"Click me\"           // prop (clear)\n  disabled={true}            // prop (clear)\n  onChange={handler}         // callback prop (clear)\n  ref={ref}                  // ref (clear)\n/>\n```\n\nThe React API is **explicit and predictable**. Web Components require you to learn each component's specific API.\n\n### 3. React Has Bugs with Properties vs Attributes\n\nHere's where I really got frustrated: **React doesn't differentiate between properties and attributes**.\n\nIn HTML/DOM:\n\n```javascript\n// Attributes are strings in the HTML\n\u003Cinput type=\"text\" disabled />\n\u003Cbutton data-value=\"test\">\u003C/button>\n\n// Properties are JavaScript object properties\nconst input = document.querySelector('input');\ninput.disabled = true;              // property\ninput.setAttribute('disabled', ''); // attribute\n\ninput.value = 'hello';              // property\ninput.getAttribute('value');        // attribute (might be different!)\n```\n\nReact treats everything as an attribute:\n\n```javascript\n// React does this:\nelement.setAttribute('disabled', 'true');  // ❌ Wrong! Becomes the string \"true\"\n\n// It should do this for properties:\nelement.disabled = true;  // ✅ Correct\n```\n\nThis causes real bugs when using Web Components:\n\n```javascript\n\u003Cmy-checkbox checked={true} />\n// React sets: element.setAttribute('checked', 'true')\n// But the component expects: element.checked = true\n\n// The component might not work correctly!\n```\n\nReact's solution? They're slowly improving this, but it's been an issue for years. There's a whole GitHub issue about it (#9242).\n\n## The Verdict\n\nAfter the POC, here's our conclusion:\n\n### When Web Components Make Sense\n- **Third-party integrations** : Embedding non-React widgets in your app\n- **Framework transitions** : If you're migrating from one framework to another\n- **True cross-framework sharing** : If you genuinely need the same component in React, Vue, AND Angular\n- **Progressive enhancement** : Building layers that don't require a full framework\n\n### When They Don't\n- **Enterprise React applications** : React's declarative model is superior for application development\n- **Design systems** : React component libraries (like Material-UI, Chakra) are better\n- **Shared libraries** : If everyone uses React, just use React components\n- **Performance** : Web Components aren't faster; they require workarounds with React\n\n## The Real Issue: We Keep Forgetting React Solved a Problem\n\nReact's success isn't just about virtual DOMs or performance. It's about **making UIs simple to reason about**.\n\nWeb Components try to be framework-agnostic, but at what cost? You lose:\n- **Predictable APIs** : No standard way to handle props, events, lifecycle\n- **Developer experience** : You're writing framework-specific wrappers constantly\n- **Tooling support** : IDEs struggle with custom elements without a framework\n\nWe keep trying to reinvent the wheel. React (and Vue, Angular) are popular **because** they solved this.\n\n## Our Decision at Talend\n\nWe abandoned the Web Component strategy for our main design system. Instead, we:\n\n1. **Kept React** for our design system (it's what 95% of our teams use)\n2. **Made it truly framework-agnostic** by externalizing components via UMD/CDN (different approach, more effective)\n3. **Used Web Components strategically** for third-party integrations only\n\n## Code References\n\nThe POC code is available in two gists:\n\n1. **Patching React for Shadow DOM** : https://gist.github.com/jmfrancois/a728521a1cee561e5fb8370b2882a863\n   - Shows the workaround needed for React to work with Shadow DOM\n   \n2. **React Wrapper for Web Components** : https://gist.github.com/jmfrancois/90fecb86695f38e0e234f3ac1ad050c7\n   - A generic wrapper to use Web Components in React\n\nBoth are hacky. Both prove the point: mixing Web Components and React requires friction.\n\n## Conclusion\n\nWeb Components are a powerful standard. But they're not a silver bullet for component reusability in enterprise applications.\n\nThe lesson? **Don't chase the shiny new standard just because it's a standard.** React solved real problems. Web Components solve different ones.\n\nIf you're building a React app, build React components. If you need true framework independence, that's a rare requirement that deserves a rare solution (like micro-frontends with separate frameworks).\n\nAnd if you do go down the Web Component path in React, remember to apply that Shadow DOM patch and reconsider your life choices.\n\n---\n\n**References:**\n- [Web Components MDN](https://developer.mozilla.org/en-US/docs/Web/Web_Components)\n- [React and Shadow DOM Issue](https://github.com/facebook/react/issues/9242)\n- [Web Components vs React](https://www.thinktecture.com/en/web-components/introduction/)\n- [Custom Elements Spec](https://html.spec.whatwg.org/multipage/custom-elements.html)","src/content/posts/2020-03-24-webcomponent.md","aa8700d5dd524bcb",{"html":1368,"metadata":1369},"\u003Cp>Web Components are often presented as the future of frontend development. At Talend, we wondered: could we use Web Components alongside React? Could they help us build a more modular, framework-agnostic architecture? I conducted a POC to find out. What I discovered challenged some common assumptions about Web Components.\u003C/p>\n\u003Ch2 id=\"the-dream-framework-agnostic-components\">The Dream: Framework-Agnostic Components\u003C/h2>\n\u003Cp>The promise of Web Components is seductive:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Framework-agnostic\u003C/strong> : Write once, use anywhere (React, Vue, Angular, vanilla JS…)\u003C/li>\n\u003Cli>\u003Cstrong>Encapsulation\u003C/strong> : Shadow DOM ensures styles don’t leak\u003C/li>\n\u003Cli>\u003Cstrong>Reusability\u003C/strong> : True components that work across teams and projects\u003C/li>\n\u003Cli>\u003Cstrong>Future-proof\u003C/strong> : Built on web standards, not tied to any framework\u003C/li>\n\u003C/ul>\n\u003Cp>At Talend, we have multiple teams, mainly using react, and lots of duplicated component logic. Web Components hipe goes up and down.\u003C/p>\n\u003Cp>So I’ve built a POC: a simple button component as a Web Component, wrapped for React, and compared it with a native React component.\u003C/p>\n\u003Ch2 id=\"the-poc-building-a-simple-button\">The POC: Building a Simple Button\u003C/h2>\n\u003Ch3 id=\"web-component-implementation\">Web Component Implementation\u003C/h3>\n\u003Cp>First, we created a pure Web Component button:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">class\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">ShadowButton\u003C/span>\u003Cspan style=\"color:#F92672\"> extends\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;font-style:italic;text-decoration:underline\">HTMLElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  constructor\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">    super\u003C/span>\u003Cspan style=\"color:#F8F8F2\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  connectedCallback\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#F92672\">!\u003C/span>\u003Cspan style=\"color:#FD971F\">this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">      this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#A6E22E\">attachShadow\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({ mode: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"open\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> button \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'button'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      button.textContent \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#FD971F\"> this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#A6E22E\">getAttribute\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'label'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#F92672\">||\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'Click me'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      button.\u003C/span>\u003Cspan style=\"color:#A6E22E\">addEventListener\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'click'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, () \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">        this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#A6E22E\">dispatchEvent\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#F92672\">new\u003C/span>\u003Cspan style=\"color:#A6E22E\"> CustomEvent\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'click'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, { detail: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'button clicked'\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> style \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'style'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      style.textContent \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\"> `\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        button {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          background: #007bff;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          color: white;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          padding: 10px 20px;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          border: none;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          border-radius: 4px;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          cursor: pointer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        button:hover {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">          background: #0056b3;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">      `\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">      this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot.\u003C/span>\u003Cspan style=\"color:#A6E22E\">appendChild\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(style);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">      this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot.\u003C/span>\u003Cspan style=\"color:#A6E22E\">appendChild\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(button);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">customElements.\u003C/span>\u003Cspan style=\"color:#A6E22E\">define\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'my-button'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, ShadowButton);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"using-web-components-in-react\">Using Web Components in React\u003C/h3>\n\u003Cp>Then we had to figure out how to use this Web Component in React. The straightforward approach doesn’t work due to React’s event system and how it handles custom elements:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// ❌ This doesn't work well\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> MyButton\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({ \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">label\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">onClick\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> ref \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#A6E22E\"> useRef\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#AE81FF\">null\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  useEffect\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(() \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (ref.current) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      ref.current.\u003C/span>\u003Cspan style=\"color:#A6E22E\">addEventListener\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'click'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, onClick);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }, [onClick]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">my-button\u003C/span>\u003Cspan style=\"color:#A6E22E\"> ref\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">ref\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#A6E22E\"> label\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">label\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The issue is that React treats Web Components like regular HTML elements and doesn’t properly handle custom events or properties.\u003C/p>\n\u003Ch3 id=\"the-react-wrapper-solution\">The React Wrapper Solution\u003C/h3>\n\u003Cp>We created a generic wrapper component to bridge the gap:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> React \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'react'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#F92672\"> default\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> WebComponent\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({ \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">component\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#F92672\">...\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">props\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [myEl, setState] \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> React.\u003C/span>\u003Cspan style=\"color:#A6E22E\">useState\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(component));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> el \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> React.\u003C/span>\u003Cspan style=\"color:#A6E22E\">useRef\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#AE81FF\">null\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  React.\u003C/span>\u003Cspan style=\"color:#A6E22E\">useEffect\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(() \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (myEl.tagName.\u003C/span>\u003Cspan style=\"color:#A6E22E\">toLowerCase\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() \u003C/span>\u003Cspan style=\"color:#F92672\">!==\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> component.\u003C/span>\u003Cspan style=\"color:#A6E22E\">toLowerCase\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">      setState\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(component));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    } \u003C/span>\u003Cspan style=\"color:#F92672\">else\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      Object.\u003C/span>\u003Cspan style=\"color:#A6E22E\">keys\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(props).\u003C/span>\u003Cspan style=\"color:#A6E22E\">forEach\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">key\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> =>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">        if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#F92672\">typeof\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> props[key] \u003C/span>\u003Cspan style=\"color:#F92672\">===\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'string'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">          myEl.\u003C/span>\u003Cspan style=\"color:#A6E22E\">setAttribute\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(key, props[key]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        } \u003C/span>\u003Cspan style=\"color:#F92672\">else\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">          myEl[key] \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> props[key];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (el.current) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      el.current.\u003C/span>\u003Cspan style=\"color:#A6E22E\">appendChild\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(myEl);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }, [component, props]);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">div\u003C/span>\u003Cspan style=\"color:#A6E22E\"> ref\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">ref\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { el \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> ref; }\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">div\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Usage in React\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> MyButtonWrapper\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">props\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">WebComponent\u003C/span>\u003Cspan style=\"color:#A6E22E\"> component\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"my-button\"\u003C/span>\u003Cspan style=\"color:#F92672\"> {...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">props\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This works, but it’s clunky. You’re essentially bypassing React’s virtual DOM and directly manipulating the DOM.\u003C/p>\n\u003Ch3 id=\"the-shadow-dom--react-challenge\">The Shadow DOM + React Challenge\u003C/h3>\n\u003Cp>We also explored rendering React \u003Cstrong>inside\u003C/strong> a Web Component’s Shadow DOM. This required a workaround because React has issues with synthetic events in Shadow DOM:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">/**\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> * IMPORTANT NOTE:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> * Because React uses synthetic events, we have to patch the shadowDOM.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> * The following patch must be applied just after attachShadow\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> * and you must not use document.createElement. Use shadowRoot.createElement instead.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> * Source: https://github.com/facebook/react/issues/9242\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"> */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> changeOwnerDocumentToShadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">element\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">shadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  Object.\u003C/span>\u003Cspan style=\"color:#A6E22E\">defineProperty\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(element, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'ownerDocument'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, { value: shadowRoot });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> augmentAppendChildWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">elem\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">shadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> origAppChild \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> elem.appendChild;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> propDesc \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Object.\u003C/span>\u003Cspan style=\"color:#A6E22E\">getOwnPropertyDescriptor\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(elem, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'appendChild'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#F92672\">!\u003C/span>\u003Cspan style=\"color:#F8F8F2\">propDesc \u003C/span>\u003Cspan style=\"color:#F92672\">||\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> propDesc.writable) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    Object.\u003C/span>\u003Cspan style=\"color:#A6E22E\">defineProperty\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(elem, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'appendChild'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">      value\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">function\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">child\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">        changeOwnerDocumentToShadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(child, shadowRoot);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        origAppChild?.\u003C/span>\u003Cspan style=\"color:#A6E22E\">call\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(elem, child);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> augmentCreateElementWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">shadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">createFnName\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> originalCreateFn \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> document[createFnName];\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  shadowRoot[createFnName] \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#F92672\">...\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">args\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> element \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> originalCreateFn.\u003C/span>\u003Cspan style=\"color:#A6E22E\">call\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(document, \u003C/span>\u003Cspan style=\"color:#F92672\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">args);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">    changeOwnerDocumentToShadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(element, shadowRoot);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">    augmentAppendChildWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(element, shadowRoot);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> element;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> patchShadowForReact\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">shadowRoot\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  augmentCreateElementWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(shadowRoot, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'createElement'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  augmentCreateElementWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(shadowRoot, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'createElementNS'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  augmentCreateElementWithOwnerDocument\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(shadowRoot, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'createTextNode'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Usage in a Web Component\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">class\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">ReactButton\u003C/span>\u003Cspan style=\"color:#F92672\"> extends\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;font-style:italic;text-decoration:underline\">HTMLElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  connectedCallback\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#F92672\">!\u003C/span>\u003Cspan style=\"color:#FD971F\">this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">      this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.\u003C/span>\u003Cspan style=\"color:#A6E22E\">attachShadow\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({ mode: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"open\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">      patchShadowForReact\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F\">this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> root \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#FD971F\"> this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'div'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">      this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot.\u003C/span>\u003Cspan style=\"color:#A6E22E\">appendChild\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(root);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      ReactDOM.\u003C/span>\u003Cspan style=\"color:#A6E22E\">render\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">MyReactButton\u003C/span>\u003Cspan style=\"color:#F92672\"> {...\u003C/span>\u003Cspan style=\"color:#FD971F\">this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.props\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />, root);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>We actually had to \u003Cstrong>monkey-patch React\u003C/strong> to make it work with Shadow DOM. Let that sink in. That’s not a good sign.\u003C/p>\n\u003Ch2 id=\"what-we-learned\">What We Learned\u003C/h2>\n\u003Ch3 id=\"1-isolation-is-a-double-edged-sword\">1. Isolation is a Double-Edged Sword\u003C/h3>\n\u003Cp>\u003Cstrong>The Problem:\u003C/strong>\nShadow DOM isolates styles, which is great for preventing CSS conflicts. But it also makes sharing styles \u003Cstrong>really complicated\u003C/strong>.\u003C/p>\n\u003Cp>Let’s say you want a consistent design system where all buttons have the same font, spacing rules, theme colors. In React, you’d share CSS or CSS-in-JS libraries easily.\u003C/p>\n\u003Cp>With Web Components and Shadow DOM:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// ❌ Your global styles don't reach the Shadow DOM\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> globalStyles \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\"> `\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  button {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    font-family: Segoe UI, sans-serif;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    color: var(--primary-color);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">`\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// ✅ You have to pass styles through attributes/properties or use CSS variables\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">customElements.\u003C/span>\u003Cspan style=\"color:#A6E22E\">define\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'my-button'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">class\u003C/span>\u003Cspan style=\"color:#F92672\"> extends\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;font-style:italic;text-decoration:underline\">HTMLElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  connectedCallback\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> style \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">createElement\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'style'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">    // You have to manually include/inherit styles\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    style.textContent \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\"> `\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">      :host {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        --primary-color: #007bff;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">      button {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">        color: var(--primary-color);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    `\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FD971F\">    this\u003C/span>\u003Cspan style=\"color:#F8F8F2\">.shadowRoot.\u003C/span>\u003Cspan style=\"color:#A6E22E\">appendChild\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(style);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>CSS variables \u003Cstrong>are\u003C/strong> the solution, but they add complexity. You’re essentially passing configuration through a CSS variable tunnel. At scale, this becomes painful:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"html\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">my-button\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  style\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    --primary-color: #007bff;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    --primary-hover: #0056b3;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    --font-family: Segoe UI;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    --padding: 10px 20px;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    --border-radius: 4px;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  \"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">my-button\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This defeats one of the main reasons we love React: \u003Cstrong>declarative props\u003C/strong>.\u003C/p>\n\u003Ch3 id=\"2-the-implicit-api-problem\">2. The Implicit API Problem\u003C/h3>\n\u003Cp>Here’s the real insight: React succeeded because it made a fundamental shift in how we think about UIs:\u003C/p>\n\u003Cp>\u003Cstrong>Before React :\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Imperative - how to update the DOM\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">button.textContent \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> label;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">button.style.color \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> color;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">button.className \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> active \u003C/span>\u003Cspan style=\"color:#F92672\">?\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'active'\u003C/span>\u003Cspan style=\"color:#F92672\"> :\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'inactive'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">button.onclick \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> handler;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>With React :\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Declarative - describe the desired state\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">Button\u003C/span>\u003Cspan style=\"color:#A6E22E\"> label\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">label\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#A6E22E\"> color\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">color\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#A6E22E\"> active\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">active\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#A6E22E\"> onClick\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">handler\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>React made the mental model \u003Cstrong>explicit and simple\u003C/strong>: state → render → UI.\u003C/p>\n\u003Cp>Web Components have the \u003Cstrong>implicit API\u003C/strong> problem. You have to know:\u003C/p>\n\u003Cul>\n\u003Cli>Which attributes exist? Which are properties?\u003C/li>\n\u003Cli>What events does it dispatch?\u003C/li>\n\u003Cli>What methods are available?\u003C/li>\n\u003Cli>When does the component re-render?\u003C/li>\n\u003C/ul>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// With a Web Component, is this right?\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">my-button\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  label\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"Click me\"\u003C/span>\u003Cspan style=\"color:#88846F\">          // attribute or property?\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  disabled\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">            // attribute or property?\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  onChange\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">handler\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">         // event listener or callback prop?\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  ref\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">ref\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">                  // how do I call methods?\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">/>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Compare with React:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">Button\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  label\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"Click me\"\u003C/span>\u003Cspan style=\"color:#88846F\">           // prop (clear)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  disabled\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">            // prop (clear)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  onChange\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">handler\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">         // callback prop (clear)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">  ref\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">ref\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#88846F\">                  // ref (clear)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">/>\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The React API is \u003Cstrong>explicit and predictable\u003C/strong>. Web Components require you to learn each component’s specific API.\u003C/p>\n\u003Ch3 id=\"3-react-has-bugs-with-properties-vs-attributes\">3. React Has Bugs with Properties vs Attributes\u003C/h3>\n\u003Cp>Here’s where I really got frustrated: \u003Cstrong>React doesn’t differentiate between properties and attributes\u003C/strong>.\u003C/p>\n\u003Cp>In HTML/DOM:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Attributes are strings in the HTML\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">input\u003C/span>\u003Cspan style=\"color:#A6E22E\"> type\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"text\"\u003C/span>\u003Cspan style=\"color:#A6E22E\"> disabled\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">button\u003C/span>\u003Cspan style=\"color:#A6E22E\"> data-value\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"test\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">button\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Properties are JavaScript object properties\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> input \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> document.\u003C/span>\u003Cspan style=\"color:#A6E22E\">querySelector\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'input'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">input.disabled \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#AE81FF\"> true\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;              \u003C/span>\u003Cspan style=\"color:#88846F\">// property\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">input.\u003C/span>\u003Cspan style=\"color:#A6E22E\">setAttribute\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'disabled'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E6DB74\">''\u003C/span>\u003Cspan style=\"color:#F8F8F2\">); \u003C/span>\u003Cspan style=\"color:#88846F\">// attribute\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">input.value \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'hello'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;              \u003C/span>\u003Cspan style=\"color:#88846F\">// property\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">input.\u003C/span>\u003Cspan style=\"color:#A6E22E\">getAttribute\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'value'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);        \u003C/span>\u003Cspan style=\"color:#88846F\">// attribute (might be different!)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>React treats everything as an attribute:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// React does this:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">element.\u003C/span>\u003Cspan style=\"color:#A6E22E\">setAttribute\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'disabled'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E6DB74\">'true'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);  \u003C/span>\u003Cspan style=\"color:#88846F\">// ❌ Wrong! Becomes the string \"true\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// It should do this for properties:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">element.disabled \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#AE81FF\"> true\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;  \u003C/span>\u003Cspan style=\"color:#88846F\">// ✅ Correct\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This causes real bugs when using Web Components:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">my-checkbox\u003C/span>\u003Cspan style=\"color:#A6E22E\"> checked\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// React sets: element.setAttribute('checked', 'true')\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// But the component expects: element.checked = true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// The component might not work correctly!\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>React’s solution? They’re slowly improving this, but it’s been an issue for years. There’s a whole GitHub issue about it (#9242).\u003C/p>\n\u003Ch2 id=\"the-verdict\">The Verdict\u003C/h2>\n\u003Cp>After the POC, here’s our conclusion:\u003C/p>\n\u003Ch3 id=\"when-web-components-make-sense\">When Web Components Make Sense\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Third-party integrations\u003C/strong> : Embedding non-React widgets in your app\u003C/li>\n\u003Cli>\u003Cstrong>Framework transitions\u003C/strong> : If you’re migrating from one framework to another\u003C/li>\n\u003Cli>\u003Cstrong>True cross-framework sharing\u003C/strong> : If you genuinely need the same component in React, Vue, AND Angular\u003C/li>\n\u003Cli>\u003Cstrong>Progressive enhancement\u003C/strong> : Building layers that don’t require a full framework\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"when-they-dont\">When They Don’t\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Enterprise React applications\u003C/strong> : React’s declarative model is superior for application development\u003C/li>\n\u003Cli>\u003Cstrong>Design systems\u003C/strong> : React component libraries (like Material-UI, Chakra) are better\u003C/li>\n\u003Cli>\u003Cstrong>Shared libraries\u003C/strong> : If everyone uses React, just use React components\u003C/li>\n\u003Cli>\u003Cstrong>Performance\u003C/strong> : Web Components aren’t faster; they require workarounds with React\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-real-issue-we-keep-forgetting-react-solved-a-problem\">The Real Issue: We Keep Forgetting React Solved a Problem\u003C/h2>\n\u003Cp>React’s success isn’t just about virtual DOMs or performance. It’s about \u003Cstrong>making UIs simple to reason about\u003C/strong>.\u003C/p>\n\u003Cp>Web Components try to be framework-agnostic, but at what cost? You lose:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Predictable APIs\u003C/strong> : No standard way to handle props, events, lifecycle\u003C/li>\n\u003Cli>\u003Cstrong>Developer experience\u003C/strong> : You’re writing framework-specific wrappers constantly\u003C/li>\n\u003Cli>\u003Cstrong>Tooling support\u003C/strong> : IDEs struggle with custom elements without a framework\u003C/li>\n\u003C/ul>\n\u003Cp>We keep trying to reinvent the wheel. React (and Vue, Angular) are popular \u003Cstrong>because\u003C/strong> they solved this.\u003C/p>\n\u003Ch2 id=\"our-decision-at-talend\">Our Decision at Talend\u003C/h2>\n\u003Cp>We abandoned the Web Component strategy for our main design system. Instead, we:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Kept React\u003C/strong> for our design system (it’s what 95% of our teams use)\u003C/li>\n\u003Cli>\u003Cstrong>Made it truly framework-agnostic\u003C/strong> by externalizing components via UMD/CDN (different approach, more effective)\u003C/li>\n\u003Cli>\u003Cstrong>Used Web Components strategically\u003C/strong> for third-party integrations only\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"code-references\">Code References\u003C/h2>\n\u003Cp>The POC code is available in two gists:\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>Patching React for Shadow DOM\u003C/strong> : \u003Ca href=\"https://gist.github.com/jmfrancois/a728521a1cee561e5fb8370b2882a863\">https://gist.github.com/jmfrancois/a728521a1cee561e5fb8370b2882a863\u003C/a>\u003C/p>\n\u003Cul>\n\u003Cli>Shows the workaround needed for React to work with Shadow DOM\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>React Wrapper for Web Components\u003C/strong> : \u003Ca href=\"https://gist.github.com/jmfrancois/90fecb86695f38e0e234f3ac1ad050c7\">https://gist.github.com/jmfrancois/90fecb86695f38e0e234f3ac1ad050c7\u003C/a>\u003C/p>\n\u003Cul>\n\u003Cli>A generic wrapper to use Web Components in React\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003Cp>Both are hacky. Both prove the point: mixing Web Components and React requires friction.\u003C/p>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>Web Components are a powerful standard. But they’re not a silver bullet for component reusability in enterprise applications.\u003C/p>\n\u003Cp>The lesson? \u003Cstrong>Don’t chase the shiny new standard just because it’s a standard.\u003C/strong> React solved real problems. Web Components solve different ones.\u003C/p>\n\u003Cp>If you’re building a React app, build React components. If you need true framework independence, that’s a rare requirement that deserves a rare solution (like micro-frontends with separate frameworks).\u003C/p>\n\u003Cp>And if you do go down the Web Component path in React, remember to apply that Shadow DOM patch and reconsider your life choices.\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>References:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\">Web Components MDN\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/facebook/react/issues/9242\">React and Shadow DOM Issue\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.thinktecture.com/en/web-components/introduction/\">Web Components vs React\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://html.spec.whatwg.org/multipage/custom-elements.html\">Custom Elements Spec\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1370,"localImagePaths":1420,"remoteImagePaths":1421,"frontmatter":1422,"imagePaths":1426},[1371,1374,1377,1380,1383,1386,1389,1392,1395,1398,1401,1404,1407,1410,1413,1416,1419],{"depth":449,"slug":1372,"text":1373},"the-dream-framework-agnostic-components","The Dream: Framework-Agnostic Components",{"depth":449,"slug":1375,"text":1376},"the-poc-building-a-simple-button","The POC: Building a Simple Button",{"depth":1018,"slug":1378,"text":1379},"web-component-implementation","Web Component Implementation",{"depth":1018,"slug":1381,"text":1382},"using-web-components-in-react","Using Web Components in React",{"depth":1018,"slug":1384,"text":1385},"the-react-wrapper-solution","The React Wrapper Solution",{"depth":1018,"slug":1387,"text":1388},"the-shadow-dom--react-challenge","The Shadow DOM + React Challenge",{"depth":449,"slug":1390,"text":1391},"what-we-learned","What We Learned",{"depth":1018,"slug":1393,"text":1394},"1-isolation-is-a-double-edged-sword","1. Isolation is a Double-Edged Sword",{"depth":1018,"slug":1396,"text":1397},"2-the-implicit-api-problem","2. The Implicit API Problem",{"depth":1018,"slug":1399,"text":1400},"3-react-has-bugs-with-properties-vs-attributes","3. React Has Bugs with Properties vs Attributes",{"depth":449,"slug":1402,"text":1403},"the-verdict","The Verdict",{"depth":1018,"slug":1405,"text":1406},"when-web-components-make-sense","When Web Components Make Sense",{"depth":1018,"slug":1408,"text":1409},"when-they-dont","When They Don’t",{"depth":449,"slug":1411,"text":1412},"the-real-issue-we-keep-forgetting-react-solved-a-problem","The Real Issue: We Keep Forgetting React Solved a Problem",{"depth":449,"slug":1414,"text":1415},"our-decision-at-talend","Our Decision at Talend",{"depth":449,"slug":1417,"text":1418},"code-references","Code References",{"depth":449,"slug":459,"text":460},[],[],{"title":1358,"categories":1423,"tags":1424,"date":1425},[17],[975,1061,1362,1060,1363],["Date","2020-03-24T00:00:00.000Z"],[],"2020-03-24-webcomponent.md","2019-10-10-sentry",{"id":1428,"data":1430,"body":1438,"filePath":1439,"digest":1440,"rendered":1441,"legacyId":1543},{"title":1431,"date":1432,"categories":1433,"tags":1434,"lang":17},"Sentry: De l'aveuglement à la visibilité - Gestion des erreurs JavaScript dans les SPA",["Date","2019-10-10T00:00:00.000Z"],[696],[975,1061,1435,1436,1437],"Sentry","SPA","Monitoring","Pendant longtemps, chez Talend, nous avions un problème récurrent : des tickets Jira s'accumulaient avec des titres comme \"Page blanche\", \"L'app ne charge pas\", \"Ça crash sur Chrome\". Impossible de reproduire, aucun message d'erreur. Bienvenue dans le monde des Single Page Applications. Et comment j'ai convaincu l'entreprise d'adopter Sentry pour y voir clair.\n\n## Le problème : L'aveuglement des SPA\n\n### Les tickets mystérieux\n\nLes Single Page Applications (SPA) sont magnifiques : chargement instantané, pas de rafraîchissement de page, expérience fluide. Mais elles apportent un cauchemar pour le debugging : **on ne voit rien**.\n\nVoici un ticket typique :\n\n> **Titre :** \"App crash au démarrage\"\n> **Description :** \"Mon collègue a lancé l'app ce matin et elle affichait une page blanche. Quand il l'a relancée, ça a marché. Ça reprend aléatoirement.\"\n> **Environnement :** \"Chrome, Windows 10\"\n> **Steps to reproduce :** \"On sait pas\"\n\nComment débugger sans erreur ? Comment reproduire un bug qui disparaît au rechargement ?\n\n### L'impact sur l'expérience client\n\nChez Talend, nous avions une relation complexe avec nos clients. Nos produits sont critiques - des outils d'intégration de données, de migration, d'orchestration. Une \"page blanche\" signifie que le client ne peut pas travailler.\n\nMais le pire, c'est que **nous ne saurions jamais combien de clients étaient affectés**. Nous n'avions que les tickets manuels. Combien d'utilisateurs ont juste fermé l'onglet sans signaler le problème ? Combien ont attendu une heure que ça se règle tout seul ?\n\n### Les défis spécifiques des SPA\n\nLes SPA ont des caractéristiques qui rendent le debugging particulièrement difficile :\n\n1. **JavaScript asynchrone** : Les erreurs peuvent arriver dans n'importe quel callback, Promise, ou event listener\n2. **Pas de logs côté serveur** : L'erreur arrive dans le navigateur du client\n3. **Code bundlé et minifié** : Les stack traces sont illisibles\n4. **Source maps** : Nécessaires pour avoir des stack traces lisibles\n5. **Erreurs réseau** : Fetch échoue silencieusement si pas traitée\n6. **État global complexe** : Impossible de savoir quel state a causé le crash\n\n## La quête d'une solution\n\nC'est là que j'ai découvert **Sentry**.\n\nSentry est une plateforme de monitoring d'erreurs qui fait essentiellement ceci :\n1. Capture chaque erreur qui se produit dans votre application\n2. La contextualize avec les informations disponibles (navigateur, version, user, etc.)\n3. Vous l'envoie en temps réel\n4. Vous permet d'analyser et de trier les erreurs\n\nRévolutionnaire ? Pour nous, oui.\n\n## Convaincre l'entreprise\n\nPousser l'adoption d'un nouvel outil n'est jamais facile. J'ai dû présenter plusieurs angles d'attaque.\n\n### 1. Le coût humain\n\nNous perdions énormément de temps à essayer de reproduire des bugs non reproductibles. Un ticket \"page blanche\" pouvait occuper un développeur une journée entière pour finalement être fermé \"won't fix\" faute de reproduction.\n\nAvec Sentry, chaque occurrence du bug est enregistrée avec :\n- **Stack trace complet** : Exactement où le code a échoué\n- **Breadcrumbs** : L'historique des actions de l'utilisateur avant le crash\n- **Contexte** : Navigateur, version, résolution d'écran, etc.\n\n### 2. La relation client\n\nC'était mon argument majeur. Quand un client signalait un problème :\n\n**Avant Sentry :**\n> \"Merci de votre signalement. Pouvez-vous le reproduire ? Avez-vous les étapes exactes ? Une vidéo ? La console du navigateur ?\"\n> (Le client ne sait généralement pas ce qu'est la console)\n> \"Nous ne réussissons pas à reproduire. Pouvez-vous essayer à nouveau ?\"\n\n**Avec Sentry :**\n> Client signale : \"L'app affiche une page blanche\"\n> On regarde Sentry : \"Ah, c'est une erreur dans le module de chargement des données qui timeout après 30 secondes. Nous savons exactement ce que c'est. Voici le fix.\"\n\n### 3. Les métriques\n\nJ'ai montré une démo avec un vrai Sentry instance contenant les erreurs d'une de nos applications de test.\n\nLe dashboard montrait :\n\n```\nTotal events: 1,243 in the last 7 days\n\nTop 5 erreurs :\n1. \"Cannot read property 'data' of undefined\"  - 412 occurrences\n2. \"Timeout loading configuration\"              - 238 occurrences  \n3. \"Network error: 503\"                         - 187 occurrences\n4. \"Invalid state transition\"                   - 152 occurrences\n5. \"Memory leak in subscription\"                - 98 occurrences\n```\n\nSoudain, nous avions **de la visibilité**. Nous pouvions prioriser. La première erreur affectait peut-être 80% des tickets de support - on aurait dû la fixer en premier.\n\n### 4. La démo en live\n\nJ'ai lancé une application connectée à Sentry, déclenché une erreur, et montré comment elle apparaissait dans Sentry une fraction de seconde plus tard avec toute les informations.\n\nLes yeux des stakeholders ont brillé.\n\n## L'implémentation\n\nL'intégration de Sentry dans une SPA React/Redux est simple.\n\n### Setup basique\n\n```javascript\nimport * as Sentry from \"@sentry/react\";\n\nSentry.init({\n  dsn: \"https://examplePublicKey@o0.ingest.sentry.io/0\",\n  environment: process.env.NODE_ENV,\n  tracesSampleRate: 1.0,\n  integrations: [\n    new Sentry.Replay({\n      maskAllText: true,\n      blockAllMedia: true,\n    }),\n  ],\n});\n\nexport default Sentry.withProfiler(App);\n```\n\n### Capturer les erreurs Redux\n\n```javascript\nSentry.captureException(error, {\n  tags: {\n    section: 'redux',\n    action: action.type,\n  },\n  contexts: {\n    redux: {\n      dispatched_action: action,\n      previous_state: previousState,\n    },\n  },\n});\n```\n\n### Ajouter du contexte utilisateur\n\n```javascript\nSentry.setUser({\n  id: user.id,\n  email: user.email,\n  organization_id: user.organization,\n});\n```\n\n### Erreurs réseau\n\n```javascript\nfetch('/api/data')\n  .then(r => r.json())\n  .catch(error => {\n    Sentry.captureException(error, {\n      tags: { type: 'network' },\n      contexts: {\n        api_call: {\n          endpoint: '/api/data',\n          method: 'GET',\n        },\n      },\n    });\n  });\n```\n\n### Source maps en production\n\nC'était critique pour avoir des stack traces lisibles. Nous avons configuré le CI/CD pour uploader les source maps à Sentry à chaque déploiement.\n\n```bash\n# Dans le pipeline CI/CD\n./node_modules/.bin/sentry-cli releases \\\n  -o our-org \\\n  -p our-project \\\n  files upload-sourcemaps ./dist --ignore node_modules\n```\n\n## Les résultats\n\nL'adoption de Sentry a été transformationnelle.\n\n### 1. Temps de debugging réduit de 80%\n\nUn bug qui prenait 4 heures à investiguer peut maintenant être compris en 5 minutes.\n\n**Exemple réel :**\n\nTicket : \"App charge lentement parfois\"\n\nSans Sentry : On mettait des console.log un peu partout, recompilait, attendait qu'un client reproduise, puis on regardait les logs.\n\nAvec Sentry : On voit dans les Performance graphs que certaines requests réseau timeout après 30 secondes, et on peut voir la distribution par navigateur, géolocalisation, etc.\n\n### 2. Réduction des tickets support\n\nNous avons pu identifier et fixer les 5 bugs les plus courants. Résultat : **40% de réduction des tickets de type \"page blanche\"** en un mois.\n\n### 3. Proactivité plutôt que réactivité\n\nAu lieu d'attendre les signalements clients, nous repérions les erreurs **avant** que les clients les signalent.\n\nExemple : Un problème de memory leak sur une certaine version de Chrome qui affectait 2% des utilisateurs. Nous l'avons repéré, fixé, et déployé en 48h sans un seul ticket support.\n\n### 4. Amélioration de la relation client\n\nNous pouvions répondre aux clients :\n\n> \"Merci pour le signalement. Nous avons identifié le problème dans nos logs (une issue avec le timeout du chargement des données). Voici la version corrigée qui sera disponible demain.\"\n\nLes clients étaient impressionnés par notre réactivité.\n\n### 5. Métriques pour le produit\n\nSentry nous donnait des données précieuses :\n- Quels navigateurs causaient le plus de problèmes ?\n- À quelle heure du jour les erreurs étaient-elles pics ?\n- Quels features étaient les plus instables ?\n\nCes informations guidaient nos décisions de développement.\n\n## Le dashboard Sentry en pratique\n\nVoici ce que notre équipe voyait quotidiennement :\n\n```\nToday's Overview\n├── New Issues: 3\n├── Unresolved Issues: 47\n├── Total Events: 2,341\n│   ├── Errors: 1,823\n│   ├── Transactions: 518\n│   └── Replay Sessions: 743\n│\n└── Top Issues This Week:\n    1. TypeError: Cannot read property 'map' of undefined\n       └── 156 occurrences (-23% from last week) ✓\n    \n    2. NetworkError: Failed to fetch\n       └── 143 occurrences (↑ 15%, needs investigation)\n    \n    3. RangeError: Invalid array length\n       └── 98 occurrences (-45%, fixed in release 2.3.0) ✓\n```\n\n## Alerting\n\nNous avons configuré des alertes intelligentes :\n\n```yaml\nAlert 1: \"Une nouvelle erreur jamais vue\"\n  → Alerte immédiate au Slack du team tech\n\nAlert 2: \"Une erreur dépasse 100 occurrences en 1 heure\"\n  → Paging du on-call engineer\n\nAlert 3: \"Taux d'erreur augmente de 50% par rapport à la baseline\"\n  → Investigation automatisée\n```\n\n## Session Replay : Le secret weapon\n\nUne des fonctionnalités les plus puissantes de Sentry 3.0+ est la **Session Replay**.\n\nQuand une erreur se produit, Sentry peut enregistrer une vidéo du navigateur (avec les données sensibles masquées).\n\nExemple :\n> Utilisateur signale : \"Impossible de soumettre le formulaire\"\n> On regarde la session replay de Sentry : On voit exactement quels champs ils ont rempli, comment le formulaire a réagi, puis le moment exact du crash.\n\nCela a sauvé littéralement des dizaines d'heures de debugging.\n\n## Résumé de l'architecture\n\n```\n┌──────────────────────────┐\n│   Application React      │\n│   (avec Sentry SDK)      │\n└────────────┬─────────────┘\n             │\n             │ Erreurs en temps réel\n             │\n┌────────────▼─────────────┐\n│    Sentry Cloud (SaaS)   │\n├───────────────────────────┤\n│ • Agrégation des erreurs │\n│ • Déduplication          │\n│ • Source maps processing │\n│ • Session Replay         │\n│ • Alerting               │\n└────────────┬─────────────┘\n             │\n        ┌────┴─────┬─────────┐\n        │           │         │\n   ┌────▼──┐  ┌────▼──┐  ┌───▼────┐\n   │ Slack │  │ Email │  │ Jira   │\n   │ Alerts│  │ Daily │  │ Issues │\n   └───────┘  └───────┘  └────────┘\n```\n\n## Les pièges à éviter\n\n### 1. Flood de mauvaises erreurs\n\nSans filtrage, Sentry peut être inondé par :\n- Des erreurs de plugins navigateur (adblock, Grammarly, etc.)\n- Des erreurs de code tiers\n- Des erreurs de développement local\n\nSolution : Mettre en place des rules d'ignoring :\n\n```javascript\nSentry.init({\n  ignoreErrors: [\n    // Plugin errors\n    'top.GLOBALS',\n    'chrome-extension://',\n    'moz-extension://',\n    // Erreurs non pertinentes\n    'SecurityError',\n  ],\n});\n```\n\n### 2. Oublier les source maps\n\nSans source maps, vous voyez :\n\n```\nTypeError: a.b is undefined\n  at Object.\u003Canonymous> (app.min.js:1:145000)\n```\n\nComplètement inutile. Toujours uploader les source maps.\n\n### 3. Ne pas sampler les transactions\n\nSi vous enregistrez **chaque** transaction réseau, Sentry explose rapidement. Limiter à 10-20% en production.\n\n```javascript\nSentry.init({\n  tracesSampleRate: 0.1, // 10% des transactions\n});\n```\n\n## Conclusion\n\nAdopter Sentry a été l'une de meilleures décisions que nous ayons prises en tant que team. Cela nous a permis :\n\n- **De voir les vrais problèmes** plutôt que d'attendre les signalements\n- **De réagir rapidement** aux incidents\n- **D'améliorer la relation client** avec une support proactive\n- **De prioriser intelligemment** les bugfixes\n\nEn tant qu'architect, c'était ma responsabilité de pousser pour cette visibilité. Aujourd'hui, je ne peux pas imaginer développer une SPA sans un système de monitoring d'erreurs.\n\nSi vous êtes encore en train de débugger via les tickets de support, je vous supplie d'essayer Sentry. Vous ne regarderez plus jamais votre SPA de la même manière.\n\n---\n\n**Ressources :**\n- [Sentry Documentation](https://docs.sentry.io/)\n- [React Integration Guide](https://docs.sentry.io/platforms/javascript/guides/react/)\n- [Error Handling Best Practices](https://docs.sentry.io/product/error-monitoring/)","src/content/posts/2019-10-10-sentry.md","6902213bccda4d81",{"html":1442,"metadata":1443},"\u003Cp>Pendant longtemps, chez Talend, nous avions un problème récurrent : des tickets Jira s’accumulaient avec des titres comme “Page blanche”, “L’app ne charge pas”, “Ça crash sur Chrome”. Impossible de reproduire, aucun message d’erreur. Bienvenue dans le monde des Single Page Applications. Et comment j’ai convaincu l’entreprise d’adopter Sentry pour y voir clair.\u003C/p>\n\u003Ch2 id=\"le-problème--laveuglement-des-spa\">Le problème : L’aveuglement des SPA\u003C/h2>\n\u003Ch3 id=\"les-tickets-mystérieux\">Les tickets mystérieux\u003C/h3>\n\u003Cp>Les Single Page Applications (SPA) sont magnifiques : chargement instantané, pas de rafraîchissement de page, expérience fluide. Mais elles apportent un cauchemar pour le debugging : \u003Cstrong>on ne voit rien\u003C/strong>.\u003C/p>\n\u003Cp>Voici un ticket typique :\u003C/p>\n\u003Cblockquote>\n\u003Cp>\u003Cstrong>Titre :\u003C/strong> “App crash au démarrage”\n\u003Cstrong>Description :\u003C/strong> “Mon collègue a lancé l’app ce matin et elle affichait une page blanche. Quand il l’a relancée, ça a marché. Ça reprend aléatoirement.”\n\u003Cstrong>Environnement :\u003C/strong> “Chrome, Windows 10”\n\u003Cstrong>Steps to reproduce :\u003C/strong> “On sait pas”\u003C/p>\n\u003C/blockquote>\n\u003Cp>Comment débugger sans erreur ? Comment reproduire un bug qui disparaît au rechargement ?\u003C/p>\n\u003Ch3 id=\"limpact-sur-lexpérience-client\">L’impact sur l’expérience client\u003C/h3>\n\u003Cp>Chez Talend, nous avions une relation complexe avec nos clients. Nos produits sont critiques - des outils d’intégration de données, de migration, d’orchestration. Une “page blanche” signifie que le client ne peut pas travailler.\u003C/p>\n\u003Cp>Mais le pire, c’est que \u003Cstrong>nous ne saurions jamais combien de clients étaient affectés\u003C/strong>. Nous n’avions que les tickets manuels. Combien d’utilisateurs ont juste fermé l’onglet sans signaler le problème ? Combien ont attendu une heure que ça se règle tout seul ?\u003C/p>\n\u003Ch3 id=\"les-défis-spécifiques-des-spa\">Les défis spécifiques des SPA\u003C/h3>\n\u003Cp>Les SPA ont des caractéristiques qui rendent le debugging particulièrement difficile :\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>JavaScript asynchrone\u003C/strong> : Les erreurs peuvent arriver dans n’importe quel callback, Promise, ou event listener\u003C/li>\n\u003Cli>\u003Cstrong>Pas de logs côté serveur\u003C/strong> : L’erreur arrive dans le navigateur du client\u003C/li>\n\u003Cli>\u003Cstrong>Code bundlé et minifié\u003C/strong> : Les stack traces sont illisibles\u003C/li>\n\u003Cli>\u003Cstrong>Source maps\u003C/strong> : Nécessaires pour avoir des stack traces lisibles\u003C/li>\n\u003Cli>\u003Cstrong>Erreurs réseau\u003C/strong> : Fetch échoue silencieusement si pas traitée\u003C/li>\n\u003Cli>\u003Cstrong>État global complexe\u003C/strong> : Impossible de savoir quel state a causé le crash\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"la-quête-dune-solution\">La quête d’une solution\u003C/h2>\n\u003Cp>C’est là que j’ai découvert \u003Cstrong>Sentry\u003C/strong>.\u003C/p>\n\u003Cp>Sentry est une plateforme de monitoring d’erreurs qui fait essentiellement ceci :\u003C/p>\n\u003Col>\n\u003Cli>Capture chaque erreur qui se produit dans votre application\u003C/li>\n\u003Cli>La contextualize avec les informations disponibles (navigateur, version, user, etc.)\u003C/li>\n\u003Cli>Vous l’envoie en temps réel\u003C/li>\n\u003Cli>Vous permet d’analyser et de trier les erreurs\u003C/li>\n\u003C/ol>\n\u003Cp>Révolutionnaire ? Pour nous, oui.\u003C/p>\n\u003Ch2 id=\"convaincre-lentreprise\">Convaincre l’entreprise\u003C/h2>\n\u003Cp>Pousser l’adoption d’un nouvel outil n’est jamais facile. J’ai dû présenter plusieurs angles d’attaque.\u003C/p>\n\u003Ch3 id=\"1-le-coût-humain\">1. Le coût humain\u003C/h3>\n\u003Cp>Nous perdions énormément de temps à essayer de reproduire des bugs non reproductibles. Un ticket “page blanche” pouvait occuper un développeur une journée entière pour finalement être fermé “won’t fix” faute de reproduction.\u003C/p>\n\u003Cp>Avec Sentry, chaque occurrence du bug est enregistrée avec :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Stack trace complet\u003C/strong> : Exactement où le code a échoué\u003C/li>\n\u003Cli>\u003Cstrong>Breadcrumbs\u003C/strong> : L’historique des actions de l’utilisateur avant le crash\u003C/li>\n\u003Cli>\u003Cstrong>Contexte\u003C/strong> : Navigateur, version, résolution d’écran, etc.\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"2-la-relation-client\">2. La relation client\u003C/h3>\n\u003Cp>C’était mon argument majeur. Quand un client signalait un problème :\u003C/p>\n\u003Cp>\u003Cstrong>Avant Sentry :\u003C/strong>\u003C/p>\n\u003Cblockquote>\n\u003Cp>“Merci de votre signalement. Pouvez-vous le reproduire ? Avez-vous les étapes exactes ? Une vidéo ? La console du navigateur ?”\n(Le client ne sait généralement pas ce qu’est la console)\n“Nous ne réussissons pas à reproduire. Pouvez-vous essayer à nouveau ?”\u003C/p>\n\u003C/blockquote>\n\u003Cp>\u003Cstrong>Avec Sentry :\u003C/strong>\u003C/p>\n\u003Cblockquote>\n\u003Cp>Client signale : “L’app affiche une page blanche”\nOn regarde Sentry : “Ah, c’est une erreur dans le module de chargement des données qui timeout après 30 secondes. Nous savons exactement ce que c’est. Voici le fix.”\u003C/p>\n\u003C/blockquote>\n\u003Ch3 id=\"3-les-métriques\">3. Les métriques\u003C/h3>\n\u003Cp>J’ai montré une démo avec un vrai Sentry instance contenant les erreurs d’une de nos applications de test.\u003C/p>\n\u003Cp>Le dashboard montrait :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Total events: 1,243 in the last 7 days\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Top 5 erreurs :\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>1. \"Cannot read property 'data' of undefined\"  - 412 occurrences\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>2. \"Timeout loading configuration\"              - 238 occurrences  \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>3. \"Network error: 503\"                         - 187 occurrences\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>4. \"Invalid state transition\"                   - 152 occurrences\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>5. \"Memory leak in subscription\"                - 98 occurrences\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Soudain, nous avions \u003Cstrong>de la visibilité\u003C/strong>. Nous pouvions prioriser. La première erreur affectait peut-être 80% des tickets de support - on aurait dû la fixer en premier.\u003C/p>\n\u003Ch3 id=\"4-la-démo-en-live\">4. La démo en live\u003C/h3>\n\u003Cp>J’ai lancé une application connectée à Sentry, déclenché une erreur, et montré comment elle apparaissait dans Sentry une fraction de seconde plus tard avec toute les informations.\u003C/p>\n\u003Cp>Les yeux des stakeholders ont brillé.\u003C/p>\n\u003Ch2 id=\"limplémentation\">L’implémentation\u003C/h2>\n\u003Cp>L’intégration de Sentry dans une SPA React/Redux est simple.\u003C/p>\n\u003Ch3 id=\"setup-basique\">Setup basique\u003C/h3>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#AE81FF\"> *\u003C/span>\u003Cspan style=\"color:#F92672\"> as\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Sentry \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> \"@sentry/react\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">init\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  dsn: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"https://examplePublicKey@o0.ingest.sentry.io/0\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  environment: process.env.NODE_ENV,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  tracesSampleRate: \u003C/span>\u003Cspan style=\"color:#AE81FF\">1.0\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  integrations: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">    new\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">Replay\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      maskAllText: \u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      blockAllMedia: \u003C/span>\u003Cspan style=\"color:#AE81FF\">true\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  ],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#F92672\"> default\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">withProfiler\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(App);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"capturer-les-erreurs-redux\">Capturer les erreurs Redux\u003C/h3>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">captureException\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(error, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  tags: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    section: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'redux'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    action: action.type,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  contexts: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    redux: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      dispatched_action: action,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      previous_state: previousState,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"ajouter-du-contexte-utilisateur\">Ajouter du contexte utilisateur\u003C/h3>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">setUser\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  id: user.id,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  email: user.email,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  organization_id: user.organization,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"erreurs-réseau\">Erreurs réseau\u003C/h3>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">fetch\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">'/api/data'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  .\u003C/span>\u003Cspan style=\"color:#A6E22E\">then\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">r\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> =>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> r.\u003C/span>\u003Cspan style=\"color:#A6E22E\">json\u003C/span>\u003Cspan style=\"color:#F8F8F2\">())\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  .\u003C/span>\u003Cspan style=\"color:#A6E22E\">catch\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">error\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> =>\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">captureException\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(error, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      tags: { type: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'network'\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      contexts: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        api_call: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">          endpoint: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'/api/data'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">          method: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'GET'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  });\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"source-maps-en-production\">Source maps en production\u003C/h3>\n\u003Cp>C’était critique pour avoir des stack traces lisibles. Nous avons configuré le CI/CD pour uploader les source maps à Sentry à chaque déploiement.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\"># Dans le pipeline CI/CD\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">./node_modules/.bin/sentry-cli\u003C/span>\u003Cspan style=\"color:#E6DB74\"> releases\u003C/span>\u003Cspan style=\"color:#AE81FF\"> \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">  -o\u003C/span>\u003Cspan style=\"color:#E6DB74\"> our-org\u003C/span>\u003Cspan style=\"color:#AE81FF\"> \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#AE81FF\">  -p\u003C/span>\u003Cspan style=\"color:#E6DB74\"> our-project\u003C/span>\u003Cspan style=\"color:#AE81FF\"> \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  files\u003C/span>\u003Cspan style=\"color:#E6DB74\"> upload-sourcemaps\u003C/span>\u003Cspan style=\"color:#E6DB74\"> ./dist\u003C/span>\u003Cspan style=\"color:#AE81FF\"> --ignore\u003C/span>\u003Cspan style=\"color:#E6DB74\"> node_modules\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"les-résultats\">Les résultats\u003C/h2>\n\u003Cp>L’adoption de Sentry a été transformationnelle.\u003C/p>\n\u003Ch3 id=\"1-temps-de-debugging-réduit-de-80\">1. Temps de debugging réduit de 80%\u003C/h3>\n\u003Cp>Un bug qui prenait 4 heures à investiguer peut maintenant être compris en 5 minutes.\u003C/p>\n\u003Cp>\u003Cstrong>Exemple réel :\u003C/strong>\u003C/p>\n\u003Cp>Ticket : “App charge lentement parfois”\u003C/p>\n\u003Cp>Sans Sentry : On mettait des console.log un peu partout, recompilait, attendait qu’un client reproduise, puis on regardait les logs.\u003C/p>\n\u003Cp>Avec Sentry : On voit dans les Performance graphs que certaines requests réseau timeout après 30 secondes, et on peut voir la distribution par navigateur, géolocalisation, etc.\u003C/p>\n\u003Ch3 id=\"2-réduction-des-tickets-support\">2. Réduction des tickets support\u003C/h3>\n\u003Cp>Nous avons pu identifier et fixer les 5 bugs les plus courants. Résultat : \u003Cstrong>40% de réduction des tickets de type “page blanche”\u003C/strong> en un mois.\u003C/p>\n\u003Ch3 id=\"3-proactivité-plutôt-que-réactivité\">3. Proactivité plutôt que réactivité\u003C/h3>\n\u003Cp>Au lieu d’attendre les signalements clients, nous repérions les erreurs \u003Cstrong>avant\u003C/strong> que les clients les signalent.\u003C/p>\n\u003Cp>Exemple : Un problème de memory leak sur une certaine version de Chrome qui affectait 2% des utilisateurs. Nous l’avons repéré, fixé, et déployé en 48h sans un seul ticket support.\u003C/p>\n\u003Ch3 id=\"4-amélioration-de-la-relation-client\">4. Amélioration de la relation client\u003C/h3>\n\u003Cp>Nous pouvions répondre aux clients :\u003C/p>\n\u003Cblockquote>\n\u003Cp>“Merci pour le signalement. Nous avons identifié le problème dans nos logs (une issue avec le timeout du chargement des données). Voici la version corrigée qui sera disponible demain.”\u003C/p>\n\u003C/blockquote>\n\u003Cp>Les clients étaient impressionnés par notre réactivité.\u003C/p>\n\u003Ch3 id=\"5-métriques-pour-le-produit\">5. Métriques pour le produit\u003C/h3>\n\u003Cp>Sentry nous donnait des données précieuses :\u003C/p>\n\u003Cul>\n\u003Cli>Quels navigateurs causaient le plus de problèmes ?\u003C/li>\n\u003Cli>À quelle heure du jour les erreurs étaient-elles pics ?\u003C/li>\n\u003Cli>Quels features étaient les plus instables ?\u003C/li>\n\u003C/ul>\n\u003Cp>Ces informations guidaient nos décisions de développement.\u003C/p>\n\u003Ch2 id=\"le-dashboard-sentry-en-pratique\">Le dashboard Sentry en pratique\u003C/h2>\n\u003Cp>Voici ce que notre équipe voyait quotidiennement :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Today's Overview\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── New Issues: 3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── Unresolved Issues: 47\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── Total Events: 2,341\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── Errors: 1,823\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── Transactions: 518\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   └── Replay Sessions: 743\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── Top Issues This Week:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    1. TypeError: Cannot read property 'map' of undefined\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       └── 156 occurrences (-23% from last week) ✓\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    2. NetworkError: Failed to fetch\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       └── 143 occurrences (↑ 15%, needs investigation)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    3. RangeError: Invalid array length\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       └── 98 occurrences (-45%, fixed in release 2.3.0) ✓\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"alerting\">Alerting\u003C/h2>\n\u003Cp>Nous avons configuré des alertes intelligentes :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">Alert 1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"Une nouvelle erreur jamais vue\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  → Alerte immédiate au Slack du team tech\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">Alert 2\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"Une erreur dépasse 100 occurrences en 1 heure\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  → Paging du on-call engineer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">Alert 3\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"Taux d'erreur augmente de 50% par rapport à la baseline\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">  → Investigation automatisée\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"session-replay--le-secret-weapon\">Session Replay : Le secret weapon\u003C/h2>\n\u003Cp>Une des fonctionnalités les plus puissantes de Sentry 3.0+ est la \u003Cstrong>Session Replay\u003C/strong>.\u003C/p>\n\u003Cp>Quand une erreur se produit, Sentry peut enregistrer une vidéo du navigateur (avec les données sensibles masquées).\u003C/p>\n\u003Cp>Exemple :\u003C/p>\n\u003Cblockquote>\n\u003Cp>Utilisateur signale : “Impossible de soumettre le formulaire”\nOn regarde la session replay de Sentry : On voit exactement quels champs ils ont rempli, comment le formulaire a réagi, puis le moment exact du crash.\u003C/p>\n\u003C/blockquote>\n\u003Cp>Cela a sauvé littéralement des dizaines d’heures de debugging.\u003C/p>\n\u003Ch2 id=\"résumé-de-larchitecture\">Résumé de l’architecture\u003C/h2>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>┌──────────────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   Application React      │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   (avec Sentry SDK)      │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└────────────┬─────────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>             │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>             │ Erreurs en temps réel\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>             │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌────────────▼─────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│    Sentry Cloud (SaaS)   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├───────────────────────────┤\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ • Agrégation des erreurs │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ • Déduplication          │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ • Source maps processing │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ • Session Replay         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ • Alerting               │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└────────────┬─────────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>             │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        ┌────┴─────┬─────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        │           │         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   ┌────▼──┐  ┌────▼──┐  ┌───▼────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   │ Slack │  │ Email │  │ Jira   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   │ Alerts│  │ Daily │  │ Issues │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   └───────┘  └───────┘  └────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"les-pièges-à-éviter\">Les pièges à éviter\u003C/h2>\n\u003Ch3 id=\"1-flood-de-mauvaises-erreurs\">1. Flood de mauvaises erreurs\u003C/h3>\n\u003Cp>Sans filtrage, Sentry peut être inondé par :\u003C/p>\n\u003Cul>\n\u003Cli>Des erreurs de plugins navigateur (adblock, Grammarly, etc.)\u003C/li>\n\u003Cli>Des erreurs de code tiers\u003C/li>\n\u003Cli>Des erreurs de développement local\u003C/li>\n\u003C/ul>\n\u003Cp>Solution : Mettre en place des rules d’ignoring :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">init\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  ignoreErrors: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">    // Plugin errors\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'top.GLOBALS'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'chrome-extension://'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'moz-extension://'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">    // Erreurs non pertinentes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E6DB74\">    'SecurityError'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  ],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"2-oublier-les-source-maps\">2. Oublier les source maps\u003C/h3>\n\u003Cp>Sans source maps, vous voyez :\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>TypeError: a.b is undefined\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  at Object.&#x3C;anonymous> (app.min.js:1:145000)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Complètement inutile. Toujours uploader les source maps.\u003C/p>\n\u003Ch3 id=\"3-ne-pas-sampler-les-transactions\">3. Ne pas sampler les transactions\u003C/h3>\n\u003Cp>Si vous enregistrez \u003Cstrong>chaque\u003C/strong> transaction réseau, Sentry explose rapidement. Limiter à 10-20% en production.\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Sentry.\u003C/span>\u003Cspan style=\"color:#A6E22E\">init\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  tracesSampleRate: \u003C/span>\u003Cspan style=\"color:#AE81FF\">0.1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#88846F\">// 10% des transactions\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>Adopter Sentry a été l’une de meilleures décisions que nous ayons prises en tant que team. Cela nous a permis :\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>De voir les vrais problèmes\u003C/strong> plutôt que d’attendre les signalements\u003C/li>\n\u003Cli>\u003Cstrong>De réagir rapidement\u003C/strong> aux incidents\u003C/li>\n\u003Cli>\u003Cstrong>D’améliorer la relation client\u003C/strong> avec une support proactive\u003C/li>\n\u003Cli>\u003Cstrong>De prioriser intelligemment\u003C/strong> les bugfixes\u003C/li>\n\u003C/ul>\n\u003Cp>En tant qu’architect, c’était ma responsabilité de pousser pour cette visibilité. Aujourd’hui, je ne peux pas imaginer développer une SPA sans un système de monitoring d’erreurs.\u003C/p>\n\u003Cp>Si vous êtes encore en train de débugger via les tickets de support, je vous supplie d’essayer Sentry. Vous ne regarderez plus jamais votre SPA de la même manière.\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Ressources :\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://docs.sentry.io/\">Sentry Documentation\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://docs.sentry.io/platforms/javascript/guides/react/\">React Integration Guide\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://docs.sentry.io/product/error-monitoring/\">Error Handling Best Practices\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1444,"localImagePaths":1536,"remoteImagePaths":1537,"frontmatter":1538,"imagePaths":1542},[1445,1448,1451,1454,1457,1460,1463,1466,1469,1472,1475,1478,1481,1484,1487,1490,1493,1496,1499,1502,1505,1508,1511,1514,1517,1520,1523,1526,1529,1532,1535],{"depth":449,"slug":1446,"text":1447},"le-problème--laveuglement-des-spa","Le problème : L’aveuglement des SPA",{"depth":1018,"slug":1449,"text":1450},"les-tickets-mystérieux","Les tickets mystérieux",{"depth":1018,"slug":1452,"text":1453},"limpact-sur-lexpérience-client","L’impact sur l’expérience client",{"depth":1018,"slug":1455,"text":1456},"les-défis-spécifiques-des-spa","Les défis spécifiques des SPA",{"depth":449,"slug":1458,"text":1459},"la-quête-dune-solution","La quête d’une solution",{"depth":449,"slug":1461,"text":1462},"convaincre-lentreprise","Convaincre l’entreprise",{"depth":1018,"slug":1464,"text":1465},"1-le-coût-humain","1. Le coût humain",{"depth":1018,"slug":1467,"text":1468},"2-la-relation-client","2. La relation client",{"depth":1018,"slug":1470,"text":1471},"3-les-métriques","3. Les métriques",{"depth":1018,"slug":1473,"text":1474},"4-la-démo-en-live","4. La démo en live",{"depth":449,"slug":1476,"text":1477},"limplémentation","L’implémentation",{"depth":1018,"slug":1479,"text":1480},"setup-basique","Setup basique",{"depth":1018,"slug":1482,"text":1483},"capturer-les-erreurs-redux","Capturer les erreurs Redux",{"depth":1018,"slug":1485,"text":1486},"ajouter-du-contexte-utilisateur","Ajouter du contexte utilisateur",{"depth":1018,"slug":1488,"text":1489},"erreurs-réseau","Erreurs réseau",{"depth":1018,"slug":1491,"text":1492},"source-maps-en-production","Source maps en production",{"depth":449,"slug":1494,"text":1495},"les-résultats","Les résultats",{"depth":1018,"slug":1497,"text":1498},"1-temps-de-debugging-réduit-de-80","1. Temps de debugging réduit de 80%",{"depth":1018,"slug":1500,"text":1501},"2-réduction-des-tickets-support","2. Réduction des tickets support",{"depth":1018,"slug":1503,"text":1504},"3-proactivité-plutôt-que-réactivité","3. Proactivité plutôt que réactivité",{"depth":1018,"slug":1506,"text":1507},"4-amélioration-de-la-relation-client","4. Amélioration de la relation client",{"depth":1018,"slug":1509,"text":1510},"5-métriques-pour-le-produit","5. Métriques pour le produit",{"depth":449,"slug":1512,"text":1513},"le-dashboard-sentry-en-pratique","Le dashboard Sentry en pratique",{"depth":449,"slug":1515,"text":1516},"alerting","Alerting",{"depth":449,"slug":1518,"text":1519},"session-replay--le-secret-weapon","Session Replay : Le secret weapon",{"depth":449,"slug":1521,"text":1522},"résumé-de-larchitecture","Résumé de l’architecture",{"depth":449,"slug":1524,"text":1525},"les-pièges-à-éviter","Les pièges à éviter",{"depth":1018,"slug":1527,"text":1528},"1-flood-de-mauvaises-erreurs","1. Flood de mauvaises erreurs",{"depth":1018,"slug":1530,"text":1531},"2-oublier-les-source-maps","2. Oublier les source maps",{"depth":1018,"slug":1533,"text":1534},"3-ne-pas-sampler-les-transactions","3. Ne pas sampler les transactions",{"depth":449,"slug":459,"text":460},[],[],{"title":1431,"categories":1539,"tags":1540,"date":1541},[696],[975,1061,1435,1436,1437],["Date","2019-10-10T00:00:00.000Z"],[],"2019-10-10-sentry.md","2022-11-12-design-system",{"id":1544,"data":1546,"body":1553,"filePath":1554,"digest":1555,"rendered":1556,"legacyId":1655},{"title":1547,"date":1548,"categories":1549,"tags":1550,"lang":17},"The Rise and Fall (and Rebuild) of Talend/UI: Lessons from a Design System Gone Wrong",["Date","2022-11-12T00:00:00.000Z"],[17],[975,1551,1552,1060,1363],"TypeScript","Design System","Five years ago, Talend decided to build a design system. Codename: \"Coral\". Public repository: Talend/UI. It was supposed to unify the experience across all products, eliminate inconsistencies, and make development faster. \n\nWhat happened instead was a cautionary tale about technology choices, adoption, and the cost of betting on unstable libraries. And somehow, I ended up owning the wreckage.\n\n## The Initial Excitement (and My Skepticism)\n\nWhen the design system initiative was announced, I was... conflicted.\n\nOn one hand: **YES.** We needed consistency. Every product at Talend looked slightly different. The user experience was a mess. A centralized design system sounded perfect.\n\nOn the other hand: **ARE YOU KIDDING?** We already had Bootstrap. We had CSS. Why would we recreate a button?\n\nI was **blind**. Willfully blind.\n\n## The Bootstrap Problem Nobody Talks About\n\nThis is what I didn't understand at the time: **Bootstrap was killing us.**\n\nIt's not that Bootstrap is bad. Bootstrap 3 was great when it came out in 2012. But by 2018, it had become a technology graveyard.\n\n**The problems we faced:**\n\n1. **Global CSS is unmaintainable** : Every Talend product had Bootstrap. But every product had also added its own CSS overrides. Tons of them. Trying to upgrade Bootstrap meant auditing 50+ CSS files to see what would break.\n\n2. **Customization is a nightmare** : Want to change the button color globally? Good luck. Bootstrap's variables were top-level, so you'd have to recompile everything. And if someone had added a CSS rule targeting `.btn`, recompiling wouldn't help.\n\n3. **No real versioning** : Bootstrap was a global dependency. If Product A needed Button v1 and Product B needed Button v2, you were out of luck. They shared the same styles.\n\n4. **CSS specificity wars** : Each product tried to override Bootstrap in different ways. Some used `!important`. Some added wrapper classes. Some added inline styles. It was chaos.\n\n5. **Consistency was impossible** : The button in Product A looked different from the button in Product B. Not intentionally. Just because each team had tweaked Bootstrap differently.\n\nI remember spending an entire day trying to figure out why a button in one product had different padding. The answer? Someone had added a `.btn { padding: 12px !important; }` in one of six CSS files. Finding it took forever.\n\n**This is what Bootstrap looks like at scale.** It's not the framework's fault. It's the inevitable result of treating global styles as a free good.\n\n## The Designer Problem: Adoption from the Design Side\n\nHere's something nobody talks about in design system articles: **designers have the exact same adoption problem as developers.**\n\nWhen the design system team proposed Coral, they were excited. They had created beautiful, modern, accessible components in Figma. They had done extensive user research. They had created design guidelines. Everything was perfect.\n\nThen they tried to get designers from other products to use the design system.\n\n**What happened?** Nothing. Or worse, adoption was slower than molasses.\n\n**Why?**\n\n1. **Senior designers resisted change** : Some of the most experienced designers at Talend had built their own design patterns over years. They had a vision. Asking them to use someone else's components felt like losing creative control. \"This button is nice, but our product needed something different,\" they'd say.\n\n2. **\"But our users expect it to look this way\"** : Just like developers with Bootstrap, designers had trained their users on specific UI patterns. A new design system meant re-educating users. That's scary.\n\n3. **Design tokens were abstract** : We kept talking about \"design tokens\" and \"system thinking.\" But to a designer working on a specific product, it felt like corporate constraints. \"I need this color to be #FF5733, not your #FF5722.\"\n\n4. **No single source of truth between design and code** : Designers would create in Figma. Developers would implement in React. They'd drift. Designers would complain. Developers would say \"that's not what you designed.\" Both were right.\n\n5. **Lack of designer involvement** : The first Coral team was mostly developers. There wasn't enough designer voice in the early decisions. This led to beautiful components that didn't match how designers actually wanted to work.\n\n6. **Customization felt impossible** : A senior designer at one of our biggest products asked: \"Can I use these components but customize the spacing?\" The answer was basically \"no.\" So they didn't use it.\n\nThe lesson? **Design systems fail not because of code. They fail because people (both designers and developers) feel constrained.**\n\nA good design system needs:\n- **Flexibility, not rigidity** : Allow customization at the edges\n- **Designer buy-in, not just developer buy-in** : Involve senior designers from day one\n- **Clear documentation of the \"why\"** : Not just rules, but reasoning\n- **Opt-in adoption, not mandate** : Let teams choose to switch, don't force them\n- **Regular user research** : Talk to both designers and developers using the system\n\nWhat I should have done: involved senior designers as co-architects, not just stakeholders. Their resistance wasn't obstinacy. It was expertise. They saw problems the younger team didn't.\n\n## Design Tokens: The Secret Weapon\n\nHere's the thing that actually works: **Design Tokens.**\n\nDesign tokens are the single biggest win of the Coral project. They're understated, boring, but incredibly powerful.\n\nA design token is simply: **a named value representing a design decision.**\n\nInstead of:\n\n```css\n/* BAD: Magic colors scattered everywhere */\nbutton {\n  background-color: #007BFF;\n  color: white;\n  padding: 10px 20px;\n  border-radius: 4px;\n}\n\n.button-danger {\n  background-color: #DC3545;\n}\n\n.button-success {\n  background-color: #28A745;\n}\n```\n\nYou have:\n\n```json\n{\n  \"color\": {\n    \"primary\": {\n      \"value\": \"#007BFF\"\n    },\n    \"danger\": {\n      \"value\": \"#DC3545\"\n    },\n    \"success\": {\n      \"value\": \"#28A745\"\n    }\n  },\n  \"spacing\": {\n    \"xs\": { \"value\": \"4px\" },\n    \"sm\": { \"value\": \"8px\" },\n    \"md\": { \"value\": \"12px\" },\n    \"lg\": { \"value\": \"16px\" }\n  }\n}\n```\n\nThen your component becomes:\n\n```typescript\nimport tokens from '@talend/tokens';\n\nconst buttonStyles = {\n  backgroundColor: tokens.color.primary.value,\n  color: '#FFF',\n  padding: `${tokens.spacing.md.value} ${tokens.spacing.lg.value}`,\n  borderRadius: tokens.spacing.xs.value,\n};\n```\n\n**Why is this so powerful?**\n\n### 1. Design and Code Speak the Same Language\n\nDesigners work with the same token names as developers:\n\n**In Figma:**\n```\nFill: color/primary\nPadding: spacing/lg\n```\n\n**In Code:**\n```typescript\nbackgroundColor: tokens.color.primary.value\npadding: tokens.spacing.lg.value\n```\n\nNo translation layer. No confusion. Designers specify \"color/primary\" and developers use \"color/primary.\"\n\n### 2. Theming Becomes Trivial\n\nWant a dark mode? Create a new token file:\n\n```json\n// tokens-light.json\n{ \"color\": { \"primary\": \"#007BFF\" } }\n\n// tokens-dark.json\n{ \"color\": { \"primary\": \"#0099FF\" } }\n```\n\nThen switch:\n\n```typescript\nimport tokens from process.env.THEME === 'dark' \n  ? '@talend/tokens-dark'\n  : '@talend/tokens-light';\n```\n\nNo component code changes. At all.\n\n### 3. Global Updates Become Real\n\nWhen your CEO says \"change all buttons to red,\" instead of:\n\n1. Edit Figma (10 components)\n2. Alert all designers (email)\n3. Developers update each component (5 files)\n4. Test 20 products (days)\n5. Deploy (days)\n\nYou do:\n\n1. Change one token file: `color.primary: #FF0000`\n2. Deploy token package\n3. All products automatically use the new color\n\n### 4. Maintainability Explodes\n\nWith tokens, the source of truth is **one file per category**:\n\n```\ntokens/\n├── color.json\n├── spacing.json\n├── typography.json\n├── shadow.json\n└── border-radius.json\n```\n\nNot scattered through 100 CSS files. Not duplicated. Not magical.\n\n### 5. Scalability for Multiple Products\n\nAt Talend, we have 10+ products. Before tokens:\n\n- Product A uses `--color-primary: #007BFF`\n- Product B uses `--primary-color: #007BFF`\n- Product C uses `primaryColor = 0x007BFF`\n\nAll the same color. Three different names. Impossible to sync.\n\nWith tokens, **all products use the same token file.** Done.\n\n### 6. Tokens Enable Micro-Customization\n\nA product wants to use your design system but needs slightly different spacing? Instead of forking the entire system:\n\n```json\n{\n  \"extends\": \"@talend/tokens\",\n  \"spacing\": {\n    \"md\": { \"value\": \"14px\" }  // Override just this\n  }\n}\n```\n\nClean. Simple. Mergeable.\n\n### 7. Design Token Tools Exist Now\n\nIn 2024, there are amazing tools for managing tokens:\n\n- **Figma Tokens** : Design tokens directly in Figma, sync to code\n- **Tokens Studio** : Token management with version control\n- **Style Dictionary** : Transform tokens to any format (CSS, JS, JSON, etc.)\n- **Specify** : Cloud-based token management\n\nWe could have used these from day one. We didn't. Mistake.\n\n## How Design Tokens Should Have Worked at Coral\n\nHere's what I'd do if I could rewind:\n\n**Year 1:**\n1. Create tokens file: colors, spacing, typography, shadows\n2. Publish as a package: `@talend/tokens`\n3. Use Figma Tokens plugin to keep Figma and JSON in sync\n4. Designers and developers use the same token names\n5. Zero components yet. Just tokens.\n\n**Year 2:**\n1. Build first 5 components using the tokens\n2. Token file becomes the single source of truth\n3. Any product can customize by extending the tokens\n4. Publish both light and dark token sets\n\n**Year 3:**\n1. Add more components\n2. Token system is stable and proven\n3. Adoption happens naturally because tokens work\n\nWhat actually happened:\n\n**Year 1:**\n- Build 50 components immediately\n- Hard-code colors everywhere\n- Designers ignore the token layer\n- Developers confused about what to override\n\n**Year 2:**\n- Try to retrofit tokens into existing components\n- It's messy. It's complicated.\n- Nobody agrees on token names\n- Adoption is still low\n\nTokens should have been the foundation. Everything else builds on top.\n\n## The Token Lesson\n\nHere's the real insight: **Design systems are really about creating a shared vocabulary.**\n\nDesign tokens are that vocabulary. They're boring. They're simple. They're not exciting.\n\nBut they work.\n\nSenior designers didn't resist tokens. They resisted 50 pre-built components they didn't choose. They resisted losing creative control.\n\nBut tokens? Tokens let designers and developers collaborate. They make theming easy. They make updates global.\n\nIf Coral had been \"design tokens + whatever components you need,\" it would have been adopted immediately.\n\nInstead, it was \"here are 50 components, use them all or nothing.\"\n\nBig difference.\n\n## Enter Coral: The Design System\n\nSo the design system team proposed a solution. Their proposal:\n\n- **TypeScript** - Good, type safety for components\n- **Styled Components** - For scoped CSS\n- **React Aria** - For accessibility (but in alpha)\n- **React** - For the component framework\n\nAs an architect, I was... hesitant.\n\nNot because the tech was bad. But because:\n\n1. **React Aria was in alpha** : We were betting on a library that wasn't stable\n2. **Styled Components adds bundle size** : Shipping a CSS-in-JS library with every component\n3. **Uncontrolled patterns only** : The first versions only supported uncontrolled components (`\u003Cinput defaultValue=\"...\" />`). React best practices call for controlled components (`\u003Cinput value={...} onChange={...} />`).\n4. **Button size was different** : The new design system button was a different size than the Bootstrap button. Good design, sure. But **adoption suicide.**\n\nBut you know what? The team had conviction. They were excited. They had a vision. And that matters.\n\nSo we got on board. We built the infrastructure. We created a CDN for distribution (remember the Yarn article? That was part of this effort). We committed to the push.\n\n## Two Years of... Not Much\n\nWhat happened next was frustrating.\n\nThe design system team spent two years building components, refining APIs, and pushing for adoption.\n\nThe adoption... didn't happen.\n\n**Why?**\n\n1. **The button looked different** : Product teams had trained their users on the current button. Switching meant a breaking change to the user experience. \"Is the button still clickable?\" customers would ask. Silly? Yes. Real? Also yes.\n\n2. **Uncontrolled pattern limitation** : Developers wanted to write:\n```javascript\nconst [value, setValue] = useState('');\n\u003CInput value={value} onChange={(e) => setValue(e.target.value)} />\n```\n\nBut Coral only offered:\n```javascript\n\u003CInput defaultValue='' />\n```\n\nUncontrolled components are simpler but less flexible. Most React developers had moved to controlled components because they're more powerful.\n\n3. **React Aria concerns** : React Aria was (and still is) a heavy library. Developers worried about bundle size. They worried about stability. The accessibility was great, but at what cost?\n\n4. **The design system looked... corporate** : And that's fine! But some teams wanted customization that Coral's strict design didn't allow.\n\nSo most teams continued using Bootstrap. Some started the migration. Many created workarounds.\n\nThe design system existed, but as a **library without adoption**. A solution without a problem.\n\n## The Crisis: The Entire Team Left\n\nThen came 2024. The entire design system team left Talend.\n\nAll of them. Gone.\n\nAnd guess who became the owner of Talend/UI?\n\nMe.\n\nI inherited:\n- A React component library using styled-components and React Aria\n- A build infrastructure worth maintaining\n- Zero dedicated resources\n- Hundreds of thousands of lines of code\n\nOh, and **a legacy of low adoption.**\n\n## The Audit: What Do We Actually Need?\n\nOnce I owned the system, I had to ask hard questions:\n\n1. **What's actually being used?** : By looking at npm download stats and internal metrics, I found that only 30% of the components were actively used. Some components had zero downloads.\n\n2. **What's our real problem?** : It wasn't \"lack of a design system.\" It was \"legacy Bootstrap is killing us, but we can't all migrate together.\"\n\n3. **What should the solution be?** : A lightweight, stable, HTML-centric component library. Not another Figma-to-code pipeline. Just components that work.\n\n## The Realization: UI Libraries Are Unstable\n\nThis is the biggest lesson I learned:\n\n**You should not build products on top of unstable UI libraries.**\n\nHere's why:\n\n1. **Libraries evolve, your code doesn't** : React Aria changes its API. Styled-components changes how it handles SSR. Your code has to adapt or break.\n\n2. **Dependencies become liabilities** : React Aria depends on 5 other libraries. Styled-components depends on 3. If any of those breaks, your design system breaks. And every product depending on your design system breaks.\n\n3. **Bundle size compounds** : You add React Aria (+30KB). You add styled-components (+15KB). You add date-picker library (+40KB). Suddenly your button component is 85KB.\n\n4. **Maintenance burden grows** : When React Aria releases a breaking change, you have to update it. When styled-components fixes a bug, you need to test it. You become a coordinator, not a builder.\n\n5. **You lose control** : The library maintainers own your component behavior. If they decide to deprecate something, you have to follow.\n\n## The New Direction: Own the HTML\n\nSo here's what I'm doing now:\n\n**Remove React Aria. Remove styled-components. Use native HTML.**\n\nInstead:\n\n```typescript\n// Old approach (Coral v1)\nimport { Button } from '@talend/components';\nimport styled from 'styled-components';\n\nexport function MyButton() {\n  return \u003CButton variant=\"primary\" />;\n}\n\n// New approach (Coral v2)\nimport { Button } from '@talend/components';\n\nexport function MyButton() {\n  return \u003CButton className=\"primary\" />;\n}\n```\n\nThe new components are:\n\n- **TypeScript for type safety** - Good\n- **CSS Modules for scoping** - Simple and stable\n- **Plain React for interactivity** - No synthetic complications\n- **HTML semantics first** - `\u003Cbutton>`, `\u003Cinput>`, `\u003Cform>`, etc.\n- **Optional: Radix UI or Headless UI for the really complex stuff** - But only when we REALLY need it\n\n**Why this works:**\n\n1. **HTML is stable** : The `\u003Cbutton>` element will work the same way in 10 years\n2. **CSS Modules are simple** : No black magic, just CSS with local scope\n3. **Less dependencies** : Fewer things can break\n4. **Smaller bundle** : We're not shipping extra libraries\n5. **Easy to maintain** : You can see exactly what the button does by reading the code\n6. **Developer friendly** : React developers understand `\u003Cbutton>` immediately\n\n## The Migration Plan\n\nNow I'm planning a migration from Coral v1 (styled-components + React Aria) to Coral v2 (TypeScript + CSS Modules + HTML).\n\nHere's my strategy:\n\n1. **Start with the most-used components** : Button, Input, Select, Modal\n2. **Build v2 alongside v1** : No breaking changes yet\n3. **Migrate product teams gradually** : They choose when to switch\n4. **Deprecate v1 slowly** : Give teams time to adapt\n5. **Document the hell out of it** : Make migration easy\n\nThis will take time. But it's the right approach.\n\n## The Lessons\n\nHere's what I learned from this entire journey:\n\n### 1. Bootstrap isn't the problem; global CSS is\n\nThe mistake wasn't using Bootstrap. The mistake was using global CSS at scale. Any framework would have the same problem.\n\n### 2. Don't bet on alpha libraries for production\n\nReact Aria is great. But building a design system on an alpha library was risky. We should have waited for stability.\n\n### 3. Adoption is harder than tech\n\nThe best design system in the world won't be adopted if it breaks the user experience. A 30% larger button is not a \"design improvement.\" It's a breaking change.\n\n### 4. Uncontrolled patterns are a limiting pattern\n\nControlled components are the React default for good reasons. Building a design system that doesn't support them is a losing bet.\n\n### 5. Bundle size matters\n\nEach library adds cost. styled-components + React Aria sounds like \"just two libraries.\" But each pulls in more dependencies. Before you know it, your button is 100KB.\n\n### 6. Fewer dependencies = less maintenance\n\nThis is the big one. **UI libraries are not stable enough to be used in products. You should build your own and own the entire HTML rendering.**\n\nUse a library when you REALLY need one. Not because it sounds cool or makes the code \"cleaner.\"\n\nFor Talend/UI v2, I'm building 95% in-house HTML. The remaining 5% will use Radix UI or Headless UI for extremely complex components (like the autocomplete with virtualization).\n\nBut the button? That's ours. The input? Ours. The modal? Ours.\n\nWe own the HTML. We own the behavior. We own the future.\n\n## What I'd Do Differently\n\nIf I could go back in time and advise the 2018 design system team:\n\n1. **Start smaller** : One product, one button, solve the real problem\n2. **Own the HTML** : Build components with plain React + CSS Modules from day one\n3. **Focus on adoption** : Make the new button exactly match the old one initially, then iterate\n4. **Use libraries strategically** : Only for things we can't build (like date picker with virtualization)\n5. **Build incrementally** : Bootstrap → Coral v0 (same look) → Coral v1 (new look with opt-in) → Full migration\n6. **Measure adoption** : Make adoption easy to measure and a team KPI\n\n## Where We Are Now\n\nIt's 2022. I'm maintaining Talend/UI.\n\nThe new v2 is simpler, faster, and more maintainable.\n\nThe bundle size will going down as adoption increase.\n\nThe code is easier to read.\n\nAnd most importantly: **we own our UI layer**. That ownership is worth every day I spend rebuilding this.\n\n## Conclusion\n\nDesign systems are hard. Really hard.\n\nThe hardest part isn't the technology. It's the adoption. It's making decisions that balance innovation with backward compatibility. It's owning the consequences of those decisions.\n\nCoral wasn't a failure. It was a learning experience. And sometimes, the best design system is the one you build incrementally, starting small, with a deep commitment to owning your own code.\n\nIf you're building a design system, here's my advice:\n\n- **Own the HTML**. Don't bet on unstable libraries.\n- **Focus on adoption**. Tech is easy; people are hard.\n- **Start small**. One component, get it right, then scale.\n- **Measure everything**. You can't improve what you don't measure.\n- **Be willing to rewrite**. If it's not working, the cost of starting over is usually less than the cost of pushing forward.\n\nAnd if you inherit a design system that's struggling? It's okay to rebuild. Sometimes the best path forward is to acknowledge that the previous approach didn't work and start fresh with what you've learned.\n\n---\n\n**Talend/UI Resources:**\n- [Talend/UI on GitHub](https://github.com/Talend/ui)\n- [Design System Lessons from Airbnb](https://www.designsystems.com/case-study-airbnb/)\n- [Building a design system: the practical guide](https://www.designsystems.com/)","src/content/posts/2022-11-12-design-system.md","6f5960f03d8f26c9",{"html":1557,"metadata":1558},"\u003Cp>Five years ago, Talend decided to build a design system. Codename: “Coral”. Public repository: Talend/UI. It was supposed to unify the experience across all products, eliminate inconsistencies, and make development faster.\u003C/p>\n\u003Cp>What happened instead was a cautionary tale about technology choices, adoption, and the cost of betting on unstable libraries. And somehow, I ended up owning the wreckage.\u003C/p>\n\u003Ch2 id=\"the-initial-excitement-and-my-skepticism\">The Initial Excitement (and My Skepticism)\u003C/h2>\n\u003Cp>When the design system initiative was announced, I was… conflicted.\u003C/p>\n\u003Cp>On one hand: \u003Cstrong>YES.\u003C/strong> We needed consistency. Every product at Talend looked slightly different. The user experience was a mess. A centralized design system sounded perfect.\u003C/p>\n\u003Cp>On the other hand: \u003Cstrong>ARE YOU KIDDING?\u003C/strong> We already had Bootstrap. We had CSS. Why would we recreate a button?\u003C/p>\n\u003Cp>I was \u003Cstrong>blind\u003C/strong>. Willfully blind.\u003C/p>\n\u003Ch2 id=\"the-bootstrap-problem-nobody-talks-about\">The Bootstrap Problem Nobody Talks About\u003C/h2>\n\u003Cp>This is what I didn’t understand at the time: \u003Cstrong>Bootstrap was killing us.\u003C/strong>\u003C/p>\n\u003Cp>It’s not that Bootstrap is bad. Bootstrap 3 was great when it came out in 2012. But by 2018, it had become a technology graveyard.\u003C/p>\n\u003Cp>\u003Cstrong>The problems we faced:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>Global CSS is unmaintainable\u003C/strong> : Every Talend product had Bootstrap. But every product had also added its own CSS overrides. Tons of them. Trying to upgrade Bootstrap meant auditing 50+ CSS files to see what would break.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Customization is a nightmare\u003C/strong> : Want to change the button color globally? Good luck. Bootstrap’s variables were top-level, so you’d have to recompile everything. And if someone had added a CSS rule targeting \u003Ccode>.btn\u003C/code>, recompiling wouldn’t help.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>No real versioning\u003C/strong> : Bootstrap was a global dependency. If Product A needed Button v1 and Product B needed Button v2, you were out of luck. They shared the same styles.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>CSS specificity wars\u003C/strong> : Each product tried to override Bootstrap in different ways. Some used \u003Ccode>!important\u003C/code>. Some added wrapper classes. Some added inline styles. It was chaos.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Consistency was impossible\u003C/strong> : The button in Product A looked different from the button in Product B. Not intentionally. Just because each team had tweaked Bootstrap differently.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Cp>I remember spending an entire day trying to figure out why a button in one product had different padding. The answer? Someone had added a \u003Ccode>.btn { padding: 12px !important; }\u003C/code> in one of six CSS files. Finding it took forever.\u003C/p>\n\u003Cp>\u003Cstrong>This is what Bootstrap looks like at scale.\u003C/strong> It’s not the framework’s fault. It’s the inevitable result of treating global styles as a free good.\u003C/p>\n\u003Ch2 id=\"the-designer-problem-adoption-from-the-design-side\">The Designer Problem: Adoption from the Design Side\u003C/h2>\n\u003Cp>Here’s something nobody talks about in design system articles: \u003Cstrong>designers have the exact same adoption problem as developers.\u003C/strong>\u003C/p>\n\u003Cp>When the design system team proposed Coral, they were excited. They had created beautiful, modern, accessible components in Figma. They had done extensive user research. They had created design guidelines. Everything was perfect.\u003C/p>\n\u003Cp>Then they tried to get designers from other products to use the design system.\u003C/p>\n\u003Cp>\u003Cstrong>What happened?\u003C/strong> Nothing. Or worse, adoption was slower than molasses.\u003C/p>\n\u003Cp>\u003Cstrong>Why?\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>Senior designers resisted change\u003C/strong> : Some of the most experienced designers at Talend had built their own design patterns over years. They had a vision. Asking them to use someone else’s components felt like losing creative control. “This button is nice, but our product needed something different,” they’d say.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>“But our users expect it to look this way”\u003C/strong> : Just like developers with Bootstrap, designers had trained their users on specific UI patterns. A new design system meant re-educating users. That’s scary.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Design tokens were abstract\u003C/strong> : We kept talking about “design tokens” and “system thinking.” But to a designer working on a specific product, it felt like corporate constraints. “I need this color to be #FF5733, not your #FF5722.”\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>No single source of truth between design and code\u003C/strong> : Designers would create in Figma. Developers would implement in React. They’d drift. Designers would complain. Developers would say “that’s not what you designed.” Both were right.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Lack of designer involvement\u003C/strong> : The first Coral team was mostly developers. There wasn’t enough designer voice in the early decisions. This led to beautiful components that didn’t match how designers actually wanted to work.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Customization felt impossible\u003C/strong> : A senior designer at one of our biggest products asked: “Can I use these components but customize the spacing?” The answer was basically “no.” So they didn’t use it.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Cp>The lesson? \u003Cstrong>Design systems fail not because of code. They fail because people (both designers and developers) feel constrained.\u003C/strong>\u003C/p>\n\u003Cp>A good design system needs:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Flexibility, not rigidity\u003C/strong> : Allow customization at the edges\u003C/li>\n\u003Cli>\u003Cstrong>Designer buy-in, not just developer buy-in\u003C/strong> : Involve senior designers from day one\u003C/li>\n\u003Cli>\u003Cstrong>Clear documentation of the “why”\u003C/strong> : Not just rules, but reasoning\u003C/li>\n\u003Cli>\u003Cstrong>Opt-in adoption, not mandate\u003C/strong> : Let teams choose to switch, don’t force them\u003C/li>\n\u003Cli>\u003Cstrong>Regular user research\u003C/strong> : Talk to both designers and developers using the system\u003C/li>\n\u003C/ul>\n\u003Cp>What I should have done: involved senior designers as co-architects, not just stakeholders. Their resistance wasn’t obstinacy. It was expertise. They saw problems the younger team didn’t.\u003C/p>\n\u003Ch2 id=\"design-tokens-the-secret-weapon\">Design Tokens: The Secret Weapon\u003C/h2>\n\u003Cp>Here’s the thing that actually works: \u003Cstrong>Design Tokens.\u003C/strong>\u003C/p>\n\u003Cp>Design tokens are the single biggest win of the Coral project. They’re understated, boring, but incredibly powerful.\u003C/p>\n\u003Cp>A design token is simply: \u003Cstrong>a named value representing a design decision.\u003C/strong>\u003C/p>\n\u003Cp>Instead of:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"css\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">/* BAD: Magic colors scattered everywhere */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">button\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  background-color\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">#007BFF\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  color\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">white\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  padding\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">10\u003C/span>\u003Cspan style=\"color:#F92672\">px\u003C/span>\u003Cspan style=\"color:#AE81FF\"> 20\u003C/span>\u003Cspan style=\"color:#F92672\">px\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  border-radius\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">4\u003C/span>\u003Cspan style=\"color:#F92672\">px\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">.button-danger\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  background-color\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">#DC3545\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">.button-success\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  background-color\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">#28A745\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>You have:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"color\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"primary\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      \"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"#007BFF\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"danger\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      \"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"#DC3545\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"success\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">      \"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"#28A745\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"spacing\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"xs\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"4px\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"sm\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"8px\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"md\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"12px\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"lg\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"16px\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Then your component becomes:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> tokens \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/tokens'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> buttonStyles \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  backgroundColor: tokens.color.primary.value,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  color: \u003C/span>\u003Cspan style=\"color:#E6DB74\">'#FFF'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  padding: \u003C/span>\u003Cspan style=\"color:#E6DB74\">`\u003C/span>\u003Cspan style=\"color:#F92672\">${\u003C/span>\u003Cspan style=\"color:#F8F8F2\">tokens.spacing.md.value\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F92672\"> ${\u003C/span>\u003Cspan style=\"color:#F8F8F2\">tokens.spacing.lg.value\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#E6DB74\">`\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  borderRadius: tokens.spacing.xs.value,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>Why is this so powerful?\u003C/strong>\u003C/p>\n\u003Ch3 id=\"1-design-and-code-speak-the-same-language\">1. Design and Code Speak the Same Language\u003C/h3>\n\u003Cp>Designers work with the same token names as developers:\u003C/p>\n\u003Cp>\u003Cstrong>In Figma:\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Fill: color/primary\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Padding: spacing/lg\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>In Code:\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">backgroundColor: tokens.color.primary.value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">padding: tokens.spacing.lg.value\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>No translation layer. No confusion. Designers specify “color/primary” and developers use “color/primary.”\u003C/p>\n\u003Ch3 id=\"2-theming-becomes-trivial\">2. Theming Becomes Trivial\u003C/h3>\n\u003Cp>Want a dark mode? Create a new token file:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// tokens-light.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{ \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"color\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"primary\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"#007BFF\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> } }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// tokens-dark.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{ \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"color\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"primary\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"#0099FF\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> } }\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Then switch:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> tokens \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> process.env.THEME === \u003C/span>\u003Cspan style=\"color:#E6DB74\">'dark'\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  ?\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/tokens-dark'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  :\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/tokens-light'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>No component code changes. At all.\u003C/p>\n\u003Ch3 id=\"3-global-updates-become-real\">3. Global Updates Become Real\u003C/h3>\n\u003Cp>When your CEO says “change all buttons to red,” instead of:\u003C/p>\n\u003Col>\n\u003Cli>Edit Figma (10 components)\u003C/li>\n\u003Cli>Alert all designers (email)\u003C/li>\n\u003Cli>Developers update each component (5 files)\u003C/li>\n\u003Cli>Test 20 products (days)\u003C/li>\n\u003Cli>Deploy (days)\u003C/li>\n\u003C/ol>\n\u003Cp>You do:\u003C/p>\n\u003Col>\n\u003Cli>Change one token file: \u003Ccode>color.primary: #FF0000\u003C/code>\u003C/li>\n\u003Cli>Deploy token package\u003C/li>\n\u003Cli>All products automatically use the new color\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"4-maintainability-explodes\">4. Maintainability Explodes\u003C/h3>\n\u003Cp>With tokens, the source of truth is \u003Cstrong>one file per category\u003C/strong>:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>tokens/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── color.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── spacing.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── typography.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── shadow.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── border-radius.json\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Not scattered through 100 CSS files. Not duplicated. Not magical.\u003C/p>\n\u003Ch3 id=\"5-scalability-for-multiple-products\">5. Scalability for Multiple Products\u003C/h3>\n\u003Cp>At Talend, we have 10+ products. Before tokens:\u003C/p>\n\u003Cul>\n\u003Cli>Product A uses \u003Ccode>--color-primary: #007BFF\u003C/code>\u003C/li>\n\u003Cli>Product B uses \u003Ccode>--primary-color: #007BFF\u003C/code>\u003C/li>\n\u003Cli>Product C uses \u003Ccode>primaryColor = 0x007BFF\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Cp>All the same color. Three different names. Impossible to sync.\u003C/p>\n\u003Cp>With tokens, \u003Cstrong>all products use the same token file.\u003C/strong> Done.\u003C/p>\n\u003Ch3 id=\"6-tokens-enable-micro-customization\">6. Tokens Enable Micro-Customization\u003C/h3>\n\u003Cp>A product wants to use your design system but needs slightly different spacing? Instead of forking the entire system:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"extends\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"@talend/tokens\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">  \"spacing\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">    \"md\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">\"value\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#CFCFC2\">\"14px\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }  \u003C/span>\u003Cspan style=\"color:#88846F\">// Override just this\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Clean. Simple. Mergeable.\u003C/p>\n\u003Ch3 id=\"7-design-token-tools-exist-now\">7. Design Token Tools Exist Now\u003C/h3>\n\u003Cp>In 2024, there are amazing tools for managing tokens:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Figma Tokens\u003C/strong> : Design tokens directly in Figma, sync to code\u003C/li>\n\u003Cli>\u003Cstrong>Tokens Studio\u003C/strong> : Token management with version control\u003C/li>\n\u003Cli>\u003Cstrong>Style Dictionary\u003C/strong> : Transform tokens to any format (CSS, JS, JSON, etc.)\u003C/li>\n\u003Cli>\u003Cstrong>Specify\u003C/strong> : Cloud-based token management\u003C/li>\n\u003C/ul>\n\u003Cp>We could have used these from day one. We didn’t. Mistake.\u003C/p>\n\u003Ch2 id=\"how-design-tokens-should-have-worked-at-coral\">How Design Tokens Should Have Worked at Coral\u003C/h2>\n\u003Cp>Here’s what I’d do if I could rewind:\u003C/p>\n\u003Cp>\u003Cstrong>Year 1:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>Create tokens file: colors, spacing, typography, shadows\u003C/li>\n\u003Cli>Publish as a package: \u003Ccode>@talend/tokens\u003C/code>\u003C/li>\n\u003Cli>Use Figma Tokens plugin to keep Figma and JSON in sync\u003C/li>\n\u003Cli>Designers and developers use the same token names\u003C/li>\n\u003Cli>Zero components yet. Just tokens.\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>Year 2:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>Build first 5 components using the tokens\u003C/li>\n\u003Cli>Token file becomes the single source of truth\u003C/li>\n\u003Cli>Any product can customize by extending the tokens\u003C/li>\n\u003Cli>Publish both light and dark token sets\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>Year 3:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>Add more components\u003C/li>\n\u003Cli>Token system is stable and proven\u003C/li>\n\u003Cli>Adoption happens naturally because tokens work\u003C/li>\n\u003C/ol>\n\u003Cp>What actually happened:\u003C/p>\n\u003Cp>\u003Cstrong>Year 1:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>Build 50 components immediately\u003C/li>\n\u003Cli>Hard-code colors everywhere\u003C/li>\n\u003Cli>Designers ignore the token layer\u003C/li>\n\u003Cli>Developers confused about what to override\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>Year 2:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>Try to retrofit tokens into existing components\u003C/li>\n\u003Cli>It’s messy. It’s complicated.\u003C/li>\n\u003Cli>Nobody agrees on token names\u003C/li>\n\u003Cli>Adoption is still low\u003C/li>\n\u003C/ul>\n\u003Cp>Tokens should have been the foundation. Everything else builds on top.\u003C/p>\n\u003Ch2 id=\"the-token-lesson\">The Token Lesson\u003C/h2>\n\u003Cp>Here’s the real insight: \u003Cstrong>Design systems are really about creating a shared vocabulary.\u003C/strong>\u003C/p>\n\u003Cp>Design tokens are that vocabulary. They’re boring. They’re simple. They’re not exciting.\u003C/p>\n\u003Cp>But they work.\u003C/p>\n\u003Cp>Senior designers didn’t resist tokens. They resisted 50 pre-built components they didn’t choose. They resisted losing creative control.\u003C/p>\n\u003Cp>But tokens? Tokens let designers and developers collaborate. They make theming easy. They make updates global.\u003C/p>\n\u003Cp>If Coral had been “design tokens + whatever components you need,” it would have been adopted immediately.\u003C/p>\n\u003Cp>Instead, it was “here are 50 components, use them all or nothing.”\u003C/p>\n\u003Cp>Big difference.\u003C/p>\n\u003Ch2 id=\"enter-coral-the-design-system\">Enter Coral: The Design System\u003C/h2>\n\u003Cp>So the design system team proposed a solution. Their proposal:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>TypeScript\u003C/strong> - Good, type safety for components\u003C/li>\n\u003Cli>\u003Cstrong>Styled Components\u003C/strong> - For scoped CSS\u003C/li>\n\u003Cli>\u003Cstrong>React Aria\u003C/strong> - For accessibility (but in alpha)\u003C/li>\n\u003Cli>\u003Cstrong>React\u003C/strong> - For the component framework\u003C/li>\n\u003C/ul>\n\u003Cp>As an architect, I was… hesitant.\u003C/p>\n\u003Cp>Not because the tech was bad. But because:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>React Aria was in alpha\u003C/strong> : We were betting on a library that wasn’t stable\u003C/li>\n\u003Cli>\u003Cstrong>Styled Components adds bundle size\u003C/strong> : Shipping a CSS-in-JS library with every component\u003C/li>\n\u003Cli>\u003Cstrong>Uncontrolled patterns only\u003C/strong> : The first versions only supported uncontrolled components (\u003Ccode>&#x3C;input defaultValue=\"...\" />\u003C/code>). React best practices call for controlled components (\u003Ccode>&#x3C;input value={...} onChange={...} />\u003C/code>).\u003C/li>\n\u003Cli>\u003Cstrong>Button size was different\u003C/strong> : The new design system button was a different size than the Bootstrap button. Good design, sure. But \u003Cstrong>adoption suicide.\u003C/strong>\u003C/li>\n\u003C/ol>\n\u003Cp>But you know what? The team had conviction. They were excited. They had a vision. And that matters.\u003C/p>\n\u003Cp>So we got on board. We built the infrastructure. We created a CDN for distribution (remember the Yarn article? That was part of this effort). We committed to the push.\u003C/p>\n\u003Ch2 id=\"two-years-of-not-much\">Two Years of… Not Much\u003C/h2>\n\u003Cp>What happened next was frustrating.\u003C/p>\n\u003Cp>The design system team spent two years building components, refining APIs, and pushing for adoption.\u003C/p>\n\u003Cp>The adoption… didn’t happen.\u003C/p>\n\u003Cp>\u003Cstrong>Why?\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>The button looked different\u003C/strong> : Product teams had trained their users on the current button. Switching meant a breaking change to the user experience. “Is the button still clickable?” customers would ask. Silly? Yes. Real? Also yes.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Uncontrolled pattern limitation\u003C/strong> : Developers wanted to write:\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [value, setValue] \u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#A6E22E\"> useState\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">''\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">Input\u003C/span>\u003Cspan style=\"color:#A6E22E\"> value\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">value\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#A6E22E\"> onChange\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">e\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">=>\u003C/span>\u003Cspan style=\"color:#A6E22E\"> setValue\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(e.target.value)\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>But Coral only offered:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">&#x3C;\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">Input\u003C/span>\u003Cspan style=\"color:#A6E22E\"> defaultValue\u003C/span>\u003Cspan style=\"color:#F92672\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">''\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Uncontrolled components are simpler but less flexible. Most React developers had moved to controlled components because they’re more powerful.\u003C/p>\n\u003Col start=\"3\">\n\u003Cli>\n\u003Cp>\u003Cstrong>React Aria concerns\u003C/strong> : React Aria was (and still is) a heavy library. Developers worried about bundle size. They worried about stability. The accessibility was great, but at what cost?\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>The design system looked… corporate\u003C/strong> : And that’s fine! But some teams wanted customization that Coral’s strict design didn’t allow.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Cp>So most teams continued using Bootstrap. Some started the migration. Many created workarounds.\u003C/p>\n\u003Cp>The design system existed, but as a \u003Cstrong>library without adoption\u003C/strong>. A solution without a problem.\u003C/p>\n\u003Ch2 id=\"the-crisis-the-entire-team-left\">The Crisis: The Entire Team Left\u003C/h2>\n\u003Cp>Then came 2024. The entire design system team left Talend.\u003C/p>\n\u003Cp>All of them. Gone.\u003C/p>\n\u003Cp>And guess who became the owner of Talend/UI?\u003C/p>\n\u003Cp>Me.\u003C/p>\n\u003Cp>I inherited:\u003C/p>\n\u003Cul>\n\u003Cli>A React component library using styled-components and React Aria\u003C/li>\n\u003Cli>A build infrastructure worth maintaining\u003C/li>\n\u003Cli>Zero dedicated resources\u003C/li>\n\u003Cli>Hundreds of thousands of lines of code\u003C/li>\n\u003C/ul>\n\u003Cp>Oh, and \u003Cstrong>a legacy of low adoption.\u003C/strong>\u003C/p>\n\u003Ch2 id=\"the-audit-what-do-we-actually-need\">The Audit: What Do We Actually Need?\u003C/h2>\n\u003Cp>Once I owned the system, I had to ask hard questions:\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>What’s actually being used?\u003C/strong> : By looking at npm download stats and internal metrics, I found that only 30% of the components were actively used. Some components had zero downloads.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>What’s our real problem?\u003C/strong> : It wasn’t “lack of a design system.” It was “legacy Bootstrap is killing us, but we can’t all migrate together.”\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>What should the solution be?\u003C/strong> : A lightweight, stable, HTML-centric component library. Not another Figma-to-code pipeline. Just components that work.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"the-realization-ui-libraries-are-unstable\">The Realization: UI Libraries Are Unstable\u003C/h2>\n\u003Cp>This is the biggest lesson I learned:\u003C/p>\n\u003Cp>\u003Cstrong>You should not build products on top of unstable UI libraries.\u003C/strong>\u003C/p>\n\u003Cp>Here’s why:\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Cstrong>Libraries evolve, your code doesn’t\u003C/strong> : React Aria changes its API. Styled-components changes how it handles SSR. Your code has to adapt or break.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Dependencies become liabilities\u003C/strong> : React Aria depends on 5 other libraries. Styled-components depends on 3. If any of those breaks, your design system breaks. And every product depending on your design system breaks.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Bundle size compounds\u003C/strong> : You add React Aria (+30KB). You add styled-components (+15KB). You add date-picker library (+40KB). Suddenly your button component is 85KB.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>Maintenance burden grows\u003C/strong> : When React Aria releases a breaking change, you have to update it. When styled-components fixes a bug, you need to test it. You become a coordinator, not a builder.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>You lose control\u003C/strong> : The library maintainers own your component behavior. If they decide to deprecate something, you have to follow.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"the-new-direction-own-the-html\">The New Direction: Own the HTML\u003C/h2>\n\u003Cp>So here’s what I’m doing now:\u003C/p>\n\u003Cp>\u003Cstrong>Remove React Aria. Remove styled-components. Use native HTML.\u003C/strong>\u003C/p>\n\u003Cp>Instead:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// Old approach (Coral v1)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { Button } \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> styled \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> 'styled-components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> MyButton\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">Button\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">variant\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"primary\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">// New approach (Coral v2)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { Button } \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@talend/components'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> MyButton\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">  return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">Button\u003C/span>\u003Cspan> \u003C/span>\u003Cspan style=\"color:#A6E22E;text-decoration:underline\">className\u003C/span>\u003Cspan style=\"color:#F8F8F2\">=\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"primary\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> />;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The new components are:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>TypeScript for type safety\u003C/strong> - Good\u003C/li>\n\u003Cli>\u003Cstrong>CSS Modules for scoping\u003C/strong> - Simple and stable\u003C/li>\n\u003Cli>\u003Cstrong>Plain React for interactivity\u003C/strong> - No synthetic complications\u003C/li>\n\u003Cli>\u003Cstrong>HTML semantics first\u003C/strong> - \u003Ccode>&#x3C;button>\u003C/code>, \u003Ccode>&#x3C;input>\u003C/code>, \u003Ccode>&#x3C;form>\u003C/code>, etc.\u003C/li>\n\u003Cli>\u003Cstrong>Optional: Radix UI or Headless UI for the really complex stuff\u003C/strong> - But only when we REALLY need it\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>Why this works:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>HTML is stable\u003C/strong> : The \u003Ccode>&#x3C;button>\u003C/code> element will work the same way in 10 years\u003C/li>\n\u003Cli>\u003Cstrong>CSS Modules are simple\u003C/strong> : No black magic, just CSS with local scope\u003C/li>\n\u003Cli>\u003Cstrong>Less dependencies\u003C/strong> : Fewer things can break\u003C/li>\n\u003Cli>\u003Cstrong>Smaller bundle\u003C/strong> : We’re not shipping extra libraries\u003C/li>\n\u003Cli>\u003Cstrong>Easy to maintain\u003C/strong> : You can see exactly what the button does by reading the code\u003C/li>\n\u003Cli>\u003Cstrong>Developer friendly\u003C/strong> : React developers understand \u003Ccode>&#x3C;button>\u003C/code> immediately\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"the-migration-plan\">The Migration Plan\u003C/h2>\n\u003Cp>Now I’m planning a migration from Coral v1 (styled-components + React Aria) to Coral v2 (TypeScript + CSS Modules + HTML).\u003C/p>\n\u003Cp>Here’s my strategy:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Start with the most-used components\u003C/strong> : Button, Input, Select, Modal\u003C/li>\n\u003Cli>\u003Cstrong>Build v2 alongside v1\u003C/strong> : No breaking changes yet\u003C/li>\n\u003Cli>\u003Cstrong>Migrate product teams gradually\u003C/strong> : They choose when to switch\u003C/li>\n\u003Cli>\u003Cstrong>Deprecate v1 slowly\u003C/strong> : Give teams time to adapt\u003C/li>\n\u003Cli>\u003Cstrong>Document the hell out of it\u003C/strong> : Make migration easy\u003C/li>\n\u003C/ol>\n\u003Cp>This will take time. But it’s the right approach.\u003C/p>\n\u003Ch2 id=\"the-lessons\">The Lessons\u003C/h2>\n\u003Cp>Here’s what I learned from this entire journey:\u003C/p>\n\u003Ch3 id=\"1-bootstrap-isnt-the-problem-global-css-is\">1. Bootstrap isn’t the problem; global CSS is\u003C/h3>\n\u003Cp>The mistake wasn’t using Bootstrap. The mistake was using global CSS at scale. Any framework would have the same problem.\u003C/p>\n\u003Ch3 id=\"2-dont-bet-on-alpha-libraries-for-production\">2. Don’t bet on alpha libraries for production\u003C/h3>\n\u003Cp>React Aria is great. But building a design system on an alpha library was risky. We should have waited for stability.\u003C/p>\n\u003Ch3 id=\"3-adoption-is-harder-than-tech\">3. Adoption is harder than tech\u003C/h3>\n\u003Cp>The best design system in the world won’t be adopted if it breaks the user experience. A 30% larger button is not a “design improvement.” It’s a breaking change.\u003C/p>\n\u003Ch3 id=\"4-uncontrolled-patterns-are-a-limiting-pattern\">4. Uncontrolled patterns are a limiting pattern\u003C/h3>\n\u003Cp>Controlled components are the React default for good reasons. Building a design system that doesn’t support them is a losing bet.\u003C/p>\n\u003Ch3 id=\"5-bundle-size-matters\">5. Bundle size matters\u003C/h3>\n\u003Cp>Each library adds cost. styled-components + React Aria sounds like “just two libraries.” But each pulls in more dependencies. Before you know it, your button is 100KB.\u003C/p>\n\u003Ch3 id=\"6-fewer-dependencies--less-maintenance\">6. Fewer dependencies = less maintenance\u003C/h3>\n\u003Cp>This is the big one. \u003Cstrong>UI libraries are not stable enough to be used in products. You should build your own and own the entire HTML rendering.\u003C/strong>\u003C/p>\n\u003Cp>Use a library when you REALLY need one. Not because it sounds cool or makes the code “cleaner.”\u003C/p>\n\u003Cp>For Talend/UI v2, I’m building 95% in-house HTML. The remaining 5% will use Radix UI or Headless UI for extremely complex components (like the autocomplete with virtualization).\u003C/p>\n\u003Cp>But the button? That’s ours. The input? Ours. The modal? Ours.\u003C/p>\n\u003Cp>We own the HTML. We own the behavior. We own the future.\u003C/p>\n\u003Ch2 id=\"what-id-do-differently\">What I’d Do Differently\u003C/h2>\n\u003Cp>If I could go back in time and advise the 2018 design system team:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Start smaller\u003C/strong> : One product, one button, solve the real problem\u003C/li>\n\u003Cli>\u003Cstrong>Own the HTML\u003C/strong> : Build components with plain React + CSS Modules from day one\u003C/li>\n\u003Cli>\u003Cstrong>Focus on adoption\u003C/strong> : Make the new button exactly match the old one initially, then iterate\u003C/li>\n\u003Cli>\u003Cstrong>Use libraries strategically\u003C/strong> : Only for things we can’t build (like date picker with virtualization)\u003C/li>\n\u003Cli>\u003Cstrong>Build incrementally\u003C/strong> : Bootstrap → Coral v0 (same look) → Coral v1 (new look with opt-in) → Full migration\u003C/li>\n\u003Cli>\u003Cstrong>Measure adoption\u003C/strong> : Make adoption easy to measure and a team KPI\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"where-we-are-now\">Where We Are Now\u003C/h2>\n\u003Cp>It’s 2022. I’m maintaining Talend/UI.\u003C/p>\n\u003Cp>The new v2 is simpler, faster, and more maintainable.\u003C/p>\n\u003Cp>The bundle size will going down as adoption increase.\u003C/p>\n\u003Cp>The code is easier to read.\u003C/p>\n\u003Cp>And most importantly: \u003Cstrong>we own our UI layer\u003C/strong>. That ownership is worth every day I spend rebuilding this.\u003C/p>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>Design systems are hard. Really hard.\u003C/p>\n\u003Cp>The hardest part isn’t the technology. It’s the adoption. It’s making decisions that balance innovation with backward compatibility. It’s owning the consequences of those decisions.\u003C/p>\n\u003Cp>Coral wasn’t a failure. It was a learning experience. And sometimes, the best design system is the one you build incrementally, starting small, with a deep commitment to owning your own code.\u003C/p>\n\u003Cp>If you’re building a design system, here’s my advice:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Own the HTML\u003C/strong>. Don’t bet on unstable libraries.\u003C/li>\n\u003Cli>\u003Cstrong>Focus on adoption\u003C/strong>. Tech is easy; people are hard.\u003C/li>\n\u003Cli>\u003Cstrong>Start small\u003C/strong>. One component, get it right, then scale.\u003C/li>\n\u003Cli>\u003Cstrong>Measure everything\u003C/strong>. You can’t improve what you don’t measure.\u003C/li>\n\u003Cli>\u003Cstrong>Be willing to rewrite\u003C/strong>. If it’s not working, the cost of starting over is usually less than the cost of pushing forward.\u003C/li>\n\u003C/ul>\n\u003Cp>And if you inherit a design system that’s struggling? It’s okay to rebuild. Sometimes the best path forward is to acknowledge that the previous approach didn’t work and start fresh with what you’ve learned.\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Talend/UI Resources:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/Talend/ui\">Talend/UI on GitHub\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.designsystems.com/case-study-airbnb/\">Design System Lessons from Airbnb\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.designsystems.com/\">Building a design system: the practical guide\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":1559,"localImagePaths":1648,"remoteImagePaths":1649,"frontmatter":1650,"imagePaths":1654},[1560,1563,1566,1569,1572,1575,1578,1581,1584,1587,1590,1593,1596,1599,1602,1605,1608,1611,1614,1617,1620,1623,1626,1629,1632,1635,1638,1641,1644,1647],{"depth":449,"slug":1561,"text":1562},"the-initial-excitement-and-my-skepticism","The Initial Excitement (and My Skepticism)",{"depth":449,"slug":1564,"text":1565},"the-bootstrap-problem-nobody-talks-about","The Bootstrap Problem Nobody Talks About",{"depth":449,"slug":1567,"text":1568},"the-designer-problem-adoption-from-the-design-side","The Designer Problem: Adoption from the Design Side",{"depth":449,"slug":1570,"text":1571},"design-tokens-the-secret-weapon","Design Tokens: The Secret Weapon",{"depth":1018,"slug":1573,"text":1574},"1-design-and-code-speak-the-same-language","1. Design and Code Speak the Same Language",{"depth":1018,"slug":1576,"text":1577},"2-theming-becomes-trivial","2. Theming Becomes Trivial",{"depth":1018,"slug":1579,"text":1580},"3-global-updates-become-real","3. Global Updates Become Real",{"depth":1018,"slug":1582,"text":1583},"4-maintainability-explodes","4. Maintainability Explodes",{"depth":1018,"slug":1585,"text":1586},"5-scalability-for-multiple-products","5. Scalability for Multiple Products",{"depth":1018,"slug":1588,"text":1589},"6-tokens-enable-micro-customization","6. Tokens Enable Micro-Customization",{"depth":1018,"slug":1591,"text":1592},"7-design-token-tools-exist-now","7. Design Token Tools Exist Now",{"depth":449,"slug":1594,"text":1595},"how-design-tokens-should-have-worked-at-coral","How Design Tokens Should Have Worked at Coral",{"depth":449,"slug":1597,"text":1598},"the-token-lesson","The Token Lesson",{"depth":449,"slug":1600,"text":1601},"enter-coral-the-design-system","Enter Coral: The Design System",{"depth":449,"slug":1603,"text":1604},"two-years-of-not-much","Two Years of… Not Much",{"depth":449,"slug":1606,"text":1607},"the-crisis-the-entire-team-left","The Crisis: The Entire Team Left",{"depth":449,"slug":1609,"text":1610},"the-audit-what-do-we-actually-need","The Audit: What Do We Actually Need?",{"depth":449,"slug":1612,"text":1613},"the-realization-ui-libraries-are-unstable","The Realization: UI Libraries Are Unstable",{"depth":449,"slug":1615,"text":1616},"the-new-direction-own-the-html","The New Direction: Own the HTML",{"depth":449,"slug":1618,"text":1619},"the-migration-plan","The Migration Plan",{"depth":449,"slug":1621,"text":1622},"the-lessons","The Lessons",{"depth":1018,"slug":1624,"text":1625},"1-bootstrap-isnt-the-problem-global-css-is","1. Bootstrap isn’t the problem; global CSS is",{"depth":1018,"slug":1627,"text":1628},"2-dont-bet-on-alpha-libraries-for-production","2. Don’t bet on alpha libraries for production",{"depth":1018,"slug":1630,"text":1631},"3-adoption-is-harder-than-tech","3. Adoption is harder than tech",{"depth":1018,"slug":1633,"text":1634},"4-uncontrolled-patterns-are-a-limiting-pattern","4. Uncontrolled patterns are a limiting pattern",{"depth":1018,"slug":1636,"text":1637},"5-bundle-size-matters","5. Bundle size matters",{"depth":1018,"slug":1639,"text":1640},"6-fewer-dependencies--less-maintenance","6. Fewer dependencies = less maintenance",{"depth":449,"slug":1642,"text":1643},"what-id-do-differently","What I’d Do Differently",{"depth":449,"slug":1645,"text":1646},"where-we-are-now","Where We Are Now",{"depth":449,"slug":459,"text":460},[],[],{"title":1547,"categories":1651,"tags":1652,"date":1653},[17],[975,1551,1552,1060,1363],["Date","2022-11-12T00:00:00.000Z"],[],"2022-11-12-design-system.md","2023-11-20-veepee",{"id":1656,"data":1658,"body":1668,"filePath":1669,"digest":1670,"rendered":1671,"legacyId":1736},{"title":1659,"date":1660,"categories":1661,"tags":1662,"lang":17},"Veepee: Nouvelle aventure pour faire du NextJS",["Date","2023-11-20T00:00:00.000Z"],[696],[1663,975,1551,1552,1060,1664,1665,1666,1667],"Veepee","Lead","ecommerce","Qlik","Acquisition","Voilà, c'est officiel. J'ai quitté Talend pour rejoindre Veepee en novembre 2023.\n\nEt c'est peut-être l'une des meilleures décisions que j'ai jamais prise.\n\nMais pour comprendre pourquoi, il faut d'abord comprendre ce qui s'est passé.\n\n## Sept ans sur du SPA: Enfin libre de faire du React\n\nQuand je suis arrivé chez Talend en 2016, le JavaScript était... le JavaScript.\n\nPas de framework dominant. AngularJS est mort. Encore du jQuery en production. Des sites avec 5 ou 6 différentes approches au rendu. C'était un bordel.\n\nEn tant qu'architecte frontend, j'ai passé **sept ans** à construire une infra moderne:\n\n- Migrer de Talend Studio vers une architecture de microservices frontend\n- Bâtir une équipe React avec des patterns cohérents\n- Créer une design system (Coral)\n- Établir des standards TypeScript, testing, CI/CD\n- Naviguer les décisions technologiques complexes\n\nC'était gratifiant. Je contrôlais le stack frontend. Je pouvais prendre les décisions. Je pouvais dire \"non\" à une mauvaise idée.\n\nEt puis...\n\n## La croissance de NextJS\n\nQuelque chose a changé autour de 2022. NextJS est passé de \"joli framework\" à **\"c'est l'avenir du React.\"**\n\nVercel a très bien joué son coup:\n- SSR et SSG par défaut\n- API routes intégrées\n- Déploiement ultra-simple sur Vercel\n- Community énorme\n- Next 13 avec App Router (révolutionnaire)\n\nTalend regardait ça. Moi je regardais ça.\n\nEt je pensais: \"Oui. C'est ça. C'est le vrai next step après les SPA.\"\n\nMais Talend n'était pas prêt à changer. On venait de passer 4 ans à stabiliser le SPA. Le productcode était partout. Les migrations prennent du temps. Et puis...\n\n## L'acquisition: Quand tu perds le contrôle\n\nFin 2022, c'est annoncé. **Talend se fait acquérir par Qlik.**\n\nVoilà.\n\nTu arrives au bureau un matin. C'est le même job. Sauf que ce n'est plus ton job.\n\nTu as un nouveau CTO. Une nouvelle stratégie. De nouvelles priorités. Et surtout: **de nouvelles opinions sur le frontend.**\n\nEt ces opinions? Elles ne sont pas les miennes.\n\nQlik venait du monde du BI traditionnel. SaaS multi-tenant. Infrastructure massive. Et leurs choix frontend reflétaient ça:\n\n### MaterialUI: L'horreur du design system corporate\n\nQlik utilise MaterialUI. En 2023. Massivement. C'est leur standard.\n\nRien contre MaterialUI en soi. C'est une bonne librairie. Mais:\n\n1. **C'est lourd** : MaterialUI c'est 100+ KB minified. Pour une icône.\n2. **C'est théâtral** : Les animations, les ripple effects, tout ça. C'est beau, mais c'est slow.\n3. **L'adoption était impossible** : On venait de passer 4 ans à bâtir une design system Coral. Dire \"on abandonne tout pour MaterialUI\" aurait été un suicide.\n4. **Les customisations étaient complexes** : Avec styled-components et makeStyles, c'était l'enfer.\n\nPire encore: Qlik voulait que **les produits Talend migrent vers MaterialUI.**\n\nAutrement dit: défaire 4 ans de travail. Détruire Coral. Accepter un design system qui n'est pas le nôtre.\n\nJ'ai dit non. Poliment. Mais fermement.\n\n### SystemJS: Le framework qui n'existe pas vraiment\n\nEt puis il y avait SystemJS.\n\nQlik utilise une architecture bizarre où le frontend est segmenté par \"modules.\" Et pour charger ces modules? SystemJS.\n\nSystemJS c'est un module loader. Ancien. Lourd. Qu'on ne utilise plus vraiment en 2023.\n\nPourquoi? Parce que tu as:\n- **Webpack** pour la plupart des applications\n- **Vite** pour les plus modernes\n- **Turbopack** si tu veux vraiment être au cutting edge\n\nMais SystemJS? C'est du 2015.\n\nSauf que Qlik l'a, alors **tu dois l'apprendre.**\n\nEt je me souviens de cette réunion où on discutait de comment charger un module dynamique. Et quelqu'un a dit \"on utilise SystemJS pour ça.\"\n\nEt j'ai pensé: \"Non. Non non non. Pas encore 5 ans de ça.\"\n\n## L'acquisition troublante\n\nCe que j'ai réalisé pendant cette période, c'est que **les acquisitions sont troublantes.**\n\nTu te réveilles un jour et ton entreprise n'existe plus. La culture change. Les décisions se prennent ailleurs. Les gens que tu as embauchés s'en vont. Les projets sur lesquels tu as travaillé sont arrêtés.\n\nEt tu peux essayer de changer les choses. De convaincre. De négocier.\n\nMais tu n'es pas aux commandes.\n\nCe qui est très différent d'être architecte frontend où tu **définis** les standards.\n\nMaintenant tu **négocie** les standards.\n\nC'est epuisant.\n\nSurtout quand la technologie qu'on te force à utiliser, ce n'est pas juste \"différent,\" c'est techniquement inférieur à ce que tu ferais.\n\n(Je dis ça avec respect pour les équipes Qlik. Leurs choix avaient du sens pour **leur** problème. Juste pas pour le nôtre.)\n\n## Chercher ailleurs: Talend n'est plus ma maison\n\nÀ ce moment, j'ai su que je devais partir.\n\nNon par rejet. Mais par **réalité.** Talend était en transition. Je ne pouvais plus diriger la stratégie frontend. Les choix venaient de Qlik. Et je n'aimais pas ces choix.\n\nRester aurait été:\n1. Accepter une infrastructure qu'on ne contrôle pas\n2. Passer mon temps à négocier plutôt qu'à construire\n3. Regarder des projets que j'aimais disparaître\n4. Peut-être licencié en restructuration (ça arrive dans les acquisitions)\n\nAucune de ces options ne m'attirait.\n\nDonc j'ai commencé à regarder.\n\n## Chercher la bonne entreprise\n\nMes critères:\n\n1. **Frontend moderne** : React, TypeScript, Next.js\n2. **Équipe technique forte** : Des gens qui savent ce qu'ils font\n3. **Produit intéressant** : Pas un produit mort\n4. **Culture d'innovation** : On peut expérimenter\n5. **Autonomie** : Je peux vraiment diriger les décisions\n6. **France** : Je voulais rester en France\n\nC'est beaucoup d'critères. Et c'est hard à trouver.\n\nPuis Veepee s'est présenté.\n\n## Veepee: Enfin une entreprise qui bouge\n\nPour ceux qui ne connaissent pas: **Veepee c'est le leader français du ventes flash et du e-commerce.**\n\nVentes Privées, c'est leur marque. 10+ millions de visiteurs par mois. Un vrai produit.\n\nEt ils cherchaient un **lead frontend** pour diriger la core team.\n\nDès qu'on en a parlé, j'ai su. J'ai su que c'était différent.\n\nPourquoi?\n\n1. **Ils utilisent Next.js** : Pas \"c'est possible de l'utiliser.\" **Ils l'utilisent déjà.** Pour le vrai produit.\n2. **Ils investissent en frontend** : Créer une \"core team\" c'est dire \"le frontend est critique.\"\n3. **L'équipe existe déjà** : Des vrais développeurs React/Next. Pas des débutants.\n4. **Le produit est vivant** : Veepee c'est une boutique en ligne connue.\n5. **L'innovation est possible** : Ils parlent de mettre à jour le stack. De moderniser. De faire mieux.\n6. **C'est français** : Une vraie scale-up qui innove, pas une PME qui stagne.\n\nLa première réunion technique avec l'équipe, j'ai parlé avec deux lead engineers frontends. Et on a parlé:\n\n- **Web performance** : Comment optimiser du NextJS ?\n- **Next.js routing** : Comment gérer la complexité du SPA dans App Router?\n- **Design systems** : Comment faire evoluer notre design system.\n\nEt là, j'ai pensé: **\"Yes. Ces gens, je peux travailler avec.\"**\n\nC'est rare.\n\n## Lead de la Frontend Core Team\n\nEn novembre 2023, j'ai signé.\n\nEt dès janvier 2024, je suis responsable de la roadmap frontend pour Veepee.\n\nQu'est-ce que ça veut dire?\n\n1. **Définir la stratégie** : Next.js migration, design system, infra\n2. **Recruter l'équipe** : Ajouter des seniors backend avec expérience frontend\n3. **Établir les standards** : TypeScript, testing, performance, accessibilité\n4. **Diriger les grands projets** : Performance, bundling, SSR optimization\n5. **Mentorat** : Aider les gens de l'équipe à grandir\n\nC'est ce que je faisais chez Talend. Mais cette fois:\n\n- **Je contrôle les décisions**\n- **L'équipe est juste** (25+ frontends qui attendent)\n- **Le produit est vivant**\n- **Les gens veulent changer** (pas de résistance au changement)\n\n## Qu'est-ce que c'est d'être Lead Frontend\n\nEn tant que lead, mes priorités pour 2024:\n\n### 1. Stabiliser l'infra\n\nVeepee a un vrai produit, mais l'infra frontend n'est pas optimale.\n\nPages trop lourdes. Rendering lent. Pas de caching stratégique.\n\nPremière étape: **mesurer** exactement où on perd du temps.\n\nPuis: **optimiser** de manière stratégique:\n- Image optimization (un gros levier pour l'ecommerce)\n- Code splitting intelligent\n- Font loading strategy\n- Critical CSS\n- Monorepository pour l efficacité\n\n### 2. Etre en charge de la production\n\nContrairement à mon experience d'architecte je devais cette fois gérer les soucis en production.\n\nEn lien avec les SRE et les autres tech lead:\n\n- Analyse des **logs** \n- Analyse des **metrics**\n- Prise de décisions **rapides**\n\n### 3. Moderniser le stack progressivement\n\nVeepee a du legacy. Rien de surprenant pour une boîte profitable.\n\nDonc:\n\n- Migrer vers **Next.js 13+ App Router** progressivement\n- Remplacer **Webpack** par **Turbopack** (long terme)\n- Ajouter **TypeScript** partout (progressivement)\n- Moderniser les **build times** (ils sont longs)\n\n### 4. Former\n\nUne équipe de 25+ développeurs qui veulent grandir.\n\nLead ça veut aussi dire: aider les gens. Leur donner des mentors. Les challenger. Les faire progresser.\n\nC'est la partie du job que j'aime le plus.\n\n## Pourquoi je suis enthousiaste\n\nAprès 7 ans chez Talend et l'acquisition difficile, Veepee c'est un nouveau départ.\n\nPas en tant que \"je recommence à zéro.\" Mais en tant que \"j'applique tout ce que j'ai appris.\"\n\nJe sais ce qui marche:\n- Les design systems qui adoptent\n- Les architectures qui scale\n- Les équipes qui livrent\n- Les technologies qui ont du sens\n\nEt cette fois, j'ai la chance de **le faire correctement** sans les contraintes de legacy ou d'acquisition.\n\nVeepee a:\n- Un beau produit\n- Un budget\n- Une vrai équipe\n- La vraie autonomie\n\nJe ne pouvais pas demander mieux.\n\n## Pour la communauté\n\nChez Talend, j'ai écrit beaucoup. Sur les design systems. Sur l'architecture. Sur les lessons learned.\n\nJ'ai prévu de continuer ici. De partager:\n\n- Comment on bâtit une design system qui scale\n- Comment on optimise pour 10M visiteurs\n- Comment on modernise un codebase sans breaking it\n- Comment on leads une équipe frontend\n\nVeepee m'a encouragé à parler publiquement. À contribuer à la communauté.\n\nDonc ça va continuer.\n\n## Conclusion: Le bon match, au bon moment\n\nQuitter Talend a été difficile. C'était ma maison. J'y ai grandi comme architecte.\n\nMais l'acquisition m'a rappelé que les entreprises changent. Les décisions ne sont pas toujours tes décisions.\n\nEt parfois, le meilleur move c'est de dire: \"Je dois aller ailleurs. Je dois trouver un match où je peux vraiment construire.\"\n\nVeepee c'est ce match.\n\nJe suis impatient de voir où on peut aller avec une équipe de 25+ frontends passionnés et une infrastructure moderne.\n\n2024 va être intéressant.\n\n---\n\n**Les vraies questions qu'on devrait se poser dans une carrière:**\n\n1. **Est-ce que tu contrôles les décisions?** (Ou tu les négocies?)\n2. **Est-ce que tu aimes le produit?** (Ou tu paies juste les factures?)\n3. **Est-ce que tu aimes l'équipe?** (Ou tu te disputes avec eux?)\n4. **Est-ce que tu peux grandir?** (Ou tu stagnes?)\n\nSi tu répondres \"non\" à trop de ces questions, c'est peut-être le signal que tu dois bouger.\n\nChez Talend, les réponses ont changé. Et je suis allé ailleurs.\n\nC'est pas dramatique. C'est juste la vie du tech.","src/content/posts/2023-11-20-veepee.md","ce60e0e38cab7158",{"html":1672,"metadata":1673},"\u003Cp>Voilà, c’est officiel. J’ai quitté Talend pour rejoindre Veepee en novembre 2023.\u003C/p>\n\u003Cp>Et c’est peut-être l’une des meilleures décisions que j’ai jamais prise.\u003C/p>\n\u003Cp>Mais pour comprendre pourquoi, il faut d’abord comprendre ce qui s’est passé.\u003C/p>\n\u003Ch2 id=\"sept-ans-sur-du-spa-enfin-libre-de-faire-du-react\">Sept ans sur du SPA: Enfin libre de faire du React\u003C/h2>\n\u003Cp>Quand je suis arrivé chez Talend en 2016, le JavaScript était… le JavaScript.\u003C/p>\n\u003Cp>Pas de framework dominant. AngularJS est mort. Encore du jQuery en production. Des sites avec 5 ou 6 différentes approches au rendu. C’était un bordel.\u003C/p>\n\u003Cp>En tant qu’architecte frontend, j’ai passé \u003Cstrong>sept ans\u003C/strong> à construire une infra moderne:\u003C/p>\n\u003Cul>\n\u003Cli>Migrer de Talend Studio vers une architecture de microservices frontend\u003C/li>\n\u003Cli>Bâtir une équipe React avec des patterns cohérents\u003C/li>\n\u003Cli>Créer une design system (Coral)\u003C/li>\n\u003Cli>Établir des standards TypeScript, testing, CI/CD\u003C/li>\n\u003Cli>Naviguer les décisions technologiques complexes\u003C/li>\n\u003C/ul>\n\u003Cp>C’était gratifiant. Je contrôlais le stack frontend. Je pouvais prendre les décisions. Je pouvais dire “non” à une mauvaise idée.\u003C/p>\n\u003Cp>Et puis…\u003C/p>\n\u003Ch2 id=\"la-croissance-de-nextjs\">La croissance de NextJS\u003C/h2>\n\u003Cp>Quelque chose a changé autour de 2022. NextJS est passé de “joli framework” à \u003Cstrong>“c’est l’avenir du React.”\u003C/strong>\u003C/p>\n\u003Cp>Vercel a très bien joué son coup:\u003C/p>\n\u003Cul>\n\u003Cli>SSR et SSG par défaut\u003C/li>\n\u003Cli>API routes intégrées\u003C/li>\n\u003Cli>Déploiement ultra-simple sur Vercel\u003C/li>\n\u003Cli>Community énorme\u003C/li>\n\u003Cli>Next 13 avec App Router (révolutionnaire)\u003C/li>\n\u003C/ul>\n\u003Cp>Talend regardait ça. Moi je regardais ça.\u003C/p>\n\u003Cp>Et je pensais: “Oui. C’est ça. C’est le vrai next step après les SPA.”\u003C/p>\n\u003Cp>Mais Talend n’était pas prêt à changer. On venait de passer 4 ans à stabiliser le SPA. Le productcode était partout. Les migrations prennent du temps. Et puis…\u003C/p>\n\u003Ch2 id=\"lacquisition-quand-tu-perds-le-contrôle\">L’acquisition: Quand tu perds le contrôle\u003C/h2>\n\u003Cp>Fin 2022, c’est annoncé. \u003Cstrong>Talend se fait acquérir par Qlik.\u003C/strong>\u003C/p>\n\u003Cp>Voilà.\u003C/p>\n\u003Cp>Tu arrives au bureau un matin. C’est le même job. Sauf que ce n’est plus ton job.\u003C/p>\n\u003Cp>Tu as un nouveau CTO. Une nouvelle stratégie. De nouvelles priorités. Et surtout: \u003Cstrong>de nouvelles opinions sur le frontend.\u003C/strong>\u003C/p>\n\u003Cp>Et ces opinions? Elles ne sont pas les miennes.\u003C/p>\n\u003Cp>Qlik venait du monde du BI traditionnel. SaaS multi-tenant. Infrastructure massive. Et leurs choix frontend reflétaient ça:\u003C/p>\n\u003Ch3 id=\"materialui-lhorreur-du-design-system-corporate\">MaterialUI: L’horreur du design system corporate\u003C/h3>\n\u003Cp>Qlik utilise MaterialUI. En 2023. Massivement. C’est leur standard.\u003C/p>\n\u003Cp>Rien contre MaterialUI en soi. C’est une bonne librairie. Mais:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>C’est lourd\u003C/strong> : MaterialUI c’est 100+ KB minified. Pour une icône.\u003C/li>\n\u003Cli>\u003Cstrong>C’est théâtral\u003C/strong> : Les animations, les ripple effects, tout ça. C’est beau, mais c’est slow.\u003C/li>\n\u003Cli>\u003Cstrong>L’adoption était impossible\u003C/strong> : On venait de passer 4 ans à bâtir une design system Coral. Dire “on abandonne tout pour MaterialUI” aurait été un suicide.\u003C/li>\n\u003Cli>\u003Cstrong>Les customisations étaient complexes\u003C/strong> : Avec styled-components et makeStyles, c’était l’enfer.\u003C/li>\n\u003C/ol>\n\u003Cp>Pire encore: Qlik voulait que \u003Cstrong>les produits Talend migrent vers MaterialUI.\u003C/strong>\u003C/p>\n\u003Cp>Autrement dit: défaire 4 ans de travail. Détruire Coral. Accepter un design system qui n’est pas le nôtre.\u003C/p>\n\u003Cp>J’ai dit non. Poliment. Mais fermement.\u003C/p>\n\u003Ch3 id=\"systemjs-le-framework-qui-nexiste-pas-vraiment\">SystemJS: Le framework qui n’existe pas vraiment\u003C/h3>\n\u003Cp>Et puis il y avait SystemJS.\u003C/p>\n\u003Cp>Qlik utilise une architecture bizarre où le frontend est segmenté par “modules.” Et pour charger ces modules? SystemJS.\u003C/p>\n\u003Cp>SystemJS c’est un module loader. Ancien. Lourd. Qu’on ne utilise plus vraiment en 2023.\u003C/p>\n\u003Cp>Pourquoi? Parce que tu as:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Webpack\u003C/strong> pour la plupart des applications\u003C/li>\n\u003Cli>\u003Cstrong>Vite\u003C/strong> pour les plus modernes\u003C/li>\n\u003Cli>\u003Cstrong>Turbopack\u003C/strong> si tu veux vraiment être au cutting edge\u003C/li>\n\u003C/ul>\n\u003Cp>Mais SystemJS? C’est du 2015.\u003C/p>\n\u003Cp>Sauf que Qlik l’a, alors \u003Cstrong>tu dois l’apprendre.\u003C/strong>\u003C/p>\n\u003Cp>Et je me souviens de cette réunion où on discutait de comment charger un module dynamique. Et quelqu’un a dit “on utilise SystemJS pour ça.”\u003C/p>\n\u003Cp>Et j’ai pensé: “Non. Non non non. Pas encore 5 ans de ça.”\u003C/p>\n\u003Ch2 id=\"lacquisition-troublante\">L’acquisition troublante\u003C/h2>\n\u003Cp>Ce que j’ai réalisé pendant cette période, c’est que \u003Cstrong>les acquisitions sont troublantes.\u003C/strong>\u003C/p>\n\u003Cp>Tu te réveilles un jour et ton entreprise n’existe plus. La culture change. Les décisions se prennent ailleurs. Les gens que tu as embauchés s’en vont. Les projets sur lesquels tu as travaillé sont arrêtés.\u003C/p>\n\u003Cp>Et tu peux essayer de changer les choses. De convaincre. De négocier.\u003C/p>\n\u003Cp>Mais tu n’es pas aux commandes.\u003C/p>\n\u003Cp>Ce qui est très différent d’être architecte frontend où tu \u003Cstrong>définis\u003C/strong> les standards.\u003C/p>\n\u003Cp>Maintenant tu \u003Cstrong>négocie\u003C/strong> les standards.\u003C/p>\n\u003Cp>C’est epuisant.\u003C/p>\n\u003Cp>Surtout quand la technologie qu’on te force à utiliser, ce n’est pas juste “différent,” c’est techniquement inférieur à ce que tu ferais.\u003C/p>\n\u003Cp>(Je dis ça avec respect pour les équipes Qlik. Leurs choix avaient du sens pour \u003Cstrong>leur\u003C/strong> problème. Juste pas pour le nôtre.)\u003C/p>\n\u003Ch2 id=\"chercher-ailleurs-talend-nest-plus-ma-maison\">Chercher ailleurs: Talend n’est plus ma maison\u003C/h2>\n\u003Cp>À ce moment, j’ai su que je devais partir.\u003C/p>\n\u003Cp>Non par rejet. Mais par \u003Cstrong>réalité.\u003C/strong> Talend était en transition. Je ne pouvais plus diriger la stratégie frontend. Les choix venaient de Qlik. Et je n’aimais pas ces choix.\u003C/p>\n\u003Cp>Rester aurait été:\u003C/p>\n\u003Col>\n\u003Cli>Accepter une infrastructure qu’on ne contrôle pas\u003C/li>\n\u003Cli>Passer mon temps à négocier plutôt qu’à construire\u003C/li>\n\u003Cli>Regarder des projets que j’aimais disparaître\u003C/li>\n\u003Cli>Peut-être licencié en restructuration (ça arrive dans les acquisitions)\u003C/li>\n\u003C/ol>\n\u003Cp>Aucune de ces options ne m’attirait.\u003C/p>\n\u003Cp>Donc j’ai commencé à regarder.\u003C/p>\n\u003Ch2 id=\"chercher-la-bonne-entreprise\">Chercher la bonne entreprise\u003C/h2>\n\u003Cp>Mes critères:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Frontend moderne\u003C/strong> : React, TypeScript, Next.js\u003C/li>\n\u003Cli>\u003Cstrong>Équipe technique forte\u003C/strong> : Des gens qui savent ce qu’ils font\u003C/li>\n\u003Cli>\u003Cstrong>Produit intéressant\u003C/strong> : Pas un produit mort\u003C/li>\n\u003Cli>\u003Cstrong>Culture d’innovation\u003C/strong> : On peut expérimenter\u003C/li>\n\u003Cli>\u003Cstrong>Autonomie\u003C/strong> : Je peux vraiment diriger les décisions\u003C/li>\n\u003Cli>\u003Cstrong>France\u003C/strong> : Je voulais rester en France\u003C/li>\n\u003C/ol>\n\u003Cp>C’est beaucoup d’critères. Et c’est hard à trouver.\u003C/p>\n\u003Cp>Puis Veepee s’est présenté.\u003C/p>\n\u003Ch2 id=\"veepee-enfin-une-entreprise-qui-bouge\">Veepee: Enfin une entreprise qui bouge\u003C/h2>\n\u003Cp>Pour ceux qui ne connaissent pas: \u003Cstrong>Veepee c’est le leader français du ventes flash et du e-commerce.\u003C/strong>\u003C/p>\n\u003Cp>Ventes Privées, c’est leur marque. 10+ millions de visiteurs par mois. Un vrai produit.\u003C/p>\n\u003Cp>Et ils cherchaient un \u003Cstrong>lead frontend\u003C/strong> pour diriger la core team.\u003C/p>\n\u003Cp>Dès qu’on en a parlé, j’ai su. J’ai su que c’était différent.\u003C/p>\n\u003Cp>Pourquoi?\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Ils utilisent Next.js\u003C/strong> : Pas “c’est possible de l’utiliser.” \u003Cstrong>Ils l’utilisent déjà.\u003C/strong> Pour le vrai produit.\u003C/li>\n\u003Cli>\u003Cstrong>Ils investissent en frontend\u003C/strong> : Créer une “core team” c’est dire “le frontend est critique.”\u003C/li>\n\u003Cli>\u003Cstrong>L’équipe existe déjà\u003C/strong> : Des vrais développeurs React/Next. Pas des débutants.\u003C/li>\n\u003Cli>\u003Cstrong>Le produit est vivant\u003C/strong> : Veepee c’est une boutique en ligne connue.\u003C/li>\n\u003Cli>\u003Cstrong>L’innovation est possible\u003C/strong> : Ils parlent de mettre à jour le stack. De moderniser. De faire mieux.\u003C/li>\n\u003Cli>\u003Cstrong>C’est français\u003C/strong> : Une vraie scale-up qui innove, pas une PME qui stagne.\u003C/li>\n\u003C/ol>\n\u003Cp>La première réunion technique avec l’équipe, j’ai parlé avec deux lead engineers frontends. Et on a parlé:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Web performance\u003C/strong> : Comment optimiser du NextJS ?\u003C/li>\n\u003Cli>\u003Cstrong>Next.js routing\u003C/strong> : Comment gérer la complexité du SPA dans App Router?\u003C/li>\n\u003Cli>\u003Cstrong>Design systems\u003C/strong> : Comment faire evoluer notre design system.\u003C/li>\n\u003C/ul>\n\u003Cp>Et là, j’ai pensé: \u003Cstrong>“Yes. Ces gens, je peux travailler avec.”\u003C/strong>\u003C/p>\n\u003Cp>C’est rare.\u003C/p>\n\u003Ch2 id=\"lead-de-la-frontend-core-team\">Lead de la Frontend Core Team\u003C/h2>\n\u003Cp>En novembre 2023, j’ai signé.\u003C/p>\n\u003Cp>Et dès janvier 2024, je suis responsable de la roadmap frontend pour Veepee.\u003C/p>\n\u003Cp>Qu’est-ce que ça veut dire?\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Définir la stratégie\u003C/strong> : Next.js migration, design system, infra\u003C/li>\n\u003Cli>\u003Cstrong>Recruter l’équipe\u003C/strong> : Ajouter des seniors backend avec expérience frontend\u003C/li>\n\u003Cli>\u003Cstrong>Établir les standards\u003C/strong> : TypeScript, testing, performance, accessibilité\u003C/li>\n\u003Cli>\u003Cstrong>Diriger les grands projets\u003C/strong> : Performance, bundling, SSR optimization\u003C/li>\n\u003Cli>\u003Cstrong>Mentorat\u003C/strong> : Aider les gens de l’équipe à grandir\u003C/li>\n\u003C/ol>\n\u003Cp>C’est ce que je faisais chez Talend. Mais cette fois:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Je contrôle les décisions\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>L’équipe est juste\u003C/strong> (25+ frontends qui attendent)\u003C/li>\n\u003Cli>\u003Cstrong>Le produit est vivant\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>Les gens veulent changer\u003C/strong> (pas de résistance au changement)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"quest-ce-que-cest-dêtre-lead-frontend\">Qu’est-ce que c’est d’être Lead Frontend\u003C/h2>\n\u003Cp>En tant que lead, mes priorités pour 2024:\u003C/p>\n\u003Ch3 id=\"1-stabiliser-linfra\">1. Stabiliser l’infra\u003C/h3>\n\u003Cp>Veepee a un vrai produit, mais l’infra frontend n’est pas optimale.\u003C/p>\n\u003Cp>Pages trop lourdes. Rendering lent. Pas de caching stratégique.\u003C/p>\n\u003Cp>Première étape: \u003Cstrong>mesurer\u003C/strong> exactement où on perd du temps.\u003C/p>\n\u003Cp>Puis: \u003Cstrong>optimiser\u003C/strong> de manière stratégique:\u003C/p>\n\u003Cul>\n\u003Cli>Image optimization (un gros levier pour l’ecommerce)\u003C/li>\n\u003Cli>Code splitting intelligent\u003C/li>\n\u003Cli>Font loading strategy\u003C/li>\n\u003Cli>Critical CSS\u003C/li>\n\u003Cli>Monorepository pour l efficacité\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"2-etre-en-charge-de-la-production\">2. Etre en charge de la production\u003C/h3>\n\u003Cp>Contrairement à mon experience d’architecte je devais cette fois gérer les soucis en production.\u003C/p>\n\u003Cp>En lien avec les SRE et les autres tech lead:\u003C/p>\n\u003Cul>\n\u003Cli>Analyse des \u003Cstrong>logs\u003C/strong>\u003C/li>\n\u003Cli>Analyse des \u003Cstrong>metrics\u003C/strong>\u003C/li>\n\u003Cli>Prise de décisions \u003Cstrong>rapides\u003C/strong>\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"3-moderniser-le-stack-progressivement\">3. Moderniser le stack progressivement\u003C/h3>\n\u003Cp>Veepee a du legacy. Rien de surprenant pour une boîte profitable.\u003C/p>\n\u003Cp>Donc:\u003C/p>\n\u003Cul>\n\u003Cli>Migrer vers \u003Cstrong>Next.js 13+ App Router\u003C/strong> progressivement\u003C/li>\n\u003Cli>Remplacer \u003Cstrong>Webpack\u003C/strong> par \u003Cstrong>Turbopack\u003C/strong> (long terme)\u003C/li>\n\u003Cli>Ajouter \u003Cstrong>TypeScript\u003C/strong> partout (progressivement)\u003C/li>\n\u003Cli>Moderniser les \u003Cstrong>build times\u003C/strong> (ils sont longs)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"4-former\">4. Former\u003C/h3>\n\u003Cp>Une équipe de 25+ développeurs qui veulent grandir.\u003C/p>\n\u003Cp>Lead ça veut aussi dire: aider les gens. Leur donner des mentors. Les challenger. Les faire progresser.\u003C/p>\n\u003Cp>C’est la partie du job que j’aime le plus.\u003C/p>\n\u003Ch2 id=\"pourquoi-je-suis-enthousiaste\">Pourquoi je suis enthousiaste\u003C/h2>\n\u003Cp>Après 7 ans chez Talend et l’acquisition difficile, Veepee c’est un nouveau départ.\u003C/p>\n\u003Cp>Pas en tant que “je recommence à zéro.” Mais en tant que “j’applique tout ce que j’ai appris.”\u003C/p>\n\u003Cp>Je sais ce qui marche:\u003C/p>\n\u003Cul>\n\u003Cli>Les design systems qui adoptent\u003C/li>\n\u003Cli>Les architectures qui scale\u003C/li>\n\u003Cli>Les équipes qui livrent\u003C/li>\n\u003Cli>Les technologies qui ont du sens\u003C/li>\n\u003C/ul>\n\u003Cp>Et cette fois, j’ai la chance de \u003Cstrong>le faire correctement\u003C/strong> sans les contraintes de legacy ou d’acquisition.\u003C/p>\n\u003Cp>Veepee a:\u003C/p>\n\u003Cul>\n\u003Cli>Un beau produit\u003C/li>\n\u003Cli>Un budget\u003C/li>\n\u003Cli>Une vrai équipe\u003C/li>\n\u003Cli>La vraie autonomie\u003C/li>\n\u003C/ul>\n\u003Cp>Je ne pouvais pas demander mieux.\u003C/p>\n\u003Ch2 id=\"pour-la-communauté\">Pour la communauté\u003C/h2>\n\u003Cp>Chez Talend, j’ai écrit beaucoup. Sur les design systems. Sur l’architecture. Sur les lessons learned.\u003C/p>\n\u003Cp>J’ai prévu de continuer ici. De partager:\u003C/p>\n\u003Cul>\n\u003Cli>Comment on bâtit une design system qui scale\u003C/li>\n\u003Cli>Comment on optimise pour 10M visiteurs\u003C/li>\n\u003Cli>Comment on modernise un codebase sans breaking it\u003C/li>\n\u003Cli>Comment on leads une équipe frontend\u003C/li>\n\u003C/ul>\n\u003Cp>Veepee m’a encouragé à parler publiquement. À contribuer à la communauté.\u003C/p>\n\u003Cp>Donc ça va continuer.\u003C/p>\n\u003Ch2 id=\"conclusion-le-bon-match-au-bon-moment\">Conclusion: Le bon match, au bon moment\u003C/h2>\n\u003Cp>Quitter Talend a été difficile. C’était ma maison. J’y ai grandi comme architecte.\u003C/p>\n\u003Cp>Mais l’acquisition m’a rappelé que les entreprises changent. Les décisions ne sont pas toujours tes décisions.\u003C/p>\n\u003Cp>Et parfois, le meilleur move c’est de dire: “Je dois aller ailleurs. Je dois trouver un match où je peux vraiment construire.”\u003C/p>\n\u003Cp>Veepee c’est ce match.\u003C/p>\n\u003Cp>Je suis impatient de voir où on peut aller avec une équipe de 25+ frontends passionnés et une infrastructure moderne.\u003C/p>\n\u003Cp>2024 va être intéressant.\u003C/p>\n\u003Chr>\n\u003Cp>\u003Cstrong>Les vraies questions qu’on devrait se poser dans une carrière:\u003C/strong>\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Est-ce que tu contrôles les décisions?\u003C/strong> (Ou tu les négocies?)\u003C/li>\n\u003Cli>\u003Cstrong>Est-ce que tu aimes le produit?\u003C/strong> (Ou tu paies juste les factures?)\u003C/li>\n\u003Cli>\u003Cstrong>Est-ce que tu aimes l’équipe?\u003C/strong> (Ou tu te disputes avec eux?)\u003C/li>\n\u003Cli>\u003Cstrong>Est-ce que tu peux grandir?\u003C/strong> (Ou tu stagnes?)\u003C/li>\n\u003C/ol>\n\u003Cp>Si tu répondres “non” à trop de ces questions, c’est peut-être le signal que tu dois bouger.\u003C/p>\n\u003Cp>Chez Talend, les réponses ont changé. Et je suis allé ailleurs.\u003C/p>\n\u003Cp>C’est pas dramatique. C’est juste la vie du tech.\u003C/p>",{"headings":1674,"localImagePaths":1729,"remoteImagePaths":1730,"frontmatter":1731,"imagePaths":1735},[1675,1678,1681,1684,1687,1690,1693,1696,1699,1702,1705,1708,1711,1714,1717,1720,1723,1726],{"depth":449,"slug":1676,"text":1677},"sept-ans-sur-du-spa-enfin-libre-de-faire-du-react","Sept ans sur du SPA: Enfin libre de faire du React",{"depth":449,"slug":1679,"text":1680},"la-croissance-de-nextjs","La croissance de NextJS",{"depth":449,"slug":1682,"text":1683},"lacquisition-quand-tu-perds-le-contrôle","L’acquisition: Quand tu perds le contrôle",{"depth":1018,"slug":1685,"text":1686},"materialui-lhorreur-du-design-system-corporate","MaterialUI: L’horreur du design system corporate",{"depth":1018,"slug":1688,"text":1689},"systemjs-le-framework-qui-nexiste-pas-vraiment","SystemJS: Le framework qui n’existe pas vraiment",{"depth":449,"slug":1691,"text":1692},"lacquisition-troublante","L’acquisition troublante",{"depth":449,"slug":1694,"text":1695},"chercher-ailleurs-talend-nest-plus-ma-maison","Chercher ailleurs: Talend n’est plus ma maison",{"depth":449,"slug":1697,"text":1698},"chercher-la-bonne-entreprise","Chercher la bonne entreprise",{"depth":449,"slug":1700,"text":1701},"veepee-enfin-une-entreprise-qui-bouge","Veepee: Enfin une entreprise qui bouge",{"depth":449,"slug":1703,"text":1704},"lead-de-la-frontend-core-team","Lead de la Frontend Core Team",{"depth":449,"slug":1706,"text":1707},"quest-ce-que-cest-dêtre-lead-frontend","Qu’est-ce que c’est d’être Lead Frontend",{"depth":1018,"slug":1709,"text":1710},"1-stabiliser-linfra","1. Stabiliser l’infra",{"depth":1018,"slug":1712,"text":1713},"2-etre-en-charge-de-la-production","2. Etre en charge de la production",{"depth":1018,"slug":1715,"text":1716},"3-moderniser-le-stack-progressivement","3. Moderniser le stack progressivement",{"depth":1018,"slug":1718,"text":1719},"4-former","4. Former",{"depth":449,"slug":1721,"text":1722},"pourquoi-je-suis-enthousiaste","Pourquoi je suis enthousiaste",{"depth":449,"slug":1724,"text":1725},"pour-la-communauté","Pour la communauté",{"depth":449,"slug":1727,"text":1728},"conclusion-le-bon-match-au-bon-moment","Conclusion: Le bon match, au bon moment",[],[],{"title":1659,"categories":1732,"tags":1733,"date":1734},[696],[1663,975,1551,1552,1060,1664,1665,1666,1667],["Date","2023-11-20T00:00:00.000Z"],[],"2023-11-20-veepee.md","2024-04-25-design-system-qlik",{"id":1737,"data":1739,"body":1745,"filePath":1746,"digest":1747,"rendered":1748,"legacyId":1768},{"title":1740,"date":1741,"categories":1742,"tags":1743,"lang":17},"Talend: Un retour pour leader le design-system",["Date","2024-04-25T00:00:00.000Z"],[696],[975,1551,1552,1060,1744,1666,1667],"Architect","Retourner chez Talend (dans l'univers Qlik) après six mois ailleurs, c'est un drôle de sentiment: à la fois un saut dans le passé et un sprint vers l'avenir. Cette fois, l'opportunité était claire: **reprendre le leadership du design system** pour une entreprise produit qui assume vraiment le fait de livrer de la valeur à ses utilisateurs.\n\n## Pourquoi revenir\n\n\n1. **Le projet: leader le design system** — La mission est nette: refondre et faire adopter un design system utilisé par plusieurs produits, avec des design tokens solides et une gouvernance claire.\n2. **Remote flexible** — Télétravail possible, mais un vrai bureau vivant pour se voir quand il faut résoudre vite et bien.\n3. **Obsession de la qualité** — Pas seulement du code propre: accessibilité, performance, DX, CI/CD, et une culture qui mesure et corrige.\n4. **Travailler avec les bonnes personnes** — Les PO, designers, devs, ops sont impliqués. Les décisions sont prises avec celles et ceux qui construisent.\n5. **Un bureau à Nantes** — Un ancrage local, une équipe qui se connaît, et l'énergie d'une communauté tech régionale.\n\n## Ce que je fais au quotidien\n\n- **Aligner design et dev** : tokens partagés, librairie de composants, guidelines claires, et un process de versioning qui respecte la réalité des produits.\n- **Réduire le coût du changement** : migration progressive, compatibilité ascendante quand c'est possible, outillage pour détecter les régressions UI.\n- **Mettre l'utilisateur au centre** : accessibilité par défaut, feedback loop avec le support et la recherche utilisateur.\n- **Mesurer** : temps de chargement, score Lighthouse, adoption des composants, backlog des gaps d'accessibilité.\n- **Coacher** : accompagner les équipes produit pour qu'elles puissent contribuer plutôt que consommer passivement.\n\n## Six mois plus tard\n\nCe retour est exactement ce que j'espérais: de l'impact, de l'autonomie, et la sensation de construire un socle dont les équipes ont réellement besoin. La politique remote est saine, l'attention portée à la qualité est réelle, et les collaborations avec les personnes clés de l'entreprise sont quotidiennes.\n\nLe design system n'est pas une fin en soi. C'est un moyen pour livrer plus vite, plus fiable, et plus cohérent. Et c'est ce qui rend le job passionnant.\n\nUne aquisition c est difficile ! Mais j'aime mon travail et mes collegues et revenir et revoir tout le monde m'a donne beaucoup de plaisir. Alors c est reparti pour cette fois faire encore mieux que Coral !\n  \n---\n\nPost LinkedIn original: https://www.linkedin.com/posts/nathanleehollis_boomerang-lifeatqlik-nowhiring-activity-7354157665364635650-72_i","src/content/posts/2024-04-25-design-system-qlik.md","a6b148214476ac26",{"html":1749,"metadata":1750},"\u003Cp>Retourner chez Talend (dans l’univers Qlik) après six mois ailleurs, c’est un drôle de sentiment: à la fois un saut dans le passé et un sprint vers l’avenir. Cette fois, l’opportunité était claire: \u003Cstrong>reprendre le leadership du design system\u003C/strong> pour une entreprise produit qui assume vraiment le fait de livrer de la valeur à ses utilisateurs.\u003C/p>\n\u003Ch2 id=\"pourquoi-revenir\">Pourquoi revenir\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>Le projet: leader le design system\u003C/strong> — La mission est nette: refondre et faire adopter un design system utilisé par plusieurs produits, avec des design tokens solides et une gouvernance claire.\u003C/li>\n\u003Cli>\u003Cstrong>Remote flexible\u003C/strong> — Télétravail possible, mais un vrai bureau vivant pour se voir quand il faut résoudre vite et bien.\u003C/li>\n\u003Cli>\u003Cstrong>Obsession de la qualité\u003C/strong> — Pas seulement du code propre: accessibilité, performance, DX, CI/CD, et une culture qui mesure et corrige.\u003C/li>\n\u003Cli>\u003Cstrong>Travailler avec les bonnes personnes\u003C/strong> — Les PO, designers, devs, ops sont impliqués. Les décisions sont prises avec celles et ceux qui construisent.\u003C/li>\n\u003Cli>\u003Cstrong>Un bureau à Nantes\u003C/strong> — Un ancrage local, une équipe qui se connaît, et l’énergie d’une communauté tech régionale.\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"ce-que-je-fais-au-quotidien\">Ce que je fais au quotidien\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Aligner design et dev\u003C/strong> : tokens partagés, librairie de composants, guidelines claires, et un process de versioning qui respecte la réalité des produits.\u003C/li>\n\u003Cli>\u003Cstrong>Réduire le coût du changement\u003C/strong> : migration progressive, compatibilité ascendante quand c’est possible, outillage pour détecter les régressions UI.\u003C/li>\n\u003Cli>\u003Cstrong>Mettre l’utilisateur au centre\u003C/strong> : accessibilité par défaut, feedback loop avec le support et la recherche utilisateur.\u003C/li>\n\u003Cli>\u003Cstrong>Mesurer\u003C/strong> : temps de chargement, score Lighthouse, adoption des composants, backlog des gaps d’accessibilité.\u003C/li>\n\u003Cli>\u003Cstrong>Coacher\u003C/strong> : accompagner les équipes produit pour qu’elles puissent contribuer plutôt que consommer passivement.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"six-mois-plus-tard\">Six mois plus tard\u003C/h2>\n\u003Cp>Ce retour est exactement ce que j’espérais: de l’impact, de l’autonomie, et la sensation de construire un socle dont les équipes ont réellement besoin. La politique remote est saine, l’attention portée à la qualité est réelle, et les collaborations avec les personnes clés de l’entreprise sont quotidiennes.\u003C/p>\n\u003Cp>Le design system n’est pas une fin en soi. C’est un moyen pour livrer plus vite, plus fiable, et plus cohérent. Et c’est ce qui rend le job passionnant.\u003C/p>\n\u003Cp>Une aquisition c est difficile ! Mais j’aime mon travail et mes collegues et revenir et revoir tout le monde m’a donne beaucoup de plaisir. Alors c est reparti pour cette fois faire encore mieux que Coral !\u003C/p>\n\u003Chr>\n\u003Cp>Post LinkedIn original: \u003Ca href=\"https://www.linkedin.com/posts/nathanleehollis_boomerang-lifeatqlik-nowhiring-activity-7354157665364635650-72_i\">https://www.linkedin.com/posts/nathanleehollis_boomerang-lifeatqlik-nowhiring-activity-7354157665364635650-72_i\u003C/a>\u003C/p>",{"headings":1751,"localImagePaths":1761,"remoteImagePaths":1762,"frontmatter":1763,"imagePaths":1767},[1752,1755,1758],{"depth":449,"slug":1753,"text":1754},"pourquoi-revenir","Pourquoi revenir",{"depth":449,"slug":1756,"text":1757},"ce-que-je-fais-au-quotidien","Ce que je fais au quotidien",{"depth":449,"slug":1759,"text":1760},"six-mois-plus-tard","Six mois plus tard",[],[],{"title":1740,"categories":1764,"tags":1765,"date":1766},[696],[975,1551,1552,1060,1744,1666,1667],["Date","2024-04-25T00:00:00.000Z"],[],"2024-04-25-design-system-qlik.md","2025-12-31-tailwind-like",{"id":1769,"data":1771,"body":1776,"filePath":1777,"digest":1778,"rendered":1779,"legacyId":1817},{"title":1772,"date":1773,"categories":1774,"tags":1775,"lang":17},"Tailwind but runtime",["Date","2025-12-31T00:00:00.000Z"],[17],[975,1551,1552,1060,1666],"After years of shipping design systems, we wanted the speed of Tailwind without the global-CSS baggage and without leaking raw values. So we built a **runtime Tailwind-alike** powered by CSS Modules and our design tokens.\n\n## Constraints we had to solve\n\n- **No global CSS**: collision-free by construction, no `.btn` surprises.\n- **Tokens everywhere**: not a single hardcoded px/rem/hex in the API surface.\n- **Readable semantics**: utility classes that mean something (`p-s`, `bg_default`, `text_brand`), no magic numbers.\n- **Composable with components**: works with our React component library; no extra wrapper or provider.\n- **Zero-prefixed responsive hacks**: we refused `md:p-4`-style prefixes; media/container logic must live in CSS, not in class names or JS.\n\n## The idea: utilities at runtime, scoped by CSS Modules\n\nInstead of shipping a giant global stylesheet, we generate scoped utility classes through CSS Modules. Each file imports a small set of prebuilt utilities derived from tokens.\n\nExample usage in a component:\n\n```tsx\nimport styles from './box.module.css';\nimport { classNames } from '@qlik/our-lib'; // token-based utilities\n\nexport function Card({ children }) {\n\treturn (\n\t\t\u003Cdiv className={classNames(\"bg_default\", \"p_m\", \"radius_m\", styles.card)}>\n\t\t\t{children}\n\t\t\u003C/div>\n\t);\n}\n```\n\nAnd the local CSS for component-specific tweaks:\n\n```css\n/* box.module.css */\n.card {\n\tborder: var(--token-border-weak);\n\tbox-shadow: var(--token-shadow-sm);\n}\n```\n\nNo globals, no name collisions. Utilities are just module exports.\n\n## T-shirt sizing, not numbers\n\nWe dropped numeric scales (`p-4`) and kept **t-shirt sizes** mapped to tokens:\n\n- Spacing: `p_xs`, `p_s`, `p_m`, `p_l`, `p_xl`\n- Gap: `gap_s`, `gap_m`\n- Radius: `radius_s`, `radius_m`, `radius_l`\n- Typography: `text_body`, `text_caption`, `text_title`\n\nEverything resolves to design tokens at build time; no arbitrary values sneak in.\n\n## Underscore not dash\n\nBecause each class is extracted as a javascript attribute our original API was exposing that object. classNames cames after so yes it could be reworked using dash but we have decided to keep it for now as it is.\n\n## Color and state semantics\n\nWe kept naming semantic instead of chromatic:\n\n- Background: `bg_default`, `bg_weak`, `bg_strong`, `bg_danger`\n- Text: `text_primary`, `text_muted`, `text_inverse`\n- Border: `border_default`, `border_weak`, `border_danger`\n\nTokens drive the actual color values, so theming is just swapping token files.\n\n## Responsive without prefixed classes\n\nWe killed `sm:`, `md:` prefixes. Responsive rules live in CSS Modules via container queries and media queries, still token-driven:\n\n```css\n/* layout.module.css */\n.grid {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgap: var(--token-space-m);\n}\n\n@container (min-width: 720px) {\n\t.grid {\n\t\tgrid-template-columns: 1fr 1fr;\n\t}\n}\n\n@media (min-width: 1024px) {\n\t.grid {\n\t\tgrid-template-columns: repeat(3, 1fr);\n\t}\n}\n```\n\nNo class prefixes, no JS-based media API to maintain. The runtime stays lean, and semantics stay clean.\n\n## Advanced needs: go local\n\nWhen someone needs a custom animation, a specific layout hack, or an experimental pattern, they add a `*.module.css` next to the component and still consume tokens:\n\n```css\n/* hero.module.css */\n.shine {\n\tbackground: linear-gradient(90deg, var(--token-bg-weak), var(--token-bg-strong));\n\tanimation: shine 1.8s linear infinite;\n}\n\n@keyframes shine {\n\tfrom { background-position: 0% 50%; }\n\tto { background-position: 100% 50%; }\n}\n```\n\nUtilities cover 80%. Modules handle the last mile. No globals, no overrides.\n\n## Why the frontend teams love it\n\n- **Speed**: utility ergonomics without hunting class collisions.\n- **Predictability**: every class maps to a token; design and dev share the same vocabulary.\n- **Portability**: no global stylesheet to import; tree-shaking keeps bundles small.\n- **Less JS**: container/media logic stays in CSS; we removed our custom JS media API.\n- **Escape hatches**: module CSS exists for edge cases, so the utility set stays tight.\n\n## The takeaway\n\nYou can have Tailwind-like velocity **and** strong design system guarantees if you:\n\n1. Scope utilities with CSS Modules (no globals).\n2. Base every utility on design tokens (no raw values).\n3. Prefer semantic naming (t-shirt sizes, intent-based colors).\n4. Keep responsive logic in CSS (container/media), not in class names or JS.\n5. Leave room for local CSS so the utility surface stays small.\n\nThe result: happier frontend teams, a safer design system surface, and zero regrets about ditching global CSS.","src/content/posts/2025-12-31-tailwind-like.md","0b047364dd419b1c",{"html":1780,"metadata":1781},"\u003Cp>After years of shipping design systems, we wanted the speed of Tailwind without the global-CSS baggage and without leaking raw values. So we built a \u003Cstrong>runtime Tailwind-alike\u003C/strong> powered by CSS Modules and our design tokens.\u003C/p>\n\u003Ch2 id=\"constraints-we-had-to-solve\">Constraints we had to solve\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>No global CSS\u003C/strong>: collision-free by construction, no \u003Ccode>.btn\u003C/code> surprises.\u003C/li>\n\u003Cli>\u003Cstrong>Tokens everywhere\u003C/strong>: not a single hardcoded px/rem/hex in the API surface.\u003C/li>\n\u003Cli>\u003Cstrong>Readable semantics\u003C/strong>: utility classes that mean something (\u003Ccode>p-s\u003C/code>, \u003Ccode>bg_default\u003C/code>, \u003Ccode>text_brand\u003C/code>), no magic numbers.\u003C/li>\n\u003Cli>\u003Cstrong>Composable with components\u003C/strong>: works with our React component library; no extra wrapper or provider.\u003C/li>\n\u003Cli>\u003Cstrong>Zero-prefixed responsive hacks\u003C/strong>: we refused \u003Ccode>md:p-4\u003C/code>-style prefixes; media/container logic must live in CSS, not in class names or JS.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-idea-utilities-at-runtime-scoped-by-css-modules\">The idea: utilities at runtime, scoped by CSS Modules\u003C/h2>\n\u003Cp>Instead of shipping a giant global stylesheet, we generate scoped utility classes through CSS Modules. Each file imports a small set of prebuilt utilities derived from tokens.\u003C/p>\n\u003Cp>Example usage in a component:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"tsx\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> styles \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> './box.module.css'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { classNames } \u003C/span>\u003Cspan style=\"color:#F92672\">from\u003C/span>\u003Cspan style=\"color:#E6DB74\"> '@qlik/our-lib'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">; \u003C/span>\u003Cspan style=\"color:#88846F\">// token-based utilities\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">export\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\"> function\u003C/span>\u003Cspan style=\"color:#A6E22E\"> Card\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({ \u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\">children\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> }) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">\treturn\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\t\t&#x3C;\u003C/span>\u003Cspan style=\"color:#F92672\">div\u003C/span>\u003Cspan style=\"color:#A6E22E\"> className\u003C/span>\u003Cspan style=\"color:#F92672\">={\u003C/span>\u003Cspan style=\"color:#A6E22E\">classNames\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#E6DB74\">\"bg_default\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"p_m\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E6DB74\">\"radius_m\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, styles.card)\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">\t\t\t{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">children\u003C/span>\u003Cspan style=\"color:#F92672\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\t\t&#x3C;/\u003C/span>\u003Cspan style=\"color:#F92672\">div\u003C/span>\u003Cspan style=\"color:#F8F8F2\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\t);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>And the local CSS for component-specific tweaks:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"css\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">/* box.module.css */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">.card\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tborder\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">var\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(--token-border-weak);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tbox-shadow\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">var\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(--token-shadow-sm);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>No globals, no name collisions. Utilities are just module exports.\u003C/p>\n\u003Ch2 id=\"t-shirt-sizing-not-numbers\">T-shirt sizing, not numbers\u003C/h2>\n\u003Cp>We dropped numeric scales (\u003Ccode>p-4\u003C/code>) and kept \u003Cstrong>t-shirt sizes\u003C/strong> mapped to tokens:\u003C/p>\n\u003Cul>\n\u003Cli>Spacing: \u003Ccode>p_xs\u003C/code>, \u003Ccode>p_s\u003C/code>, \u003Ccode>p_m\u003C/code>, \u003Ccode>p_l\u003C/code>, \u003Ccode>p_xl\u003C/code>\u003C/li>\n\u003Cli>Gap: \u003Ccode>gap_s\u003C/code>, \u003Ccode>gap_m\u003C/code>\u003C/li>\n\u003Cli>Radius: \u003Ccode>radius_s\u003C/code>, \u003Ccode>radius_m\u003C/code>, \u003Ccode>radius_l\u003C/code>\u003C/li>\n\u003Cli>Typography: \u003Ccode>text_body\u003C/code>, \u003Ccode>text_caption\u003C/code>, \u003Ccode>text_title\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Cp>Everything resolves to design tokens at build time; no arbitrary values sneak in.\u003C/p>\n\u003Ch2 id=\"underscore-not-dash\">Underscore not dash\u003C/h2>\n\u003Cp>Because each class is extracted as a javascript attribute our original API was exposing that object. classNames cames after so yes it could be reworked using dash but we have decided to keep it for now as it is.\u003C/p>\n\u003Ch2 id=\"color-and-state-semantics\">Color and state semantics\u003C/h2>\n\u003Cp>We kept naming semantic instead of chromatic:\u003C/p>\n\u003Cul>\n\u003Cli>Background: \u003Ccode>bg_default\u003C/code>, \u003Ccode>bg_weak\u003C/code>, \u003Ccode>bg_strong\u003C/code>, \u003Ccode>bg_danger\u003C/code>\u003C/li>\n\u003Cli>Text: \u003Ccode>text_primary\u003C/code>, \u003Ccode>text_muted\u003C/code>, \u003Ccode>text_inverse\u003C/code>\u003C/li>\n\u003Cli>Border: \u003Ccode>border_default\u003C/code>, \u003Ccode>border_weak\u003C/code>, \u003Ccode>border_danger\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Cp>Tokens drive the actual color values, so theming is just swapping token files.\u003C/p>\n\u003Ch2 id=\"responsive-without-prefixed-classes\">Responsive without prefixed classes\u003C/h2>\n\u003Cp>We killed \u003Ccode>sm:\u003C/code>, \u003Ccode>md:\u003C/code> prefixes. Responsive rules live in CSS Modules via container queries and media queries, still token-driven:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"css\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">/* layout.module.css */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">.grid\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tdisplay\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">grid\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tgrid-template-columns\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">1\u003C/span>\u003Cspan style=\"color:#F92672\">fr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tgap\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">var\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(--token-space-m);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">@container\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (min-width: 720px) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">\t.grid\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\t\tgrid-template-columns\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">1\u003C/span>\u003Cspan style=\"color:#F92672\">fr\u003C/span>\u003Cspan style=\"color:#AE81FF\"> 1\u003C/span>\u003Cspan style=\"color:#F92672\">fr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">@media\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> (\u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">min-width\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">1024\u003C/span>\u003Cspan style=\"color:#F92672\">px\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">\t.grid\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\t\tgrid-template-columns\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">repeat\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#AE81FF\">3\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#AE81FF\">1\u003C/span>\u003Cspan style=\"color:#F92672\">fr\u003C/span>\u003Cspan style=\"color:#F8F8F2\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>No class prefixes, no JS-based media API to maintain. The runtime stays lean, and semantics stay clean.\u003C/p>\n\u003Ch2 id=\"advanced-needs-go-local\">Advanced needs: go local\u003C/h2>\n\u003Cp>When someone needs a custom animation, a specific layout hack, or an experimental pattern, they add a \u003Ccode>*.module.css\u003C/code> next to the component and still consume tokens:\u003C/p>\n\u003Cpre class=\"astro-code monokai\" style=\"background-color:#272822;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"css\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#88846F\">/* hero.module.css */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#A6E22E\">.shine\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tbackground\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#66D9EF\">linear-gradient\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#AE81FF\">90\u003C/span>\u003Cspan style=\"color:#F92672\">deg\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#66D9EF\">var\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(--token-bg-weak), \u003C/span>\u003Cspan style=\"color:#66D9EF\">var\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(--token-bg-strong));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#66D9EF;font-style:italic\">\tanimation\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: shine \u003C/span>\u003Cspan style=\"color:#AE81FF\">1.8\u003C/span>\u003Cspan style=\"color:#F92672\">s\u003C/span>\u003Cspan style=\"color:#66D9EF\"> linear\u003C/span>\u003Cspan style=\"color:#66D9EF\"> infinite\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F92672\">@keyframes\u003C/span>\u003Cspan style=\"color:#FD971F;font-style:italic\"> shine\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\tfrom { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">background-position\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">0\u003C/span>\u003Cspan style=\"color:#F92672\">%\u003C/span>\u003Cspan style=\"color:#AE81FF\"> 50\u003C/span>\u003Cspan style=\"color:#F92672\">%\u003C/span>\u003Cspan style=\"color:#F8F8F2\">; }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">\tto { \u003C/span>\u003Cspan style=\"color:#66D9EF;font-style:italic\">background-position\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#AE81FF\">100\u003C/span>\u003Cspan style=\"color:#F92672\">%\u003C/span>\u003Cspan style=\"color:#AE81FF\"> 50\u003C/span>\u003Cspan style=\"color:#F92672\">%\u003C/span>\u003Cspan style=\"color:#F8F8F2\">; }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Utilities cover 80%. Modules handle the last mile. No globals, no overrides.\u003C/p>\n\u003Ch2 id=\"why-the-frontend-teams-love-it\">Why the frontend teams love it\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Speed\u003C/strong>: utility ergonomics without hunting class collisions.\u003C/li>\n\u003Cli>\u003Cstrong>Predictability\u003C/strong>: every class maps to a token; design and dev share the same vocabulary.\u003C/li>\n\u003Cli>\u003Cstrong>Portability\u003C/strong>: no global stylesheet to import; tree-shaking keeps bundles small.\u003C/li>\n\u003Cli>\u003Cstrong>Less JS\u003C/strong>: container/media logic stays in CSS; we removed our custom JS media API.\u003C/li>\n\u003Cli>\u003Cstrong>Escape hatches\u003C/strong>: module CSS exists for edge cases, so the utility set stays tight.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-takeaway\">The takeaway\u003C/h2>\n\u003Cp>You can have Tailwind-like velocity \u003Cstrong>and\u003C/strong> strong design system guarantees if you:\u003C/p>\n\u003Col>\n\u003Cli>Scope utilities with CSS Modules (no globals).\u003C/li>\n\u003Cli>Base every utility on design tokens (no raw values).\u003C/li>\n\u003Cli>Prefer semantic naming (t-shirt sizes, intent-based colors).\u003C/li>\n\u003Cli>Keep responsive logic in CSS (container/media), not in class names or JS.\u003C/li>\n\u003Cli>Leave room for local CSS so the utility surface stays small.\u003C/li>\n\u003C/ol>\n\u003Cp>The result: happier frontend teams, a safer design system surface, and zero regrets about ditching global CSS.\u003C/p>",{"headings":1782,"localImagePaths":1810,"remoteImagePaths":1811,"frontmatter":1812,"imagePaths":1816},[1783,1786,1789,1792,1795,1798,1801,1804,1807],{"depth":449,"slug":1784,"text":1785},"constraints-we-had-to-solve","Constraints we had to solve",{"depth":449,"slug":1787,"text":1788},"the-idea-utilities-at-runtime-scoped-by-css-modules","The idea: utilities at runtime, scoped by CSS Modules",{"depth":449,"slug":1790,"text":1791},"t-shirt-sizing-not-numbers","T-shirt sizing, not numbers",{"depth":449,"slug":1793,"text":1794},"underscore-not-dash","Underscore not dash",{"depth":449,"slug":1796,"text":1797},"color-and-state-semantics","Color and state semantics",{"depth":449,"slug":1799,"text":1800},"responsive-without-prefixed-classes","Responsive without prefixed classes",{"depth":449,"slug":1802,"text":1803},"advanced-needs-go-local","Advanced needs: go local",{"depth":449,"slug":1805,"text":1806},"why-the-frontend-teams-love-it","Why the frontend teams love it",{"depth":449,"slug":1808,"text":1809},"the-takeaway","The takeaway",[],[],{"title":1772,"categories":1813,"tags":1814,"date":1815},[17],[975,1551,1552,1060,1666],["Date","2025-12-31T00:00:00.000Z"],[],"2025-12-31-tailwind-like.md"]